[
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero um relatório de abertura de O.S`s do ano 2024."
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT conc.nome AS concessionaria, clu.nome AS cluster, dep.nome AS departamento, vend.nome AS vendedor, prod.nome AS produtivo, os.id AS os_id, os.os_concessionaria AS os_concessionaria, ost.nome AS os_tipo, os.created_at AS data_abertura, oss.data_fechamento AS data_fechamento, os.data_entrega AS data_entrega, cmc.nome AS marca, cmd.nome AS modelo, CONCAT(serv.nome, ' ', IFNULL(ton.nome, '')) AS servico, ccr.nome AS cor_veiculo, cpr.nome AS porte, oss.valor_venda_real AS valor_venda, (IFNULL(tcs.valor_dentro, 0) + IFNULL(tcs.valor_fora, 0)) AS porcentagem_concessionaria, os.data_pagamento AS data_pagamento, os.tipo_atendimento AS tipo_atendimento, IF(os.cancelada, 'CANCELADA', IF(os.paga, IF(os.fechada, 'FINALIZADA', 'PAGA'), IF(os.fechada, 'FECHADA', 'ABERTA'))) AS status, IF(oss.cancelado, 'CANCELADO', IF(oss.fechado, 'FECHADO', 'ABERTO')) AS status_servico, cli.cpf AS cpf, cli.data_nascimento AS data_nascimento, oss.combo_id, IF(oss.combo_id, 'SIM', 'NAO') AS combo FROM `os` INNER JOIN `os_servicos` AS `oss` ON `oss`.`os_id` = `os`.`id` INNER JOIN `concessionarias` AS `conc` ON `os`.`concessionaria_id` = `conc`.`id` INNER JOIN `funcionarios` AS `vend` ON `os`.`vendedor_id` = `vend`.`id` INNER JOIN `servicos` AS `serv` ON `oss`.`servico_id` = `serv`.`id` INNER JOIN `clientes` AS `cli` ON `os`.`cliente_id` = `cli`.`id` INNER JOIN `os_tipos` AS `ost` ON `os`.`os_tipo_id` = `ost`.`id` INNER JOIN `departamentos` AS `dep` ON `os`.`departamento_id` = `dep`.`id` INNER JOIN `cliente_carros` AS `clc` ON `os`.`cliente_carro_id` = `clc`.`id` INNER JOIN `carro_modelos` AS `cmd` ON `clc`.`carro_modelo_id` = `cmd`.`id` INNER JOIN `carro_marcas` AS `cmc` ON `cmd`.`carro_marca_id` = `cmc`.`id` INNER JOIN `carro_cores` AS `ccr` ON `clc`.`carro_cor_id` = `ccr`.`id` LEFT JOIN `tonalidades` AS `ton` ON `oss`.`tonalidade_id` = `ton`.`id` LEFT JOIN `clusters` AS `clu` ON `conc`.`cluster_id` = `clu`.`id` LEFT JOIN `funcionarios` AS `prod` ON `oss`.`produtivo_id` = `prod`.`id` LEFT JOIN `concessionaria_tabelas_comissoes` AS `ctc` ON `ctc`.`concessionaria_id` = `conc`.`id` AND `tabela_comissao_tipo_id` = 2 LEFT JOIN `tabela_comissao_servicos` AS `tcs` ON `tcs`.`tabela_comissao_id` = `ctc`.`tabela_comissao_id` LEFT JOIN `carro_modelo_comissao_portes` AS `cmcp` ON `cmcp`.`carro_modelo_id` = `cmd`.`id` AND `cmcp`.`servico_id` = `serv`.`id` LEFT JOIN `carro_portes` AS `cpr` ON `cmcp`.`carro_porte_id` = `cpr`.`id` WHERE  os.deleted_at IS NULL AND DATE(os.created_at) BETWEEN '2024-01-01' AND '2024-12-31' GROUP BY `oss`.`id` ORDER BY `os`.`created_at` ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero o faturamento de cortesias e financiamentos dos ultimos meses."
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT  concessionarias.id AS id, concessionarias.nome AS nome, SUM(IF(c.caixa_fechamento_id IS NULL AND b.justificada_concessionaria = 0 AND c.caixa_status_id = 1, c.valor, 0)) AS total_aberto, SUM(IF(c.caixa_fechamento_id IS NULL AND b.justificada_concessionaria = 1, c.valor,0)) AS total_justificado, SUM(IF(c.caixa_fechamento_id IS NOT NULL AND c.caixa_status_id = 2 AND EXISTS(SELECT 1 FROM caixa_fechamentos WHERE id = c.caixa_fechamento_id AND malote_id IS NULL AND deleted_at IS NULL), c.valor, 0)) AS total_fechado, SUM(IF(c.caixa_fechamento_id IS NOT NULL AND c.caixa_status_id = 2 AND EXISTS(SELECT 1 FROM caixa_fechamentos WHERE id = c.caixa_fechamento_id AND malote_id IS NOT NULL AND deleted_at IS NULL), c.valor, 0)) AS total_finalizado  from `concessionarias` inner join `os` as `b` on `b`.`concessionaria_id` = `concessionarias`.`id` inner join `caixas_pendentes` as `c` on `c`.`os_id` = `b`.`id` where NOT EXISTS( SELECT 1 FROM cortesia_os AS cort_os JOIN cortesias AS cort ON(cort_os.cortesia_id = cort.id) WHERE cort_os.os_id = b.id AND cort.ativo = 1 AND cort_os.ativo = 1 AND cort.deleted_at IS NULL AND cort_os.deleted_at IS NULL ) AND b.deleted_at IS NULL AND c.deleted_at IS NULL AND c.caixa_tipo_id IN (2, 5) AND b.cancelada = 0 AND c.cancelado = 0 AND c.caixa_status_id IN (1, 2) AND IFNULL((SELECT SUM(valor) FROM estornos WHERE caixa_id = c.id AND deleted_at IS NULL AND status > 2), 0) < c.valor  AND `concessionarias`.`deleted_at` IS NULL GROUP BY `concessionarias`.`id` ORDER BY `concessionarias`.`nome` ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero um relatório de notas fiscais emitidas por empresa de fevereiro de 2024."
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT em.id AS empresa_id, nf.tipo_nota, em.nome AS empresa_nome, COUNT(nf.id) AS quantidade, SUM(nf.valor_bruto) AS total_bruto FROM notas_fiscais AS nf INNER JOIN empresas AS em ON em.id = nf.empresa_id WHERE YEAR(nf.data_emissao) = '2024' AND MONTH(nf.data_emissao) = '2' AND nf.tipo_nota IN ('P' , 'C', 'S') AND nf.cancelada = 0 AND nf.status_nota IN (3 , 4) GROUP BY nf.empresa_id```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Gostaria de saber quais são os tipos de ordens de serviços"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT * FROM os_tipos WHERE ativo = 1 AND deleted_at IS NULL```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Gostaria de saber quais são os serviços disponiveis para vendas"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT * FROM servicos WHERE ativo = 1 AND deleted_at IS NULL```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Gostaria de saber quantos e quais são os departamentos existentes"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT *, (SELECT COUNT(id) FROM departamentos WHERE ativo = 1 AND deleted_at IS NULL) AS total_registros FROM departamentos WHERE ativo = 1 AND deleted_at IS NULL```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero a média de serviços vendidos por OS no ultimo mês"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT ROUND(AVG(servicos_por_os.total_servicos)) AS media_servicos_por_os FROM (SELECT os.id AS os_id, COUNT(oss.id) AS total_servicos FROM os LEFT JOIN os_servicos AS oss ON os.id = oss.os_id WHERE os.created_at >= DATE_FORMAT(NOW() - INTERVAL 1 MONTH, '%Y-%m-01') AND os.created_at < DATE_FORMAT(NOW(), '%Y-%m-01') GROUP BY os.id ) AS servicos_por_os;```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero um relatório dos serviços vendidos por OS no ultimo mês. Preciso apenas do numero da OS, valor que o serviço foi vendido, o nome do serviços e caso este tenha tonalidade, quero a tonalidade do produto vendido com o serviço"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT  * FROM (SELECT  oss.os_id, oss.valor_venda_real, ser.nome AS servico, IF(oss.tonalidade_id, ton.nome, 'N.A') AS tonalidade FROM os LEFT JOIN os_servicos AS oss ON os.id = oss.os_id LEFT JOIN servicos AS ser ON ser.id = oss.servico_id LEFT JOIN tonalidades AS ton ON ton.id = oss.tonalidade_id WHERE os.created_at >= DATE_FORMAT(NOW() - INTERVAL 1 MONTH, '%Y-%m-01') AND os.created_at < DATE_FORMAT(NOW(), '%Y-%m-01') ) AS servicos_por_os```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero saber qual o valor da dívida que as concessionarias tem conosco"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT SUM(caixas.valor) AS valor_total FROM caixas INNER JOIN os ON os.id = caixas.os_id INNER JOIN funcionarios ON funcionarios.id = os.vendedor_id INNER JOIN cliente_carros ON cliente_carros.id = os.cliente_carro_id INNER JOIN os_tipos ON os_tipos.id = os.os_tipo_id INNER JOIN os_servicos ON os_servicos.os_id = os.id INNER JOIN concessionarias ON concessionarias.id = os.concessionaria_id WHERE caixas.deleted_at IS NULL AND caixas.ativo = 1 AND caixas.cancelado = 0 AND DATE(os.data_pagamento) BETWEEN '2018-01-01' AND '2025-01-31' AND caixas.fechado = 0 AND caixas.valor > 0  AND os_servicos.cancelado = 0 AND caixa_fechamento_id IS NULL AND caixa_tipo_id = 5 AND NOT EXISTS( SELECT  * FROM estornos WHERE caixas.id = estornos.caixa_id AND status > 2 AND estornos.deleted_at IS NULL) AND caixas.deleted_at IS NULL```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero um relatório de requisições pendentes de produtos por concessionaria e grupo de produto: 'bobinas'"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT oss.id AS id, os.id AS os_id, os.os_concessionaria AS os_concessionaria, p.id AS produto_id, t.id AS tonalidade_id, os.concessionaria_id AS concessionaria_id, cmc.id AS carro_marca_id, cmd.id AS carro_modelo_id, cc.carro_submodelo_id AS carro_submodelo_id, os.created_at AS data_os, s.nome AS servico, t.nome AS tonalidade, cmc.nome AS modelo, cmd.nome AS marca, ot.nome AS os_tipo, d.nome AS departamento, conc.nome AS concessionaria FROM os_servicos AS oss INNER JOIN os ON oss.os_id = os.id INNER JOIN os_tipos AS ot ON os.os_tipo_id = ot.id INNER JOIN departamentos AS d ON os.departamento_id = d.id INNER JOIN concessionarias AS conc ON os.concessionaria_id = conc.id INNER JOIN cliente_carros AS cc ON os.cliente_carro_id = cc.id INNER JOIN carro_modelos AS cmd ON cc.carro_modelo_id = cmd.id INNER JOIN carro_marcas AS cmc ON cmd.carro_marca_id = cmc.id INNER JOIN servicos AS s ON oss.servico_id = s.id INNER JOIN servico_produtos AS sp ON sp.servico_id = s.id INNER JOIN produtos AS p ON sp.produto_id = p.id INNER JOIN tonalidades AS t ON oss.tonalidade_id = t.id INNER JOIN grupos_produtos AS gp ON p.grupo_produto_id = gp.id WHERE oss.deleted_at IS NULL AND os.deleted_at IS NULL AND sp.deleted_at IS NULL AND cc.cadastro_parcial = 0 AND oss.fechado = FALSE AND oss.cancelado = FALSE AND os.cancelada = FALSE AND os.data_entrega IS NOT NULL AND gp.nome LIKE '%bobina%' AND NOT EXISTS( SELECT  1 FROM plotter_saida_cortes WHERE os_servico_id = oss.id AND cancelado = FALSE AND deleted_at IS NULL) AND os.concessionaria_id = 111 GROUP BY oss.id ORDER BY os.created_at ASC , s.nome ASC , t.nome ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero um relatório de requisições pendentes de produtos por concessionaria e grupo de produto: 'estetica'"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT * FROM estoque_saidas WHERE concessionaria_id = 10 AND estoque_saida_tipo_id = 3 AND estoque_saida_status_id IN (1 , 2) AND estoque_saidas.deleted_at IS NULL ORDER BY created_at ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Gostaria de um relatório de ordens de serviços canceladas"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT o.id AS os_id, o.created_at, o.paga, o.fechada, o.os_concessionaria AS os_os, ost.nome AS os_tipo, v.nome AS vendedor, o.data_cancelamento AS data_cancelamento, fc.nome AS usuario_cancelamento, fc.id AS usuario_cancelamento_id, o.motivo_cancelamento AS motivo, (SELECT  SUM(valor_venda_real) FROM os_servicos WHERE os_id = o.id) AS valor_os, IFNULL((SELECT  SUM(valor) FROM caixas WHERE os_id = o.id), 0) AS valor_pago_os, IFNULL((SELECT  SUM(valor) FROM estornos WHERE os_id = o.id AND status > 2), 0) AS valor_estorno_os FROM os AS o INNER JOIN concessionarias AS c ON c.id = o.concessionaria_id INNER JOIN os_tipos AS ost ON ost.id = o.os_tipo_id INNER JOIN funcionarios AS v ON v.id = o.vendedor_id LEFT JOIN funcionarios AS fc ON fc.id = o.usuario_atendimento_cancelamento_id WHERE o.deleted_at IS NULL AND c.deleted_at IS NULL AND ost.deleted_at IS NULL AND v.deleted_at IS NULL AND fc.deleted_at IS NULL AND concessionaria_id != 0 AND fc.id != 0 AND cancelada = 1 AND o.os_tipo_id IN (1 , 2, 3, 4, 5) AND o.created_at BETWEEN '2023-09-01 00:00:00' AND '2023-10-01 00:00:00' ORDER BY o.created_at ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual o faturamento da concessionara osaka no mês de agosto de 2024, faturamento por serviço"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT servicos.nome AS nome, COUNT(servicos.id) AS quantidade, SUM(os_servicos.valor_venda_real) AS faturamento FROM os INNER JOIN os_servicos ON os_servicos.os_id = os.id INNER JOIN concessionarias ON os.concessionaria_id = concessionarias.id INNER JOIN servicos ON servicos.id = os_servicos.servico_id WHERE concessionarias.nome = 'osaka' AND os.cancelada = 0 AND os_servicos.cancelado = 0 AND os.os_tipo_id IN (1 , 2, 5) AND os.created_at BETWEEN '2024-08-01 00:08:00' AND '2024-08-30 22:01:04' AND os.deleted_at IS NULL GROUP BY servicos.nome```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Verifica se limite de faturamento foi atingido no mês de abril de 2024"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT  SUM(IF(nf.empresa_id = 1, nf.valor_bruto, 0)) AS total_fatur_carsoul, SUM(IF(nf.empresa_id = 3, nf.valor_bruto, 0)) AS total_fatur_gb, (SELECT  faturamento_maximo FROM empresas WHERE id = 1) AS fatur_maxi_carsoul, (SELECT  faturamento_maximo FROM empresas WHERE id = 3) AS fatur_maxi_gb, (SELECT  faturamento_maximo FROM empresas WHERE id = 1) - SUM(IF(nf.empresa_id = 1, nf.valor_bruto, 0)) <= '20000.00' AS fatur_carsoul_critico, (SELECT  faturamento_maximo FROM empresas WHERE id = 3) - SUM(IF(nf.empresa_id = 3, nf.valor_bruto, 0)) <= '20000.00' AS fatur_gb_critico FROM notas_fiscais AS nf WHERE nf.cancelada = 0 AND nf.status_nota != 5 AND nf.created_at BETWEEN '2024-04-01' AND '2024-04-30'```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio completo vendas de serviços por concessionaria de 01/01/2025 a 30/01/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT s.id AS id, s.nome AS nome, s.tags AS tags, s.subgrupo_servico_id AS subgrupo_servico_id, SUM(oss.valor_venda_real) AS valor, COUNT(DISTINCT IF(os.os_migracao_cortesia_id IS NULL, oss.id, NULL)) AS quantidade FROM servicos AS s INNER JOIN os_servicos AS oss ON oss.servico_id = s.id INNER JOIN os ON oss.os_id = os.id WHERE s.deleted_at IS NULL AND oss.deleted_at IS NULL AND os.deleted_at IS NULL AND os.cancelada = 0 AND oss.cancelado = 0 AND s.ativo = 1 AND oss.servico_id = 57 AND os.departamento_id IN (1 , 2, 3, 4, 6, 7, 8, 9) AND os.os_tipo_id IN (1 , 2, 3, 4, 5) AND DATE(os.created_at) BETWEEN '2025-01-01' AND '2025-01-30' GROUP BY s.id ORDER BY s.nome ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio somente vinculo vendas de serviços por concessionaria de 01/01/2025 a 30/01/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT s.id AS id, s.nome AS nome, s.tags AS tags, s.subgrupo_servico_id AS subgrupo_servico_id, SUM(oss.valor_venda_real) AS valor, COUNT(DISTINCT IF(os.os_migracao_cortesia_id IS NULL, oss.id, NULL)) AS quantidade FROM servicos AS s INNER JOIN os_servicos AS oss ON oss.servico_id = s.id INNER JOIN os ON oss.os_id = os.id INNER JOIN os AS osv ON osv.os_migracao_cortesia_id = os.id WHERE s.deleted_at IS NULL AND oss.deleted_at IS NULL AND os.deleted_at IS NULL AND os.cancelada = 0 AND oss.cancelado = 0 AND s.ativo = 1 AND oss.servico_id = 57 AND os.departamento_id IN (1 , 2, 3, 4, 6, 7, 8, 9) AND os.os_tipo_id IN (1 , 2, 3, 4, 5) AND DATE(os.created_at) BETWEEN '2025-01-01' AND '2025-01-30' GROUP BY s.id ORDER BY s.nome ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de vendas de serviços por concessionaria e departamento do mês 12/2024"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT conc.nome AS store, dept.nome AS department, CONCAT(serv.nome, ' ', IFNULL(ton.nome, '')) AS service_description, serv.nome AS service, COUNT(IF(oss.fechado, oss.id, NULL)) AS closed_quant, COUNT(IF(! oss.fechado, oss.id, NULL)) AS open_quant, COUNT(oss.id) AS total_quant, SUM(IF(oss.fechado, oss.valor_venda_real, 0)) AS closed_amount, SUM(IF(! oss.fechado, oss.valor_venda_real, 0)) AS open_amount, SUM(oss.valor_venda_real) AS total_amount FROM os INNER JOIN os_servicos AS oss ON oss.os_id = os.id INNER JOIN concessionarias AS conc ON os.concessionaria_id = conc.id INNER JOIN departamentos AS dept ON os.departamento_id = dept.id INNER JOIN servicos AS serv ON oss.servico_id = serv.id LEFT JOIN tonalidades AS ton ON oss.tonalidade_id = ton.id WHERE os.deleted_at IS NULL AND oss.deleted_at IS NULL AND os.cancelada = 0 AND oss.cancelado = 0 AND os.os_tipo_id IN (1 , 2, 3, 4, 5) AND YEAR(os.created_at) = 2024 AND MONTH(os.created_at) = 12 GROUP BY conc.id , dept.id , serv.id , ton.id ORDER BY conc.nome ASC , serv.nome ASC , ton.nome ASC , dept.nome ASC```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de comissões pendendes de pagamento de vendedores do mês 02/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT os.id, comissoes.comissionado_id, comissoes.comissao_estorno_id, COUNT(DISTINCT IF(! comissoes.estorno, comissoes.id, NULL)) AS quantidade_com, COUNT(DISTINCT IF(comissoes.estorno, comissoes.id, NULL)) AS quantidade_est, SUM(IF(comissoes.comissao_couro = 0 AND comissoes.estorno = 0, comissoes.valor_dentro, 0)) AS total_comissao_dentro, SUM(IF(comissoes.comissao_couro = 0 AND comissoes.estorno = 0, comissoes.valor_fora, 0)) AS total_comissao_fora, SUM(IF(comissoes.comissao_couro = 0 AND comissoes.estorno = 1, comissoes.valor_dentro, 0)) AS total_estorno_dentro, SUM(IF(comissoes.comissao_couro = 0 AND comissoes.estorno = 1, comissoes.valor_fora, 0)) AS total_estorno_fora, SUM(IF(comissoes.comissao_couro = 0, IF(! comissoes.estorno, comissoes.valor_dentro, comissoes.valor_dentro * - 1), 0)) AS total_dentro, SUM(IF(comissoes.comissao_couro = 0, IF(! comissoes.estorno, comissoes.valor_fora, comissoes.valor_fora * - 1), 0)) AS total_fora, IFNULL(SUM(IF(! comissoes.estorno, comissoes.valor_combo, comissoes.valor_combo * - 1)), 0) AS total_combos, SUM(IF(comissoes.comissao_couro = 1, IF(comissoes.estorno = 0, (comissoes.valor_dentro + comissoes.valor_fora), (comissoes.valor_dentro + comissoes.valor_fora) * - 1), 0)) AS total_couro, SUM(IF((MONTH(os.data_pagamento) = 2 AND YEAR(os.data_pagamento) = 2025), IF(! comissoes.estorno, os_servicos.valor_venda_real, os_servicos.valor_venda_real * - 1), 0)) AS total_vendas, SUM(IF((MONTH(os.data_pagamento) = 2 AND YEAR(os.data_pagamento) = 2025 AND comissoes.estorno), os_servicos.valor_venda_real, 0)) AS total_estorno FROM `comissoes` INNER JOIN `os_servicos` ON `os_servicos`.`id` = `comissoes`.`os_servico_id` INNER JOIN `os` ON `os_servicos`.`os_id` = `os`.`id` WHERE comissoes.deleted_at IS NULL AND os_servicos.deleted_at IS NULL AND os.deleted_at IS NULL AND ! comissoes.paga AND ! os.cancelada AND ! os_servicos.cancelado AND comissoes.ativo = 1 AND comissao_tipo_id = 2 AND MONTH(comissoes.created_at) = 2 AND YEAR(comissoes.created_at) = 2025 AND `comissoes`.`deleted_at` IS NULL GROUP BY `comissoes`.`comissionado_id````"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de comissões pendendes de pagamento de produtivos do mês 02/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```select comissoes.comissionado_id, comissoes.created_at, sum(if(comissoes.estorno=0, comissoes.valor_fora,0)) as total_comissao, sum(if(comissoes.estorno=1, comissoes.valor_fora*-1,0)) as total_estorno, sum(if(comissoes.estorno=0, comissoes.valor_fora , comissoes.valor_fora*-1)) as total from `comissoes` inner join `os_servicos` on `os_servicos`.`id` = `comissoes`.`os_servico_id` inner join `os` on `os_servicos`.`os_id` = `os`.`id` where comissoes.comissao_tipo_id = 3 AND comissoes.paga = 0 AND !os.cancelada AND !os_servicos.cancelado AND DATE(comissoes.created_at) BETWEEN '2025-02-01 00:00:00' and'2025-02-28 23:59:59' and `comissoes`.`deleted_at` is null group by `comissoes`.`comissionado_id````"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de comissões pendendes de pagamento de indicadores do mês 02/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```select con.id, con.nome, SUM(IF(com.comissao_tipo_id = 4 AND com.estorno=0, valor_fora,0)) AS total_comissao_ind1, SUM(IF(com.comissao_tipo_id = 4 AND com.estorno=1, valor_fora*-1,0)) AS total_estorno_ind1, SUM(IF(com.comissao_tipo_id = 4 AND com.estorno=0, valor_fora,0) + IF(com.comissao_tipo_id = 4 AND com.estorno=1, valor_fora*-1,0)) AS total_ind1, SUM(IF(com.comissao_tipo_id = 5 AND com.estorno=0, valor_fora,0)) AS total_comissao_ind2, SUM(IF(com.comissao_tipo_id = 5 AND com.estorno=1, valor_fora*-1,0)) AS total_estorno_ind2, SUM(IF(com.comissao_tipo_id = 5 AND com.estorno=0, valor_fora,0) + IF(com.comissao_tipo_id = 5 AND com.estorno=1, valor_fora*-1,0)) AS total_ind2, SUM(IF(com.estorno=0, valor_fora,0) + IF(com.estorno=1, valor_fora*-1,0)) AS total from `comissoes` as `com` inner join `os_servicos` as `oss` on `oss`.`id` = `com`.`os_servico_id` inner join `os` on `os`.`id` = `oss`.`os_id` inner join `concessionarias` as `con` on `con`.`id` = `os`.`concessionaria_id` where `com`.`comissao_tipo_id` in (?, ?) and com.paga = 0 AND oss.cancelado = 0 AND os.cancelada = 0 AND MONTH(com.created_at) = 2 AND YEAR(com.created_at) = 2025 group by `con`.`id````"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de comissões pendendes de pagamento de concessionarias do mês 02/2025"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```select comissoes.comissionado_id, comissoes.comissao_periodo_id as comissao_periodo, concessionarias.nome as concessionaria_nome, SUM(if(comissoes.estorno = 0, comissoes.valor_dentro, 0)) AS total_comissao, SUM(if(comissoes.estorno = 1, comissoes.valor_dentro, 0)) AS total_estorno, ( SELECT if(COUNT(id)>0,1,0) FROM concessionaria_boletos WHERE deleted_at IS NULL AND concessionaria_id = concessionarias.id AND DATE(created_at) BETWEEN '2025-02-01' AND '2025-02-28' ) AS boleto from `comissoes` inner join `os_servicos` on `os_servicos`.`id` = `comissoes`.`os_servico_id` inner join `os` on `os_servicos`.`os_id` = `os`.`id` inner join `concessionarias` on `concessionarias`.`id` = `comissoes`.`comissionado_id` where comissoes.deleted_at IS NULL AND comissoes.comissao_tipo_id = 1 AND !os.cancelada AND !os_servicos.cancelado AND comissoes.paga = 0 AND ( (concessionarias.comissao_periodo_id = 1 AND DATE(comissoes.created_at) BETWEEN '2025-02-01' AND '2025-02-28') OR (concessionarias.comissao_periodo_id != 1 AND DATE(comissoes.created_at) BETWEEN '2025-01-25' AND '2025-02-24') ) and `comissoes`.`deleted_at` is null group by `concessionarias`.`nome` order by `concessionarias`.`nome` asc```"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Quero relatorio de recebimentos por tipo do mês 08/2024"
            },
            {
                "role": "assistant",
                "content": "a consulta para obter esse dados é essa: sql```SELECT cx.created_at AS created_at, os.id AS os_id, os.os_concessionaria AS os_store, conc.nome AS store, IFNULL(clu.nome, '') AS cluster, vend.nome AS employee, cli.nome AS client, cxt.nome AS type, cxt.id AS type_id, SUM(cx.valor) AS value, GROUP_CONCAT(cx.codigo_transacao) AS codes, cx.tid_cielo AS tid, COUNT(cx.id) AS instalments, cx.codigo_transacao AS transaction_code, cx.nome_depositante AS depositor FROM `caixas` AS `cx` INNER JOIN `caixa_tipos` AS `cxt` ON `cx`.`caixa_tipo_id` = `cxt`.`id` INNER JOIN `os` ON `cx`.`os_id` = `os`.`id` INNER JOIN `funcionarios` AS `vend` ON `os`.`vendedor_id` = `vend`.`id` INNER JOIN `clientes` AS `cli` ON `os`.`cliente_id` = `cli`.`id` INNER JOIN `concessionarias` AS `conc` ON `os`.`concessionaria_id` = `conc`.`id` LEFT JOIN `clusters` AS `clu` ON `conc`.`cluster_id` = `clu`.`id` WHERE cx.deleted_at IS NULL AND cx.cancelado = 0 AND cx.ativo = 1 AND MONTH(`cx`.`created_at`) = '2' AND YEAR(`cx`.`created_at`) = 2024 GROUP BY `os`.`id` , `cxt`.`id` ORDER BY `cx`.`created_at````"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 1° até 10º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `acesso_regra_grupos` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `acesso_regra_id` bigint unsigned NOT NULL, `grupo_usuario_id` int unsigned NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `acesso_regra_grupos_acesso_regra_id_foreign` (`acesso_regra_id`), KEY `acesso_regra_grupos_grupo_usuario_id_foreign` (`grupo_usuario_id`), CONSTRAINT `acesso_regra_grupos_acesso_regra_id_foreign` FOREIGN KEY (`acesso_regra_id`) REFERENCES `acesso_regras` (`id`), CONSTRAINT `acesso_regra_grupos_grupo_usuario_id_foreign` FOREIGN KEY (`grupo_usuario_id`) REFERENCES `grupos_usuarios` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `acesso_regras` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `seg_inicio` time DEFAULT NULL, `seg_fim` time DEFAULT NULL, `ter_inicio` time DEFAULT NULL, `ter_fim` time DEFAULT NULL, `qua_inicio` time DEFAULT NULL, `qua_fim` time DEFAULT NULL, `qui_inicio` time DEFAULT NULL, `qui_fim` time DEFAULT NULL, `sex_inicio` time DEFAULT NULL, `sex_fim` time DEFAULT NULL, `sab_inicio` time DEFAULT NULL, `sab_fim` time DEFAULT NULL, `dom_inicio` time DEFAULT NULL, `dom_fim` time DEFAULT NULL, `funcionario_registro_id` int unsigned NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `acesso_regras_funcionario_registro_id_foreign` (`funcionario_registro_id`), CONSTRAINT `acesso_regras_funcionario_registro_id_foreign` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; CREATE TABLE `avaliacao_qualidade_questao_subgrupos` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `avaliacao_qualidade_questao_id` bigint unsigned NOT NULL, `subgrupo_servico_id` int unsigned NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `aqqsaqi` (`avaliacao_qualidade_questao_id`), KEY `aqqsssi` (`subgrupo_servico_id`), CONSTRAINT `aqqsaqi` FOREIGN KEY (`avaliacao_qualidade_questao_id`) REFERENCES `avaliacao_qualidade_questoes` (`id`), CONSTRAINT `aqqsssi` FOREIGN KEY (`subgrupo_servico_id`) REFERENCES `subgrupos_servicos` (`id`)  ); CREATE TABLE `avaliacao_qualidade_questoes` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `descricao` varchar(255)  NOT NULL, `resposta_positiva` enum('SIM','NÃO')  NOT NULL, `ordem` int unsigned NOT NULL, `por_subgrupo_servico` tinyint(1) NOT NULL DEFAULT '0', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ); CREATE TABLE `avaliacao_qualidade_respostas` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `resposta` enum('SIM','NÃO','NÃO SE APLICA')  NOT NULL, `observacao` varchar(255)  DEFAULT NULL, `avaliacao_qualidade_id` bigint unsigned NOT NULL, `avaliacao_qualidade_questao_id` bigint unsigned NOT NULL, `avaliacao_qualidade_servico_id` bigint unsigned DEFAULT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `aqraqi` (`avaliacao_qualidade_id`), KEY `aqraqqi` (`avaliacao_qualidade_questao_id`), KEY `aqraqsi` (`avaliacao_qualidade_servico_id`), CONSTRAINT `aqraqi` FOREIGN KEY (`avaliacao_qualidade_id`) REFERENCES `avaliacoes_qualidade` (`id`), CONSTRAINT `aqraqqi` FOREIGN KEY (`avaliacao_qualidade_questao_id`) REFERENCES `avaliacao_qualidade_questoes` (`id`), CONSTRAINT `aqraqsi` FOREIGN KEY (`avaliacao_qualidade_servico_id`) REFERENCES `avaliacao_qualidade_servicos` (`id`)  ); CREATE TABLE `avaliacao_qualidade_servicos` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `data_inicio` datetime NOT NULL, `data_fim` datetime NOT NULL, `observacao` text DEFAULT NULL, `produtivo_id` int unsigned NOT NULL, `os_servico_id` int unsigned NOT NULL, `avaliacao_qualidade_id` bigint unsigned NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `avaliacao_qualidade_servicos_produtivo_id_foreign` (`produtivo_id`), KEY `avaliacao_qualidade_servicos_os_servico_id_foreign` (`os_servico_id`), KEY `aqsaqi` (`avaliacao_qualidade_id`), CONSTRAINT `aqsaqi` FOREIGN KEY (`avaliacao_qualidade_id`) REFERENCES `avaliacoes_qualidade` (`id`), CONSTRAINT `avaliacao_qualidade_servicos_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`), CONSTRAINT `avaliacao_qualidade_servicos_produtivo_id_foreign` FOREIGN KEY (`produtivo_id`) REFERENCES `funcionarios` (`id`)  ); CREATE TABLE `avaliacoes_qualidade` ( `id` bigint unsigned NOT NULL AUTO_INCREMENT, `data_entrega_agendamento` datetime NOT NULL, `data_entrega_concessionaria` datetime NOT NULL, `data_entrega_real` datetime NOT NULL, `observacao` text DEFAULT NULL, `os_id` int unsigned NOT NULL, `concessionaria_id` int unsigned NOT NULL, `vendedor_id` int unsigned NOT NULL, `departamento_id` int unsigned NOT NULL, `carro_modelo_id` int unsigned NOT NULL, `carro_cor_id` int unsigned NOT NULL, `funcionario_cadastro_id` int unsigned NOT NULL, `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`), KEY `avaliacoes_qualidade_os_id_foreign` (`os_id`), KEY `avaliacoes_qualidade_concessionaria_id_foreign` (`concessionaria_id`), KEY `avaliacoes_qualidade_vendedor_id_foreign` (`vendedor_id`), KEY `avaliacoes_qualidade_departamento_id_foreign` (`departamento_id`), KEY `avaliacoes_qualidade_carro_modelo_id_foreign` (`carro_modelo_id`), KEY `avaliacoes_qualidade_carro_cor_id_foreign` (`carro_cor_id`), KEY `avaliacoes_qualidade_funcionario_cadastro_id_foreign` (`funcionario_cadastro_id`), CONSTRAINT `avaliacoes_qualidade_carro_cor_id_foreign` FOREIGN KEY (`carro_cor_id`) REFERENCES `carro_cores` (`id`), CONSTRAINT `avaliacoes_qualidade_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`), CONSTRAINT `avaliacoes_qualidade_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`), CONSTRAINT `avaliacoes_qualidade_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`), CONSTRAINT `avaliacoes_qualidade_funcionario_cadastro_id_foreign` FOREIGN KEY (`funcionario_cadastro_id`) REFERENCES `funcionarios` (`id`), CONSTRAINT `avaliacoes_qualidade_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`), CONSTRAINT `avaliacoes_qualidade_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`)  ); CREATE TABLE `banco_conta_tipos` ( `id` int unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(50)  NOT NULL, `ativo` tinyint(1) NOT NULL DEFAULT '1', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) ); CREATE TABLE `bancos` ( `id` int unsigned NOT NULL AUTO_INCREMENT, `nome` varchar(150)  NOT NULL, `ativo` tinyint(1) NOT NULL DEFAULT '1', `created_at` timestamp NULL DEFAULT NULL, `updated_at` timestamp NULL DEFAULT NULL, `deleted_at` timestamp NULL DEFAULT NULL, PRIMARY KEY (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 10° até 20º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `base_concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`produtivo_base_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `base_concessionarias_concessionaria_id_foreign` (`concessionaria_id`),KEY `base_concessionarias_produtivo_base_id_foreign` (`produtivo_base_id`),KEY `base_concessionarias_ativo` (`ativo`),KEY `base_concessionarias_deleted_at` (`deleted_at`),CONSTRAINT `base_concessionarias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `base_concessionarias_produtivo_base_id_foreign` FOREIGN KEY (`produtivo_base_id`) REFERENCES `produtivo_bases` (`id`));CREATE TABLE `base_produtivos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`funcionario_id` int unsigned NOT NULL,`produtivo_base_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `base_produtivos_funcionario_id_foreign` (`funcionario_id`),KEY `base_produtivos_produtivo_base_id_foreign` (`produtivo_base_id`),CONSTRAINT `base_produtivos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `base_produtivos_produtivo_base_id_foreign` FOREIGN KEY (`produtivo_base_id`) REFERENCES `produtivo_bases` (`id`));CREATE TABLE `boleto_remessas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `business_units` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`sigla` varchar(3)  DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `caixa_concessionaria_documentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`documento_assinado_id` bigint unsigned NOT NULL,`caixa_fechamento_id` int unsigned NOT NULL,`concessionaria_email_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ccdocass` (`documento_assinado_id`),KEY `ccdcaifec` (`caixa_fechamento_id`),KEY `ccdconem` (`concessionaria_email_id`),CONSTRAINT `ccdcaifec` FOREIGN KEY (`caixa_fechamento_id`) REFERENCES `caixa_fechamentos` (`id`),CONSTRAINT `ccdconem` FOREIGN KEY (`concessionaria_email_id`) REFERENCES `concessionaria_emails` (`id`),CONSTRAINT `ccdocass` FOREIGN KEY (`documento_assinado_id`) REFERENCES `documento_assinados` (`id`));CREATE TABLE `caixa_contas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`numero` varchar(30)  DEFAULT NULL,`agencia` varchar(30)  DEFAULT NULL,`nome` varchar(30)  NOT NULL,`empresa_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `conta_empresa_id` (`empresa_id`),CONSTRAINT `conta_empresa_id` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`));CREATE TABLE `caixa_fechamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`controle_concessionaria` varchar(30)  NOT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`valor` decimal(8,2) NOT NULL DEFAULT '0.00',`caixa_concessionaria` tinyint(1) NOT NULL DEFAULT '0',`concessionaria_id` int unsigned NOT NULL,`vendedor_id` int unsigned NOT NULL,`malote_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `caixa_fechamentos_concessionaria_id_foreign` (`concessionaria_id`),KEY `caixa_fechamentos_vendedor_id_foreign` (`vendedor_id`),KEY `caixa_fechamentos_malote_id_foreign` (`malote_id`),CONSTRAINT `caixa_fechamentos_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `caixa_fechamentos_malote_id_foreign` FOREIGN KEY (`malote_id`) REFERENCES `malotes` (`id`),CONSTRAINT `caixa_fechamentos_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `caixa_status` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `caixa_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 20° até 30º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `caixas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) NOT NULL DEFAULT '0.00',`data_vencimento` date NOT NULL,`data_pagamento` datetime NOT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`fechado` tinyint(1) NOT NULL DEFAULT '0',`data_fechamento` datetime DEFAULT NULL,`classificado` tinyint(1) NOT NULL DEFAULT '0',`data_classificacao` datetime DEFAULT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`verificado` tinyint(1) NOT NULL DEFAULT '0',`data_verificacao` datetime DEFAULT NULL,`data_finalizacao` datetime DEFAULT NULL,`parcela` int unsigned NOT NULL DEFAULT '1',`quant_parcelas` int unsigned NOT NULL DEFAULT '1',`nome_depositante` varchar(40)  DEFAULT NULL,`codigo_transacao` varchar(30)  DEFAULT NULL,`nome_titular` varchar(40)  DEFAULT NULL,`doc_titular` varchar(14)  DEFAULT NULL,`telefone_titular` varchar(15)  DEFAULT NULL,`tid_cielo` varchar(36)  DEFAULT NULL,`bandeira_cartao` varchar(30)  NOT NULL DEFAULT '99',`codigo_autorizacao` varchar(36)  DEFAULT NULL,`numero_autorizacao` varchar(36)  DEFAULT NULL,`nome_cartao` varchar(36)  DEFAULT NULL,`cc_conciliado` int NOT NULL DEFAULT '0',`pix_payload` varchar(255)  DEFAULT NULL,`pix_info_pagador` varchar(255)  DEFAULT NULL,`pix_e2ed_id` varchar(255)  DEFAULT NULL,`pix_rtr_id` varchar(255)  DEFAULT NULL,`observacao_financeiro` text DEFAULT NULL,`caixa_preto` tinyint(1) NOT NULL DEFAULT '0',`usuario_pagamento_id` int unsigned DEFAULT NULL,`usuario_verificacao_id` int unsigned DEFAULT NULL,`caixa_conta_id` int unsigned DEFAULT NULL,`caixa_tipo_id` int unsigned NOT NULL,`caixa_pendente_id` bigint unsigned DEFAULT NULL,`caixa_status_id` int unsigned NOT NULL,`caixa_fechamento_id` int unsigned DEFAULT NULL,`caixa_original_id` int unsigned DEFAULT NULL,`empresa_faturamento_id` int unsigned DEFAULT NULL,`financeiro_malote_classificacao_id` int unsigned DEFAULT NULL,`financeiro_caixa_destino_id` int unsigned DEFAULT NULL,`os_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE KEY `pix_e2ed_id_UNIQUE` (`pix_e2ed_id`),KEY `caixas_usuario_pagamento_id_foreign` (`usuario_pagamento_id`),KEY `caixas_caixa_conta_id_foreign` (`caixa_conta_id`),KEY `caixas_caixa_tipo_id_foreign` (`caixa_tipo_id`),KEY `caixas_caixa_status_id_foreign` (`caixa_status_id`),KEY `caixas_os_id_foreign` (`os_id`),KEY `caixas_caixa_fechamento_id_foreign` (`caixa_fechamento_id`),KEY `caixas_financeiro_caixa_destino_id_foreign` (`financeiro_caixa_destino_id`),KEY `caixas_usuario_verificacao_id_foreign` (`usuario_verificacao_id`),KEY `caixas_financeiro_malote_classificacao_id_foreign` (`financeiro_malote_classificacao_id`),KEY `caixas_caixa_original_id_foreign` (`caixa_original_id`),KEY `caixas_empresa_faturamento_id_foreign` (`empresa_faturamento_id`),KEY `caixas_caixa_pendente_id_foreign` (`caixa_pendente_id`),KEY `caixas_tid_cielo_index` (`tid_cielo`),CONSTRAINT `caixas_caixa_conta_id_foreign` FOREIGN KEY (`caixa_conta_id`) REFERENCES `caixa_contas` (`id`),CONSTRAINT `caixas_caixa_fechamento_id_foreign` FOREIGN KEY (`caixa_fechamento_id`) REFERENCES `caixa_fechamentos` (`id`),CONSTRAINT `caixas_caixa_original_id_foreign` FOREIGN KEY (`caixa_original_id`) REFERENCES `caixas` (`id`),CONSTRAINT `caixas_caixa_pendente_id_foreign` FOREIGN KEY (`caixa_pendente_id`) REFERENCES `caixas_pendentes` (`id`),CONSTRAINT `caixas_caixa_status_id_foreign` FOREIGN KEY (`caixa_status_id`) REFERENCES `caixa_status` (`id`),CONSTRAINT `caixas_caixa_tipo_id_foreign` FOREIGN KEY (`caixa_tipo_id`) REFERENCES `caixa_tipos` (`id`),CONSTRAINT `caixas_empresa_faturamento_id_foreign` FOREIGN KEY (`empresa_faturamento_id`) REFERENCES `empresas` (`id`),CONSTRAINT `caixas_financeiro_caixa_destino_id_foreign` FOREIGN KEY (`financeiro_caixa_destino_id`) REFERENCES `financeiro_caixas_destino` (`id`),CONSTRAINT `caixas_financeiro_malote_classificacao_id_foreign` FOREIGN KEY (`financeiro_malote_classificacao_id`) REFERENCES `financeiro_malotes_classificacao` (`id`),CONSTRAINT `caixas_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `caixas_usuario_pagamento_id_foreign` FOREIGN KEY (`usuario_pagamento_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `caixas_usuario_verificacao_id_foreign` FOREIGN KEY (`usuario_verificacao_id`) REFERENCES `usuarios` (`id`));CREATE TABLE `caixas_pendentes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) unsigned NOT NULL,`codigo_transacao` varchar(30)  DEFAULT NULL,`expiracao` int unsigned DEFAULT '604800',`pix_tx_id` varchar(36)  DEFAULT NULL,`pix_payload` varchar(255)  DEFAULT NULL,`pix_tentativas` int unsigned NOT NULL DEFAULT '1',`pix_br_code` text DEFAULT NULL,`pix_info_pagador` varchar(255)  DEFAULT NULL,`pix_e2ed_id` varchar(255)  DEFAULT NULL,`pix_rtr_id` varchar(255)  DEFAULT NULL,`data_criacao_cobranca` datetime DEFAULT NULL,`data_expiracao_cobranca` datetime DEFAULT NULL,`fechado` tinyint(1) NOT NULL DEFAULT '0',`data_fechamento` datetime DEFAULT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`caixa_tipo_id` int unsigned NOT NULL,`caixa_status_id` int unsigned DEFAULT NULL,`caixa_fechamento_id` int unsigned DEFAULT NULL,`os_id` int unsigned NOT NULL,`empresa_id` int unsigned DEFAULT NULL,`remessa_os_id` int unsigned DEFAULT NULL,`tipo_remessa_id` int unsigned DEFAULT NULL,`usuario_pagamento_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `caixas_pendentes_caixa_tipo_id_foreign` (`caixa_tipo_id`),KEY `caixas_pendentes_os_id_foreign` (`os_id`),KEY `caixas_pendentes_empresa_id_foreign` (`empresa_id`),KEY `caixas_pendentes_remessa_os_id_foreign` (`remessa_os_id`),KEY `cptri` (`tipo_remessa_id`),KEY `caixas_pendentes_caixa_status_id_foreign` (`caixa_status_id`),KEY `caixas_pendentes_usuario_pagamento_id_foreign` (`usuario_pagamento_id`),KEY `caixas_pendentes_caixa_fechamento_id_foreign` (`caixa_fechamento_id`),CONSTRAINT `caixas_pendentes_caixa_fechamento_id_foreign` FOREIGN KEY (`caixa_fechamento_id`) REFERENCES `caixa_fechamentos` (`id`),CONSTRAINT `caixas_pendentes_caixa_status_id_foreign` FOREIGN KEY (`caixa_status_id`) REFERENCES `caixa_status` (`id`),CONSTRAINT `caixas_pendentes_caixa_tipo_id_foreign` FOREIGN KEY (`caixa_tipo_id`) REFERENCES `caixa_tipos` (`id`),CONSTRAINT `caixas_pendentes_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `caixas_pendentes_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `caixas_pendentes_remessa_os_id_foreign` FOREIGN KEY (`remessa_os_id`) REFERENCES `remessa_os` (`id`),CONSTRAINT `caixas_pendentes_usuario_pagamento_id_foreign` FOREIGN KEY (`usuario_pagamento_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `cptri` FOREIGN KEY (`tipo_remessa_id`) REFERENCES `tipo_remessas` (`id`));CREATE TABLE `cancelamento_motivos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(250)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `cargo_epi` (`id` int unsigned NOT NULL AUTO_INCREMENT,`cargo_id` int unsigned NOT NULL,`epi_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cargo_epi_cargo_id_foreign` (`cargo_id`),KEY `cargo_epi_epi_id_foreign` (`epi_id`),CONSTRAINT `cargo_epi_cargo_id_foreign` FOREIGN KEY (`cargo_id`) REFERENCES `cargos` (`id`),CONSTRAINT `cargo_epi_epi_id_foreign` FOREIGN KEY (`epi_id`) REFERENCES `epi` (`id`) );CREATE TABLE `cargos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`cbo` int unsigned DEFAULT NULL,`nome` varchar(100)  NOT NULL,`descricao` text DEFAULT NULL,`salario_base` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`ativo` tinyint(1) NOT NULL DEFAULT '1',`funcionario_tipo_id` int unsigned NOT NULL DEFAULT '3',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cargos_funcionario_tipo_id_foreign` (`funcionario_tipo_id`),CONSTRAINT `cargos_funcionario_tipo_id_foreign` FOREIGN KEY (`funcionario_tipo_id`) REFERENCES `funcionario_tipos` (`id`));CREATE TABLE `carro_cor_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `carro_cores` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`carro_cor_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `carro_cores_carro_cor_tipo_id_foreign` (`carro_cor_tipo_id`),CONSTRAINT `carro_cores_carro_cor_tipo_id_foreign` FOREIGN KEY (`carro_cor_tipo_id`) REFERENCES `carro_cor_tipos` (`id`));CREATE TABLE `carro_marcas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `carro_marcas_deleted_at` (`deleted_at`));CREATE TABLE `carro_modelo_comissao_portes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`carro_modelo_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`carro_porte_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cmcpcmi` (`carro_modelo_id`),KEY `cmcpsi` (`servico_id`),KEY `cmcpcpi` (`carro_porte_id`),KEY `deleted_at` (`deleted_at`),KEY `cmcpcms` (`carro_modelo_id`,`servico_id`,`deleted_at`),CONSTRAINT `cmcpcmi` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `cmcpcpi` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),CONSTRAINT `cmcpsi` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 30° até 40º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `carro_modelo_servico_portes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`carro_modelo_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`carro_porte_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `carroModId` (`carro_modelo_id`),KEY `carModServId` (`servico_id`),KEY `carModporteId` (`carro_porte_id`),CONSTRAINT `carModporteId` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),CONSTRAINT `carModServId` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),CONSTRAINT `carroModId` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`));CREATE TABLE `carro_modelos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`carro_marca_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `carro_modelos_carro_marca_id_foreign` (`carro_marca_id`),KEY `carro_modelos_deleted_at` (`deleted_at`),CONSTRAINT `carro_modelos_carro_marca_id_foreign` FOREIGN KEY (`carro_marca_id`) REFERENCES `carro_marcas` (`id`));CREATE TABLE `carro_portes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `carro_submodelos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `cielo_respostas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`estorno` tinyint(1) NOT NULL DEFAULT '0',`return_code` varchar(255)  NOT NULL,`return_message` varchar(255)  NOT NULL,`payment_id` varchar(255)  DEFAULT NULL,`tid` varchar(255)  DEFAULT NULL,`response_path` varchar(255)  DEFAULT NULL,`os_id` int unsigned NOT NULL,`funcionario_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cielo_respostas_os_id_foreign` (`os_id`),KEY `cielo_respostas_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `cielo_respostas_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `cielo_respostas_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `cliente_carros` (`id` int unsigned NOT NULL AUTO_INCREMENT,`chassi` varchar(9)  DEFAULT NULL,`placa` varchar(7)  DEFAULT NULL,`ano_modelo` varchar(255)  DEFAULT NULL,`ano` int DEFAULT NULL,`cadastro_parcial` tinyint(1) NOT NULL DEFAULT '0',`cliente_id` int unsigned NOT NULL,`carro_cor_id` int unsigned NOT NULL,`carro_modelo_id` int unsigned NOT NULL,`carro_submodelo_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cliente_carros_cliente_id_foreign` (`cliente_id`),KEY `cliente_carros_carro_cor_id_foreign` (`carro_cor_id`),KEY `cliente_carros_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `cliente_carros_carro_submodelo_id_foreign` (`carro_submodelo_id`),KEY `cliente_carros_cadastro_parcial` (`cadastro_parcial`),KEY `cliente_carros_deleted_at` (`deleted_at`),CONSTRAINT `cliente_carros_carro_cor_id_foreign` FOREIGN KEY (`carro_cor_id`) REFERENCES `carro_cores` (`id`),CONSTRAINT `cliente_carros_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `cliente_carros_carro_submodelo_id_foreign` FOREIGN KEY (`carro_submodelo_id`) REFERENCES `carro_submodelos` (`id`),CONSTRAINT `cliente_carros_cliente_id_foreign` FOREIGN KEY (`cliente_id`) REFERENCES `clientes` (`id`));CREATE TABLE `clientes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`pf` tinyint(1) NOT NULL DEFAULT '1',`nome` varchar(100)  NOT NULL,`cpf` varchar(14)  NOT NULL,`sexo` int DEFAULT NULL,`data_nascimento` date DEFAULT NULL,`estado_civil` int DEFAULT NULL,`ie` varchar(14)  DEFAULT NULL,`ie_verificada` tinyint(1) NOT NULL DEFAULT '0',`im` varchar(14)  DEFAULT NULL,`retem_iss` tinyint(1) NOT NULL DEFAULT '0',`cep` varchar(8)  DEFAULT NULL,`logradouro` varchar(80)  DEFAULT NULL,`bairro` varchar(80)  DEFAULT NULL,`localidade` varchar(80)  DEFAULT NULL,`uf` char(2)  DEFAULT NULL,`numero` int DEFAULT NULL,`complemento` varchar(150)  DEFAULT NULL,`telefone1` varchar(15)  DEFAULT NULL,`telefone2` varchar(15)  DEFAULT NULL,`email` varchar(50)  DEFAULT NULL,`bloqueado_serasa` tinyint(1) NOT NULL DEFAULT '0',`observacao_serasa` varchar(30)  DEFAULT NULL,`crmbonus_customer_id` int unsigned DEFAULT NULL,`crmbonus_pin_code` varchar(4)  DEFAULT NULL,`crmbonus_validado` tinyint(1) NOT NULL DEFAULT '0',`crmbonus_data_cadastro` datetime DEFAULT NULL,`crmbonus_verificado` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `clientes_deleted_at` (`deleted_at`));CREATE TABLE `clusters` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`valor` decimal(15,2) NOT NULL,`rmf` double(10,2) NOT NULL,`pmr` double(10,2) NOT NULL,`valor_tipo` tinyint(1) NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `combo_concessionarias` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`combo_id` int unsigned DEFAULT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `combo_concessionaria_combo_id` (`combo_id`),KEY `combo_concessionaria_concessionaria_id` (`concessionaria_id`),CONSTRAINT `combo_concessionaria_combo_id` FOREIGN KEY (`combo_id`) REFERENCES `combos` (`id`),CONSTRAINT `combo_concessionaria_concessionaria_id` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`));CREATE TABLE `combo_servico_substitutos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`combo_servico_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `combo_servico_substitutos_combo_servico_id_foreign` (`combo_servico_id`),KEY `combo_servico_substitutos_servico_id_foreign` (`servico_id`),CONSTRAINT `combo_servico_substitutos_combo_servico_id_foreign` FOREIGN KEY (`combo_servico_id`) REFERENCES `combo_servicos` (`id`),CONSTRAINT `combo_servico_substitutos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `combo_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_venda` decimal(7,2) unsigned NOT NULL DEFAULT '0.00',`valor_nfe` decimal(7,2) unsigned NOT NULL DEFAULT '0.00',`combo_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`carro_porte_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `combo_servicos_combo_id_foreign` (`combo_id`),KEY `combo_servicos_servico_id_foreign` (`servico_id`),KEY `combo_servicos_carro_porte_id_foreign` (`carro_porte_id`),CONSTRAINT `combo_servicos_carro_porte_id_foreign` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),CONSTRAINT `combo_servicos_combo_id_foreign` FOREIGN KEY (`combo_id`) REFERENCES `combos` (`id`),CONSTRAINT `combo_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `combos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`adicional_dentro` decimal(7,3) DEFAULT NULL,`adicional_fora` decimal(7,3) DEFAULT NULL,`porcentagem` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`data_inicial` datetime DEFAULT NULL,`data_final` datetime DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `comissao_pagamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`funcionario_id` int unsigned NOT NULL,`comissao_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cpfuncId` (`funcionario_id`),KEY `cpcti` (`comissao_tipo_id`),CONSTRAINT `cpcti` FOREIGN KEY (`comissao_tipo_id`) REFERENCES `comissao_tipos` (`id`),CONSTRAINT `cpfuncId` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 40° até 50º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `comissao_periodos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`inicio` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `comissao_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `comissoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_dentro` decimal(8,2) NOT NULL,`valor_fora` decimal(8,2) NOT NULL,`valor_combo` decimal(8,2) unsigned DEFAULT NULL,`comissao_couro` tinyint(1) NOT NULL DEFAULT '0',`paga` tinyint(1) NOT NULL DEFAULT '0',`data_pagamento` date DEFAULT NULL,`estorno` tinyint(1) NOT NULL DEFAULT '0',`observacao_estorno` text DEFAULT NULL,`comissionado_id` int NOT NULL,`os_servico_id` int unsigned NOT NULL,`comissao_tipo_id` int unsigned NOT NULL,`comissao_pagamento_id` int unsigned DEFAULT NULL,`comissao_periodo_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`comissao_estorno_id` int unsigned DEFAULT NULL,PRIMARY KEY (`id`),KEY `comissoes_os_servico_id_foreign` (`os_servico_id`),KEY `comissoes_comissao_tipo_id_foreign` (`comissao_tipo_id`),KEY `comissoes_comissao_pagamento_id_foreign` (`comissao_pagamento_id`),KEY `comissoes_comissao_periodo_id_foreign` (`comissao_periodo_id`),KEY `comissoes_comissao_estorno_id_foreign` (`comissao_estorno_id`),KEY `comissoes_created_at_index` (`created_at`),CONSTRAINT `comissoes_comissao_estorno_id_foreign` FOREIGN KEY (`comissao_estorno_id`) REFERENCES `comissoes` (`id`),CONSTRAINT `comissoes_comissao_pagamento_id_foreign` FOREIGN KEY (`comissao_pagamento_id`) REFERENCES `comissao_pagamentos` (`id`),CONSTRAINT `comissoes_comissao_periodo_id_foreign` FOREIGN KEY (`comissao_periodo_id`) REFERENCES `comissao_periodos` (`id`),CONSTRAINT `comissoes_comissao_tipo_id_foreign` FOREIGN KEY (`comissao_tipo_id`) REFERENCES `comissao_tipos` (`id`),CONSTRAINT `comissoes_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`));CREATE TABLE `comunicado_grupos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`notificar_usuarios` tinyint(1) NOT NULL DEFAULT '1',`comunicado_id` int unsigned NOT NULL,`grupo_usuario_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `comunicado_grupos_comunicado_id_foreign` (`comunicado_id`),KEY `comunicado_grupos_grupo_usuario_id_foreign` (`grupo_usuario_id`),CONSTRAINT `comunicado_grupos_comunicado_id_foreign` FOREIGN KEY (`comunicado_id`) REFERENCES `comunicados` (`id`),CONSTRAINT `comunicado_grupos_grupo_usuario_id_foreign` FOREIGN KEY (`grupo_usuario_id`) REFERENCES `grupos_usuarios` (`id`) );CREATE TABLE `comunicado_imagens` (`id` int unsigned NOT NULL AUTO_INCREMENT,`ordem` int unsigned NOT NULL,`titulo` varchar(255)  DEFAULT NULL,`descricao` text DEFAULT NULL,`url_imagem` varchar(255)  NOT NULL,`comunicado_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `comunicado_imagens_comunicado_id_foreign` (`comunicado_id`),CONSTRAINT `comunicado_imagens_comunicado_id_foreign` FOREIGN KEY (`comunicado_id`) REFERENCES `comunicados` (`id`) );CREATE TABLE `comunicado_notificacoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`visualizado` tinyint(1) NOT NULL DEFAULT '0',`comunicado_id` int unsigned NOT NULL,`usuario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `comunicado_notificacoes_comunicado_id_foreign` (`comunicado_id`),KEY `comunicado_notificacoes_usuario_id_foreign` (`usuario_id`),CONSTRAINT `comunicado_notificacoes_comunicado_id_foreign` FOREIGN KEY (`comunicado_id`) REFERENCES `comunicados` (`id`),CONSTRAINT `comunicado_notificacoes_usuario_id_foreign` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`) );CREATE TABLE `comunicado_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `comunicados` (`id` int unsigned NOT NULL AUTO_INCREMENT,`titulo` varchar(255)  NOT NULL,`tamanho_janela` varchar(255)  NOT NULL,`descricao` text DEFAULT NULL,`url_video` varchar(255)  DEFAULT NULL,`comunicado_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `comunicados_comunicado_tipo_id_foreign` (`comunicado_tipo_id`),CONSTRAINT `comunicados_comunicado_tipo_id_foreign` FOREIGN KEY (`comunicado_tipo_id`) REFERENCES `comunicado_tipos` (`id`) );CREATE TABLE `concessionaria_boletos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_boletos_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `concessionaria_boletos_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`) );CREATE TABLE `concessionaria_caixa_tipos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`caixa_tipo_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_caixa_tipos_concessionaria_id_foreign` (`concessionaria_id`),KEY `concessionaria_caixa_tipos_caixa_tipo_id_foreign` (`caixa_tipo_id`),CONSTRAINT `concessionaria_caixa_tipos_caixa_tipo_id_foreign` FOREIGN KEY (`caixa_tipo_id`) REFERENCES `caixa_tipos` (`id`),CONSTRAINT `concessionaria_caixa_tipos_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`) );CREATE TABLE `concessionaria_cluster` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`cluster_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cc_concessionaria_id` (`concessionaria_id`),KEY `cc_cluster_id` (`cluster_id`),CONSTRAINT `cc_cluster_id` FOREIGN KEY (`cluster_id`) REFERENCES `clusters` (`id`),CONSTRAINT `cc_concessionaria_id` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`) );CREATE TABLE `concessionaria_email_categoria_departamentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_email_categoria_id` bigint unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cecdceci` (`concessionaria_email_categoria_id`),KEY `cecddi` (`departamento_id`),CONSTRAINT `cecdceci` FOREIGN KEY (`concessionaria_email_categoria_id`) REFERENCES `concessionaria_email_categorias` (`id`),CONSTRAINT `cecddi` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 50° até 60º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `concessionaria_email_categorias` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_email_id` int unsigned NOT NULL,`email_categoria_id` bigint unsigned NOT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_email_categorias_concessionaria_email_id_foreign` (`concessionaria_email_id`),KEY `concessionaria_email_categorias_email_categoria_id_foreign` (`email_categoria_id`),KEY `concessionaria_email_categorias_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `concessionaria_email_categorias_concessionaria_email_id_foreign` FOREIGN KEY (`concessionaria_email_id`) REFERENCES `concessionaria_emails` (`id`),CONSTRAINT `concessionaria_email_categorias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `concessionaria_email_categorias_email_categoria_id_foreign` FOREIGN KEY (`email_categoria_id`) REFERENCES `email_categorias` (`id`) );CREATE TABLE `concessionaria_email_departamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_email_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cedcei` (`concessionaria_email_id`),KEY `ceddi` (`departamento_id`),CONSTRAINT `cedcei` FOREIGN KEY (`concessionaria_email_id`) REFERENCES `concessionaria_emails` (`id`),CONSTRAINT `ceddi` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`) );CREATE TABLE `concessionaria_emails` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`email` varchar(255)  NOT NULL,`observacao` text DEFAULT NULL,`grupo` int NOT NULL,`concessionaria_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`telefone` varchar(100)  DEFAULT NULL,`cargo` varchar(100)  DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_emails_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `concessionaria_emails_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`) );CREATE TABLE `concessionaria_indicador_confirmacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`funcionario_cadastro_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cicci` (`concessionaria_id`),KEY `cicfi` (`funcionario_cadastro_id`),CONSTRAINT `cicci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `cicfi` FOREIGN KEY (`funcionario_cadastro_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `concessionaria_limites_caixas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`limite_aberto` decimal(8,2) NOT NULL,`limite_fechado` decimal(8,2) NOT NULL,`concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_limites_caixas_concessionaria_id_foreign` (`concessionaria_id`),KEY `concessionaria_limites_caixas_departamento_id_foreign` (`departamento_id`),CONSTRAINT `concessionaria_limites_caixas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `concessionaria_limites_caixas_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`));CREATE TABLE `concessionaria_produtivos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`produtivo_tipo_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_produtivos_concessionaria_id_foreign` (`concessionaria_id`),KEY `concessionaria_produtivos_produtivo_tipo_id_foreign` (`produtivo_tipo_id`),KEY `concessionaria_produtivos_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `concessionaria_produtivos_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `concessionaria_produtivos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `concessionaria_produtivos_produtivo_tipo_id_foreign` FOREIGN KEY (`produtivo_tipo_id`) REFERENCES `produtivo_tipos` (`id`));CREATE TABLE `concessionaria_tabelas_comissoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`tabela_comissao_tipo_id` int unsigned NOT NULL,`tabela_comissao_id` int unsigned NOT NULL,`departamento_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionaria_id` (`concessionaria_id`),KEY `tabela_comissao_tipo_id` (`tabela_comissao_tipo_id`),KEY `tabela_comissao_id` (`tabela_comissao_id`),KEY `concessionaria_tabelas_comissoes_departamento_id_foreign` (`departamento_id`),KEY `deleted_at` (`deleted_at`),KEY `ctcctc` (`concessionaria_id`,`tabela_comissao_id`,`deleted_at`),CONSTRAINT `concessionaria_id` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `concessionaria_tabelas_comissoes_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `tabela_comissao_id` FOREIGN KEY (`tabela_comissao_id`) REFERENCES `tabelas_comissoes` (`id`),CONSTRAINT `tabela_comissao_tipo_id` FOREIGN KEY (`tabela_comissao_tipo_id`) REFERENCES `tabela_comissao_tipos` (`id`));CREATE TABLE `concessionaria_tabelas_precos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`os_tipo_id` int unsigned NOT NULL,`tabela_preco_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ctp_concessionaria_id` (`concessionaria_id`),KEY `ctp_os_tipo_id` (`os_tipo_id`),KEY `ctp_tabela_preco_id` (`tabela_preco_id`),CONSTRAINT `ctp_concessionaria_id` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `ctp_os_tipo_id` FOREIGN KEY (`os_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `ctp_tabela_preco_id` FOREIGN KEY (`tabela_preco_id`) REFERENCES `tabelas_precos` (`id`));CREATE TABLE `concessionaria_venda_veiculos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`periodo` date NOT NULL,`quantidade` int unsigned DEFAULT NULL,`quantidade_concessionaria` int unsigned DEFAULT NULL,`responsavel` varchar(255)  NOT NULL,`concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`funcionario_id` int unsigned DEFAULT NULL,`funcionario_concessionaria_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cvvci` (`concessionaria_id`),KEY `cvvdi` (`departamento_id`),KEY `cvvfi` (`funcionario_id`),KEY `cvvfci` (`funcionario_concessionaria_id`),CONSTRAINT `cvvci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `cvvdi` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `cvvfci` FOREIGN KEY (`funcionario_concessionaria_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `cvvfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(200)  NOT NULL,`nome_carbel` varchar(255)  DEFAULT NULL,`razao_social` varchar(100)  NOT NULL,`cnpj` varchar(14)  NOT NULL,`ie` varchar(14)  DEFAULT NULL,`im` varchar(14)  DEFAULT NULL,`cep` varchar(8)  NOT NULL,`logradouro` varchar(100)  NOT NULL,`bairro` varchar(100)  NOT NULL,`localidade` varchar(100)  NOT NULL,`uf` char(2)  NOT NULL,`numero` int NOT NULL,`complemento` varchar(30)  DEFAULT NULL,`retem_iss` tinyint(1) NOT NULL DEFAULT '0',`aceita_indicador1` tinyint(1) NOT NULL DEFAULT '0',`aceita_indicador2` tinyint(1) NOT NULL DEFAULT '0',`restringe_requisicao_kit` tinyint(1) NOT NULL DEFAULT '0',`edita_observacao_nf` tinyint(1) NOT NULL DEFAULT '0',`permite_deposito_ci` tinyint(1) NOT NULL DEFAULT '0',`permite_pcp` tinyint(1) NOT NULL DEFAULT '0',`dias_execucao` int unsigned NOT NULL DEFAULT '1',`produtivo_base_id` int unsigned DEFAULT NULL,`concessionaria_execucao_id` int unsigned DEFAULT NULL,`vendedor_responsavel_nf` tinyint(1) NOT NULL DEFAULT '0',`cancelamento_automatico` tinyint(1) NOT NULL DEFAULT '0',`dias_cancelamento_automatico` int NOT NULL DEFAULT '90',`cancelamento_automatico_proposta` tinyint(1) NOT NULL DEFAULT '0',`dias_cancelamento_automatico_proposta` int NOT NULL DEFAULT '0',`integracao_carbel` tinyint(1) NOT NULL DEFAULT '0',`chassis_nf_cortesia` enum('P','S','M')  DEFAULT NULL,`numero_controle_nf_cortesia` varchar(255)  NOT NULL DEFAULT '0',`carro_marca_id` int unsigned NOT NULL,`comissao_periodo_id` int unsigned DEFAULT NULL,`nota_tipo_id` int unsigned DEFAULT NULL,`supervisor_vendas_id` int unsigned DEFAULT NULL,`cluster_id` bigint unsigned DEFAULT NULL,`business_unit_id` bigint unsigned NOT NULL DEFAULT '1',`empresa_faturamento_id` int unsigned DEFAULT NULL,`email_vendedora` varchar(50)  DEFAULT NULL,`ramal_vendedora` varchar(11)  DEFAULT NULL,`gerente_nome` varchar(70)  NOT NULL,`gerente_email` varchar(70)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`bloqueio` tinyint(1) DEFAULT NULL,PRIMARY KEY (`id`),KEY `concessionarias_carro_marca_id_foreign` (`carro_marca_id`),KEY `concessionarias_comissao_periodo_id_foreign` (`comissao_periodo_id`),KEY `concessionarias_nota_tipo_id_foreign` (`nota_tipo_id`),KEY `concessionarias_supervisor_vendas_id_foreign` (`supervisor_vendas_id`),KEY `cci` (`cluster_id`),KEY `cbui` (`business_unit_id`),KEY `concessionarias_deleted_at` (`deleted_at`),KEY `concessionarias_produtivo_base_id_foreign` (`produtivo_base_id`),KEY `ccei` (`concessionaria_execucao_id`),KEY `concessionarias_empresa_faturamento_id_foreign` (`empresa_faturamento_id`),CONSTRAINT `cbui` FOREIGN KEY (`business_unit_id`) REFERENCES `business_units` (`id`),CONSTRAINT `ccei` FOREIGN KEY (`concessionaria_execucao_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `cci` FOREIGN KEY (`cluster_id`) REFERENCES `clusters` (`id`),CONSTRAINT `concessionarias_carro_marca_id_foreign` FOREIGN KEY (`carro_marca_id`) REFERENCES `carro_marcas` (`id`),CONSTRAINT `concessionarias_comissao_periodo_id_foreign` FOREIGN KEY (`comissao_periodo_id`) REFERENCES `comissao_periodos` (`id`),CONSTRAINT `concessionarias_empresa_faturamento_id_foreign` FOREIGN KEY (`empresa_faturamento_id`) REFERENCES `empresas` (`id`),CONSTRAINT `concessionarias_nota_tipo_id_foreign` FOREIGN KEY (`nota_tipo_id`) REFERENCES `nota_tipos` (`id`),CONSTRAINT `concessionarias_produtivo_base_id_foreign` FOREIGN KEY (`produtivo_base_id`) REFERENCES `produtivo_bases` (`id`),CONSTRAINT `concessionarias_supervisor_vendas_id_foreign` FOREIGN KEY (`supervisor_vendas_id`) REFERENCES `funcionarios` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 60° até 70º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `conciliacoes_financeira` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`empresa_id` int unsigned DEFAULT NULL,`concessionaria_os_id` int unsigned DEFAULT NULL,`cliente_id` int unsigned DEFAULT NULL,`caixa_id` int unsigned DEFAULT NULL,`data_transacao` datetime NOT NULL,`valor_bruto` decimal(8,2) DEFAULT NULL,`taxa` decimal(4,2) DEFAULT NULL,`previsao_pagamento` datetime NOT NULL,`valor_liquido` decimal(8,2) DEFAULT NULL,`quantidade_parcelas` int DEFAULT NULL,`transacao_id_externo` text DEFAULT NULL,`conciliado_cielo` tinyint(1) NOT NULL DEFAULT '0',`status` text DEFAULT NULL,`origem` int DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cflcid` (`cliente_id`),KEY `cfemid` (`empresa_id`),KEY `cfcaid` (`caixa_id`),KEY `cfcoid` (`concessionaria_os_id`),CONSTRAINT `cfcaid` FOREIGN KEY (`caixa_id`) REFERENCES `caixas` (`id`),CONSTRAINT `cfcoid` FOREIGN KEY (`concessionaria_os_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `cfemid` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `cflcid` FOREIGN KEY (`cliente_id`) REFERENCES `clientes` (`id`));CREATE TABLE `cortesia_os` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_id` int unsigned NOT NULL,`cortesia_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cortesia_os_os_id_foreign` (`os_id`),KEY `cortesia_os_cortesia_id_foreign` (`cortesia_id`),CONSTRAINT `cortesia_os_cortesia_id_foreign` FOREIGN KEY (`cortesia_id`) REFERENCES `cortesias` (`id`),CONSTRAINT `cortesia_os_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`));CREATE TABLE `cortesias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`mes_referencia` date NOT NULL,`valor_bruto` decimal(8,2) NOT NULL,`valor_liquido` decimal(8,2) NOT NULL,`retensao_iss` tinyint(1) NOT NULL DEFAULT '0',`paga` tinyint(1) NOT NULL DEFAULT '0',`data_pagamento` datetime DEFAULT NULL,`valor_pago` decimal(8,2) DEFAULT NULL,`fechada` tinyint(1) NOT NULL DEFAULT '0',`data_fechamento` datetime DEFAULT NULL,`finalizada` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`motivo_cancelamento` text DEFAULT NULL,`observacao` text DEFAULT NULL,`email_enviado` tinyint(1) NOT NULL DEFAULT '0',`data_envio_email` datetime DEFAULT NULL,`pagamento_deposito` tinyint(1) NOT NULL DEFAULT '0',`concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned DEFAULT NULL,`empresa_id` int unsigned DEFAULT NULL,`funcionario_cancelamento_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `cortesias_concessionaria_id_foreign` (`concessionaria_id`),KEY `cortesias_departamento_id_foreign` (`departamento_id`),KEY `cortesias_funcionario_cancelamento_id_foreign` (`funcionario_cancelamento_id`),KEY `cortesias_empresa_id_foreign` (`empresa_id`),CONSTRAINT `cortesias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `cortesias_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `cortesias_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `cortesias_funcionario_cancelamento_id_foreign` FOREIGN KEY (`funcionario_cancelamento_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `crmbonus_lancamentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`tipo` enum('criacao','utilizacao')  NOT NULL,`valor_liquido` decimal(8,2) unsigned NOT NULL,`valor_bruto` decimal(8,2) unsigned DEFAULT NULL,`valor_bonus` decimal(8,2) unsigned DEFAULT NULL,`valor_bonus_utilizacao` decimal(8,2) unsigned NOT NULL,`data_venda` datetime NOT NULL,`data_utilizacao` datetime DEFAULT NULL,`data_inicio_validade` datetime NOT NULL,`data_fim_validade` datetime NOT NULL,`vendedor` varchar(255)  NOT NULL,`cliente` varchar(255)  NOT NULL,`telefone` varchar(255)  NOT NULL,`os_id` int unsigned DEFAULT NULL,`crmbonus_bonus_id` int unsigned DEFAULT NULL,`crmbonus_order_id` int unsigned DEFAULT NULL,`crmbonus_customer_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `crmbonus_lancamentos_os_id_foreign` (`os_id`),CONSTRAINT `crmbonus_lancamentos_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`));CREATE TABLE `departamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`sigla` varchar(4)  NOT NULL,`sigla_carbel` varchar(255)  DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `documento_assinado_mensagens` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`message_id` varchar(70)  NOT NULL,`message` text  NOT NULL,`profile_name` varchar(70)  NOT NULL,`error_message` text  NOT NULL,`direction` varchar(20)  NOT NULL,`api_created_at` date NOT NULL,`documento_assinado_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `docass` (`documento_assinado_id`),CONSTRAINT `docass` FOREIGN KEY (`documento_assinado_id`) REFERENCES `documento_assinados` (`id`));CREATE TABLE `documento_assinados` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`key` varchar(70)  NOT NULL,`name` varchar(70)  NOT NULL,`sender_name` varchar(70)  NOT NULL,`sender_phone` varchar(70)  NOT NULL,`content` text  NOT NULL,`status` varchar(255)  NOT NULL,`signer_phone` varchar(70)  NOT NULL,`signer_name` varchar(70)  NOT NULL,`sent_at` varchar(70)  NOT NULL,`api_created_at` date NOT NULL,`caixa_fechamento_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `documento_assinados_caixa_fechamento_id_foreign` (`caixa_fechamento_id`),CONSTRAINT `documento_assinados_caixa_fechamento_id_foreign` FOREIGN KEY (`caixa_fechamento_id`) REFERENCES `caixa_fechamentos` (`id`));CREATE TABLE `email_categoria_rotinas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`descricao` varchar(255)  NOT NULL,`email_categoria_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `email_categoria_rotinas_email_categoria_id_foreign` (`email_categoria_id`),CONSTRAINT `email_categoria_rotinas_email_categoria_id_foreign` FOREIGN KEY (`email_categoria_id`) REFERENCES `email_categorias` (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `email_categorias` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `email_mensagem_concessionarias` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`email_mensagem_id` bigint unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `emcemi` (`email_mensagem_id`),KEY `emcci` (`concessionaria_id`),CONSTRAINT `emcci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `emcemi` FOREIGN KEY (`email_mensagem_id`) REFERENCES `email_mensagens` (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `email_mensagens` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`mensagem` text  NOT NULL,`expired_at` datetime NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `empresas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`razao_social` varchar(100)  NOT NULL,`cnpj` varchar(14)  NOT NULL,`ie` varchar(14)  DEFAULT NULL,`im` varchar(14)  DEFAULT NULL,`cep` varchar(8)  NOT NULL,`logradouro` varchar(80)  NOT NULL,`bairro` varchar(30)  NOT NULL,`localidade` varchar(30)  NOT NULL,`uf` char(2)  NOT NULL,`numero` int NOT NULL,`complemento` varchar(30)  DEFAULT NULL,`layout_nfse` enum('UNIFICADO','BH')  NOT NULL DEFAULT 'UNIFICADO',`optante_simples_nacional` tinyint(1) NOT NULL DEFAULT '1',`token_ibpt` varchar(64)  DEFAULT NULL,`token_sefaz_nfce` varchar(255)  DEFAULT NULL,`estabelecimento_cielo` varchar(255)  DEFAULT NULL,`user_edi_cielo` varchar(255)  DEFAULT NULL,`password_edi_cielo` varchar(255)  DEFAULT NULL,`merchant_id` varchar(255)  DEFAULT NULL,`merchant_key` varchar(255)  DEFAULT NULL,`faturamento_maximo` decimal(10,2) NOT NULL DEFAULT '0.00',`numero_empresa_remessa` varchar(255)  DEFAULT NULL,`pix_key` varchar(255)  DEFAULT NULL,`pix_client_id` varchar(255)  DEFAULT NULL,`pix_client_secret` varchar(255)  DEFAULT NULL,`pix_access_token` text DEFAULT NULL,`pix_access_token_expiration_date` datetime DEFAULT NULL,`pix_tentativas` int unsigned NOT NULL DEFAULT '1',`cert_path` varchar(255)  DEFAULT NULL,`ssl_key_path` varchar(255)  DEFAULT NULL,`url_logo` varchar(100)  DEFAULT NULL,`business_unit_id` bigint unsigned NOT NULL DEFAULT '1',`porcentagem_valor_nota_produto` int NOT NULL DEFAULT '90',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `embui` (`business_unit_id`),CONSTRAINT `embui` FOREIGN KEY (`business_unit_id`) REFERENCES `business_units` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 70° até 80º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `epi` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`descricao` text  NOT NULL,`ca` varchar(255)  NOT NULL,`validade` int NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `estoque_devolucao_produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`estoque_devolucao_id` int unsigned NOT NULL,`estoque_entrada_produto_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_devolucao_produtos_estoque_devolucao_id_foreign` (`estoque_devolucao_id`),KEY `estoque_devolucao_produtos_estoque_entrada_produto_id_foreign` (`estoque_entrada_produto_id`),CONSTRAINT `estoque_devolucao_produtos_estoque_devolucao_id_foreign` FOREIGN KEY (`estoque_devolucao_id`) REFERENCES `estoque_devolucoes` (`id`),CONSTRAINT `estoque_devolucao_produtos_estoque_entrada_produto_id_foreign` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`) );CREATE TABLE `estoque_devolucoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`justificativa` text  NOT NULL,`funcionario_devolucao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_devolucoes_funcionario_devolucao_id_foreign` (`funcionario_devolucao_id`),CONSTRAINT `estoque_devolucoes_funcionario_devolucao_id_foreign` FOREIGN KEY (`funcionario_devolucao_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `estoque_entrada_produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_unitario` decimal(10,4) NOT NULL,`valor_sugerido` decimal(10,4) NOT NULL DEFAULT '0.0000',`valor_unitario_real` decimal(10,4) unsigned NOT NULL DEFAULT '0.0000',`valor_icms` decimal(10,4) NOT NULL,`valor_icms_subst` decimal(8,2) NOT NULL DEFAULT '0.00',`base_icms` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_ipi` decimal(10,4) DEFAULT NULL,`aliquota_ipi` decimal(4,2) DEFAULT NULL,`codigo` varchar(12)  DEFAULT NULL,`codigo_antigo` varchar(12)  DEFAULT NULL,`individual` tinyint(1) NOT NULL DEFAULT '1',`quantidade_usos` int unsigned NOT NULL DEFAULT '1',`tamanho` decimal(10,4) unsigned NOT NULL DEFAULT '1.0000',`estoque_minimo` int unsigned NOT NULL DEFAULT '0',`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` date DEFAULT NULL,`transferido` tinyint(1) NOT NULL DEFAULT '0',`data_transferencia` date DEFAULT NULL,`impresso` tinyint(1) NOT NULL DEFAULT '1',`data_impressao` date DEFAULT NULL,`observacao` text DEFAULT NULL,`usuario_transferencia_id` int unsigned DEFAULT NULL,`estoque_entrada_id` int unsigned NOT NULL,`estoque_id` int unsigned NOT NULL,`estoque_original_id` int unsigned DEFAULT NULL,`produto_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`os_servico_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`estoque_fracionamento_id` int unsigned DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_entrada_produtos_usuario_transferencia_id_foreign` (`usuario_transferencia_id`),KEY `estoque_entrada_produtos_estoque_entrada_id_foreign` (`estoque_entrada_id`),KEY `estoque_entrada_produtos_estoque_id_foreign` (`estoque_id`),KEY `estoque_entrada_produtos_estoque_original_id_foreign` (`estoque_original_id`),KEY `estoque_entrada_produtos_produto_id_foreign` (`produto_id`),KEY `estoque_entrada_produtos_tonalidade_id_foreign` (`tonalidade_id`),KEY `estoque_entrada_produtos_estoque_fracionamento_id_foreign` (`estoque_fracionamento_id`),KEY `estoque_entrada_produtos_os_servico_id_foreign` (`os_servico_id`),KEY `estoque_entrada_produtos_carro_modelo_id_foreign` (`carro_modelo_id`),CONSTRAINT `estoque_entrada_produtos_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `estoque_entrada_produtos_estoque_entrada_id_foreign` FOREIGN KEY (`estoque_entrada_id`) REFERENCES `estoque_entradas` (`id`),CONSTRAINT `estoque_entrada_produtos_estoque_fracionamento_id_foreign` FOREIGN KEY (`estoque_fracionamento_id`) REFERENCES `estoque_fracionamentos` (`id`),CONSTRAINT `estoque_entrada_produtos_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `estoque_entrada_produtos_estoque_original_id_foreign` FOREIGN KEY (`estoque_original_id`) REFERENCES `estoques` (`id`),CONSTRAINT `estoque_entrada_produtos_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `estoque_entrada_produtos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `estoque_entrada_produtos_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`),CONSTRAINT `estoque_entrada_produtos_usuario_transferencia_id_foreign` FOREIGN KEY (`usuario_transferencia_id`) REFERENCES `usuarios` (`id`));CREATE TABLE `estoque_entradas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nota` varchar(30)  NOT NULL,`recuperacao` tinyint(1) NOT NULL DEFAULT '0',`data_emissao` datetime NOT NULL,`total_ipi` decimal(4,2) DEFAULT NULL,`total_icms_st` decimal(4,2) DEFAULT NULL,`total_produtos` decimal(8,2) DEFAULT NULL,`total_tributos` decimal(8,2) DEFAULT NULL,`total_nota` decimal(8,2) DEFAULT NULL,`possui_frete` tinyint(1) NOT NULL DEFAULT '1',`frete` decimal(8,2) DEFAULT NULL,`data_vencimento` datetime DEFAULT NULL,`seguro` decimal(8,2) DEFAULT NULL,`desconto` decimal(4,2) DEFAULT NULL,`despesa_acessoria` decimal(8,2) DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`estoque_id` int unsigned NOT NULL,`fornecedor_id` int unsigned DEFAULT NULL,`transportadora_id` int unsigned DEFAULT NULL,`ordem_compra_id` bigint unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_entradas_estoque_id_foreign` (`estoque_id`),KEY `estoque_entradas_fornecedor_id_foreign` (`fornecedor_id`),KEY `estoque_entradas_transportadora_id_foreign` (`transportadora_id`),KEY `estoque_entradas_ordem_compra_id_foreign` (`ordem_compra_id`),CONSTRAINT `estoque_entradas_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `estoque_entradas_fornecedor_id_foreign` FOREIGN KEY (`fornecedor_id`) REFERENCES `fornecedores` (`id`) ON DELETE CASCADE,CONSTRAINT `estoque_entradas_ordem_compra_id_foreign` FOREIGN KEY (`ordem_compra_id`) REFERENCES `ordens_compras` (`id`),CONSTRAINT `estoque_entradas_transportadora_id_foreign` FOREIGN KEY (`transportadora_id`) REFERENCES `transportadoras` (`id`));CREATE TABLE `estoque_fracionamento_fracoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`tamanho` double(8,2) unsigned NOT NULL,`tamanho_secundario` double(8,2) unsigned NOT NULL,`codigo` varchar(12)  DEFAULT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`observacao` text DEFAULT NULL,`estoque_fracionamento_id` int unsigned NOT NULL,`estoque_id` int unsigned NOT NULL,`estoque_fracionamento_secundario_id` int unsigned DEFAULT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`os_servico_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `eff_ef` (`estoque_fracionamento_id`),KEY `estoque_fracionamento_fracoes_estoque_id_foreign` (`estoque_id`),KEY `eff_efs` (`estoque_fracionamento_secundario_id`),KEY `estoque_fracionamento_fracoes_concessionaria_id_foreign` (`concessionaria_id`),KEY `estoque_fracionamento_fracoes_os_servico_id_foreign` (`os_servico_id`),CONSTRAINT `eff_ef` FOREIGN KEY (`estoque_fracionamento_id`) REFERENCES `estoque_fracionamentos` (`id`),CONSTRAINT `eff_efs` FOREIGN KEY (`estoque_fracionamento_secundario_id`) REFERENCES `estoque_fracionamentos` (`id`),CONSTRAINT `estoque_fracionamento_fracoes_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `estoque_fracionamento_fracoes_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `estoque_fracionamento_fracoes_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`));CREATE TABLE `estoque_fracionamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`tamanho` double(8,2) unsigned NOT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`estoque_saida_produto_id` int unsigned NOT NULL,`estoque_entrada_produto_id` int unsigned NOT NULL,`produto_id` int unsigned NOT NULL,`estoque_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_fracionamentos_estoque_entrada_produto_id_foreign` (`estoque_entrada_produto_id`),KEY `estoque_fracionamentos_produto_id_foreign` (`produto_id`),KEY `estoque_fracionamentos_estoque_id_foreign` (`estoque_id`),CONSTRAINT `estoque_fracionamentos_estoque_entrada_produto_id_foreign` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`),CONSTRAINT `estoque_fracionamentos_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `estoque_fracionamentos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`));CREATE TABLE `estoque_recuperacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`estoque_entrada_produto_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estoque_recuperacoes_estoque_entrada_produto_id_foreign` (`estoque_entrada_produto_id`),KEY `estoque_recuperacoes_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `estoque_recuperacoes_estoque_entrada_produto_id_foreign` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`),CONSTRAINT `estoque_recuperacoes_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `estoque_saida_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` varchar(255)  NOT NULL,`estoque_saida_id` bigint unsigned NOT NULL,`estoque_saida_status_id` bigint unsigned NOT NULL,`funcionario_registro_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `eshesi` (`estoque_saida_id`),KEY `eshessi` (`estoque_saida_status_id`),KEY `eshfri` (`funcionario_registro_id`),CONSTRAINT `eshesi` FOREIGN KEY (`estoque_saida_id`) REFERENCES `estoque_saidas` (`id`),CONSTRAINT `eshessi` FOREIGN KEY (`estoque_saida_status_id`) REFERENCES `estoque_saida_status` (`id`),CONSTRAINT `eshfri` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `estoque_saida_produto_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` varchar(255)  NOT NULL,`estoque_saida_produto_id` bigint unsigned NOT NULL,`funcionario_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `esphespi` (`estoque_saida_produto_id`),KEY `espfi` (`funcionario_id`),CONSTRAINT `espfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `esphespi` FOREIGN KEY (`estoque_saida_produto_id`) REFERENCES `estoque_saida_produtos` (`id`));CREATE TABLE `estoque_saida_produtos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` enum('incoerencia','em_falta','requisicao_cancelada','estoque_programado_cancelado','devolucao','recuperacao')  DEFAULT NULL,`entregue` tinyint(1) NOT NULL DEFAULT '0',`data_entrega` datetime DEFAULT NULL,`os_servico_entrega_id` int unsigned DEFAULT NULL,`funcionario_entrega_id` int unsigned DEFAULT NULL,`recebido` tinyint(1) NOT NULL DEFAULT '0',`data_recebimento` datetime DEFAULT NULL,`funcionario_recebimento_id` int unsigned DEFAULT NULL,`devolvido` tinyint(1) NOT NULL DEFAULT '0',`data_devolucao` datetime DEFAULT NULL,`produto_id` int unsigned NOT NULL,`estoque_saida_id` bigint unsigned NOT NULL,`estoque_entrada_produto_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `esppi` (`produto_id`),KEY `espesi` (`estoque_saida_id`),KEY `espeepi` (`estoque_entrada_produto_id`),KEY `estoque_saida_produtos_os_servico_entrega_id_foreign` (`os_servico_entrega_id`),KEY `estoque_saida_produtos_funcionario_entrega_id_foreign` (`funcionario_entrega_id`),KEY `estoque_saida_produtos_funcionario_recebimento_id_foreign` (`funcionario_recebimento_id`),CONSTRAINT `espeepi` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`),CONSTRAINT `espesi` FOREIGN KEY (`estoque_saida_id`) REFERENCES `estoque_saidas` (`id`),CONSTRAINT `esppi` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `estoque_saida_produtos_funcionario_entrega_id_foreign` FOREIGN KEY (`funcionario_entrega_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `estoque_saida_produtos_funcionario_recebimento_id_foreign` FOREIGN KEY (`funcionario_recebimento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `estoque_saida_produtos_os_servico_entrega_id_foreign` FOREIGN KEY (`os_servico_entrega_id`) REFERENCES `os_servicos` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 80° até 90º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `estoque_saida_status` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `estoque_saida_tipos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`exibir` tinyint(1) NOT NULL DEFAULT '0',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `estoque_saidas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`observacao` varchar(255)  DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`motivo_cancelamento` varchar(255)  DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`funcionario_registro_id` int unsigned DEFAULT NULL,`estoque_saida_tipo_id` bigint unsigned NOT NULL,`estoque_saida_status_id` bigint unsigned NOT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`concessionaria_execucao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `esfri` (`funcionario_registro_id`),KEY `esesti` (`estoque_saida_tipo_id`),KEY `esessi` (`estoque_saida_status_id`),KEY `esci` (`concessionaria_id`),KEY `escei` (`concessionaria_execucao_id`),CONSTRAINT `escei` FOREIGN KEY (`concessionaria_execucao_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `esci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `esessi` FOREIGN KEY (`estoque_saida_status_id`) REFERENCES `estoque_saida_status` (`id`),CONSTRAINT `esesti` FOREIGN KEY (`estoque_saida_tipo_id`) REFERENCES `estoque_saida_tipos` (`id`),CONSTRAINT `esfri` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `estoque_tipos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `estoques` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`entrada_produto` tinyint(1) NOT NULL DEFAULT '0',`business_unit_id` bigint unsigned NOT NULL DEFAULT '1',`estoque_tipo_id` bigint unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `esbui` (`business_unit_id`),KEY `esteti` (`estoque_tipo_id`),CONSTRAINT `esbui` FOREIGN KEY (`business_unit_id`) REFERENCES `business_units` (`id`),CONSTRAINT `esteti` FOREIGN KEY (`estoque_tipo_id`) REFERENCES `estoque_tipos` (`id`) );CREATE TABLE `estorno_statuses` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `estornos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`tipo` int NOT NULL,`valor` decimal(8,2) unsigned DEFAULT NULL,`motivo` varchar(255)  NOT NULL,`status` int NOT NULL,`pix_rtr_id` varchar(255)  DEFAULT NULL,`justificativa` text DEFAULT NULL,`solicitado_por` int unsigned DEFAULT NULL,`atendido_por` int unsigned DEFAULT NULL,`os_id` int unsigned NOT NULL,`caixa_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `estornos_solicitado_por_foreign` (`solicitado_por`),KEY `estornos_atendido_por_foreign` (`atendido_por`),KEY `estornos_os_id_foreign` (`os_id`),KEY `estornos_caixa_id_foreign` (`caixa_id`),CONSTRAINT `estornos_atendido_por_foreign` FOREIGN KEY (`atendido_por`) REFERENCES `funcionarios` (`id`),CONSTRAINT `estornos_caixa_id_foreign` FOREIGN KEY (`caixa_id`) REFERENCES `caixas` (`id`),CONSTRAINT `estornos_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `estornos_solicitado_por_foreign` FOREIGN KEY (`solicitado_por`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `factories` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(50)  NOT NULL,`financeiro_caixa_destino_id` int unsigned NOT NULL,`taxa` decimal(8,2) NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `factories_financeiro_caixa_destino_id_foreign` (`financeiro_caixa_destino_id`),CONSTRAINT `factories_financeiro_caixa_destino_id_foreign` FOREIGN KEY (`financeiro_caixa_destino_id`) REFERENCES `financeiro_caixas_destino` (`id`) );CREATE TABLE `feriados` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`descricao` text DEFAULT NULL,`data` datetime NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `financeiro_caixas_destino` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(50)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `financeiro_malotes_classificacao` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) NOT NULL DEFAULT '0.00',`auditado` tinyint(1) NOT NULL DEFAULT '1',`data_auditoria` datetime DEFAULT NULL,`classificado` tinyint(1) NOT NULL DEFAULT '0',`data_classificacao` datetime DEFAULT NULL,`caixa_preto` tinyint(1) NOT NULL DEFAULT '0',`usuario_auditoria_id` int unsigned NOT NULL,`usuario_classificacao_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `fmcuaid` (`usuario_auditoria_id`),KEY `fmcucid` (`usuario_classificacao_id`),CONSTRAINT `fmcuaid` FOREIGN KEY (`usuario_auditoria_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `fmcucid` FOREIGN KEY (`usuario_classificacao_id`) REFERENCES `usuarios` (`id`));CREATE TABLE `financeiro_recibo_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `financeiro_recibos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) unsigned NOT NULL,`nome` varchar(80)  NOT NULL,`cpf` varchar(14)  DEFAULT NULL,`conteudo` text  NOT NULL,`empresa_id` int unsigned NOT NULL,`financeiro_recibo_tipo_id` int unsigned NOT NULL,`funcionario_emissao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `financeiro_recibos_empresa_id_foreign` (`empresa_id`),KEY `financeiro_recibos_financeiro_recibo_tipo_id_foreign` (`financeiro_recibo_tipo_id`),KEY `financeiro_recibos_funcionario_emissao_id_foreign` (`funcionario_emissao_id`),CONSTRAINT `financeiro_recibos_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `financeiro_recibos_financeiro_recibo_tipo_id_foreign` FOREIGN KEY (`financeiro_recibo_tipo_id`) REFERENCES `financeiro_recibo_tipos` (`id`),CONSTRAINT `financeiro_recibos_funcionario_emissao_id_foreign` FOREIGN KEY (`funcionario_emissao_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `fornecedor_produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_unitario` decimal(10,4) NOT NULL,`valor_icms` decimal(10,4) NOT NULL,`aliquota_ipi` decimal(4,2) DEFAULT NULL,`fornecedor_id` int unsigned NOT NULL,`produto_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `fornecedor_produtos_fornecedor_id_foreign` (`fornecedor_id`),KEY `fornecedor_produtos_produto_id_foreign` (`produto_id`),CONSTRAINT `fornecedor_produtos_fornecedor_id_foreign` FOREIGN KEY (`fornecedor_id`) REFERENCES `fornecedores` (`id`),CONSTRAINT `fornecedor_produtos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`));CREATE TABLE `fornecedores` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(40)  NOT NULL,`razao_social` varchar(50)  DEFAULT NULL,`cnpj` varchar(14)  DEFAULT NULL,`ie` varchar(14)  DEFAULT NULL,`im` varchar(14)  DEFAULT NULL,`cep` varchar(8)  DEFAULT NULL,`logradouro` varchar(40)  DEFAULT NULL,`bairro` varchar(40)  DEFAULT NULL,`localidade` varchar(40)  DEFAULT NULL,`uf` char(2)  DEFAULT NULL,`numero` int DEFAULT NULL,`complemento` varchar(30)  DEFAULT NULL,`contato` varchar(50)  DEFAULT NULL,`telefone1` varchar(15)  DEFAULT NULL,`telefone2` varchar(15)  DEFAULT NULL,`email` varchar(30)  DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`estoque_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `fornecedores_estoque_id_foreign` (`estoque_id`),CONSTRAINT `fornecedores_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`));CREATE TABLE `funcionario_cargos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`matricula` varchar(255)  DEFAULT NULL,`salario` decimal(8,2) NOT NULL,`data_admissao` date NOT NULL,`demitido` tinyint(1) NOT NULL DEFAULT '0',`data_demissao` date DEFAULT NULL,`motivo_demissao` text DEFAULT NULL,`fixo` tinyint(1) NOT NULL DEFAULT '0',`reemprego` tinyint(1) NOT NULL DEFAULT '0',`periodo_experiencia` tinyint(1) NOT NULL DEFAULT '0',`inicio_experiencia` date DEFAULT NULL,`fim_experiencia` date DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`cargo_id` int unsigned NOT NULL,`empresa_id` int unsigned DEFAULT NULL,`produtivo_tipo_id` int unsigned DEFAULT NULL,`funcionario_local_id` bigint unsigned DEFAULT NULL,`concessionaria_local_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `funcionario_cargos_funcionario_id_foreign` (`funcionario_id`),KEY `funcionario_cargos_cargo_id_foreign` (`cargo_id`),KEY `funcionario_cargos_produtivo_tipo_id_foreign` (`produtivo_tipo_id`),KEY `funcionario_cargos_empresa_id_foreign` (`empresa_id`),KEY `funcionario_cargos_funcionario_local_id_foreign` (`funcionario_local_id`),KEY `funcionario_cargos_concessionaria_local_id_foreign` (`concessionaria_local_id`),CONSTRAINT `funcionario_cargos_cargo_id_foreign` FOREIGN KEY (`cargo_id`) REFERENCES `cargos` (`id`),CONSTRAINT `funcionario_cargos_concessionaria_local_id_foreign` FOREIGN KEY (`concessionaria_local_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `funcionario_cargos_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `funcionario_cargos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `funcionario_cargos_funcionario_local_id_foreign` FOREIGN KEY (`funcionario_local_id`) REFERENCES `funcionario_locais` (`id`),CONSTRAINT `funcionario_cargos_produtivo_tipo_id_foreign` FOREIGN KEY (`produtivo_tipo_id`) REFERENCES `produtivo_tipos` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 90° até 100º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `funcionario_concessionaria_departamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`funcionario_concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `funcConc_id` (`funcionario_concessionaria_id`),KEY `depId` (`departamento_id`),CONSTRAINT `depId` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `funcConc_id` FOREIGN KEY (`funcionario_concessionaria_id`) REFERENCES `funcionario_concessionarias` (`id`));CREATE TABLE `funcionario_concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`funcionario_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`padrao` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `funcId` (`funcionario_id`),KEY `concId` (`concessionaria_id`),CONSTRAINT `concId` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `funcId` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `funcionario_epi_entregas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`quantidade` int NOT NULL DEFAULT '1',`funcionario_id` int unsigned NOT NULL,`epi_id` int unsigned NOT NULL,`data_entrega` datetime NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `funcionario_epi_entregas_funcionario_id_foreign` (`funcionario_id`),KEY `funcionario_epi_entregas_epi_id_foreign` (`epi_id`),CONSTRAINT `funcionario_epi_entregas_epi_id_foreign` FOREIGN KEY (`epi_id`) REFERENCES `epi` (`id`),CONSTRAINT `funcionario_epi_entregas_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `funcionario_estoques` (`id` int unsigned NOT NULL AUTO_INCREMENT,`funcionario_id` int unsigned NOT NULL,`estoque_id` int unsigned NOT NULL,`padrao` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `fefuncId` (`funcionario_id`),KEY `feestId` (`estoque_id`),CONSTRAINT `feestId` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `fefuncId` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `funcionario_locais` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `funcionario_ponto_marcacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`data` datetime NOT NULL,`ajuste` tinyint(1) NOT NULL DEFAULT '0',`motivo` varchar(255)  DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`empresa_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `fpmfi` (`funcionario_id`),KEY `fpmei` (`empresa_id`),CONSTRAINT `fpmei` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `fpmfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `funcionario_retorno_motivos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`funcionario_id` int unsigned NOT NULL,`retorno_motivo_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `frcfi` (`funcionario_id`),KEY `frcrci` (`retorno_motivo_id`),CONSTRAINT `frcfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `frcrci` FOREIGN KEY (`retorno_motivo_id`) REFERENCES `retorno_motivos` (`id`) );CREATE TABLE `funcionario_situacoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `funcionario_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `funcionario_vt_cartoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`quantidade_passes` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_passe` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_inicial` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`justificativa_cancelamento` text DEFAULT NULL,`observacao` text DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`vt_cartao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `funcionario_vt_cartoes_funcionario_id_foreign` (`funcionario_id`),KEY `funcionario_vt_cartoes_vt_cartao_id_foreign` (`vt_cartao_id`),CONSTRAINT `funcionario_vt_cartoes_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `funcionario_vt_cartoes_vt_cartao_id_foreign` FOREIGN KEY (`vt_cartao_id`) REFERENCES `vt_cartoes` (`id`));CREATE TABLE `funcionarios` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(50)  NOT NULL,`cpf` varchar(11)  DEFAULT NULL,`rg` varchar(9)  DEFAULT NULL,`data_nascimento` datetime DEFAULT NULL,`telefone` varchar(15)  DEFAULT NULL,`email` varchar(30)  DEFAULT NULL,`agencia` varchar(255)  DEFAULT NULL,`conta` varchar(255)  DEFAULT NULL,`url_foto` varchar(255)  DEFAULT NULL,`terceiros` tinyint(1) NOT NULL DEFAULT '0',`banco_id` int unsigned DEFAULT NULL,`banco_conta_tipo_id` int unsigned DEFAULT NULL,`funcionario_situacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`raca_cor_id` int DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE KEY `funcionarios_rg_unique` (`rg`),UNIQUE KEY `funcionarios_cpf_unique` (`cpf`),KEY `funcionarios_funcionario_situacoes_id_foreign` (`funcionario_situacao_id`),KEY `fbi` (`banco_id`),KEY `fbcti` (`banco_conta_tipo_id`),KEY `funcionarios_deleted_at` (`deleted_at`),CONSTRAINT `fbcti` FOREIGN KEY (`banco_conta_tipo_id`) REFERENCES `banco_conta_tipos` (`id`),CONSTRAINT `fbi` FOREIGN KEY (`banco_id`) REFERENCES `bancos` (`id`),CONSTRAINT `funcionarios_funcionario_situacoes_id_foreign` FOREIGN KEY (`funcionario_situacao_id`) REFERENCES `funcionario_situacoes` (`id`));CREATE TABLE `grupo_usuario_modulos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`padrao` tinyint(1) NOT NULL DEFAULT '1',`modulo_id` int unsigned NOT NULL,`grupo_usuario_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `grupo_usuario_modulos_modulo_id_foreign` (`modulo_id`),KEY `grupo_usuario_modulos_grupo_usuario_id_foreign` (`grupo_usuario_id`),CONSTRAINT `grupo_usuario_modulos_grupo_usuario_id_foreign` FOREIGN KEY (`grupo_usuario_id`) REFERENCES `grupos_usuarios` (`id`),CONSTRAINT `grupo_usuario_modulos_modulo_id_foreign` FOREIGN KEY (`modulo_id`) REFERENCES `modulos` (`id`));CREATE TABLE `grupo_usuario_telas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`tela_id` int unsigned NOT NULL,`grupo_usuario_id` int unsigned NOT NULL,`modulo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `grupo_usuario_telas_tela_id_foreign` (`tela_id`),KEY `grupo_usuario_telas_grupo_usuario_id_foreign` (`grupo_usuario_id`),KEY `grupo_usuario_telas_modulo_id_foreign` (`modulo_id`));CREATE TABLE `grupos_produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `grupos_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `grupos_usuarios` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(50)  NOT NULL,`descricao` text DEFAULT NULL,`roles` varchar(255)  DEFAULT NULL,`transporta_malote` tinyint(1) NOT NULL DEFAULT '0',`vincula_concessionaria` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `historico_cheques` (`id` int unsigned NOT NULL AUTO_INCREMENT,`caixa_id` int unsigned NOT NULL,`num_cheque` varchar(255)  NOT NULL,`acao` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `historico_cheques_caixa_id_foreign` (`caixa_id`),CONSTRAINT `historico_cheques_caixa_id_foreign` FOREIGN KEY (`caixa_id`) REFERENCES `caixas` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 100° até 110º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `holerite_lancamentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`codigo` int unsigned NOT NULL,`descricao` varchar(255)  NOT NULL,`referencia` varchar(255)  NOT NULL,`desconto` tinyint(1) NOT NULL DEFAULT '0',`valor` decimal(8,2) unsigned NOT NULL,`holerite_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `hlhi` (`holerite_id`),CONSTRAINT `hlhi` FOREIGN KEY (`holerite_id`) REFERENCES `holerites` (`id`));CREATE TABLE `holerites` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`periodo` date NOT NULL,`matricula` varchar(255)  NOT NULL,`tipo` varchar(255)  NOT NULL DEFAULT 'Mensalista',`categoria_cargo` varchar(255)  NOT NULL,`cargo` varchar(255)  NOT NULL,`cbo` varchar(255)  NOT NULL,`departamento` varchar(255)  NOT NULL,`filial` varchar(255)  NOT NULL DEFAULT '1',`data_admissao` date NOT NULL,`observacoes` text DEFAULT NULL,`total_vencimentos` decimal(8,2) unsigned NOT NULL,`total_descontos` decimal(8,2) unsigned NOT NULL,`salario_base` decimal(8,2) unsigned NOT NULL,`base_inss` decimal(8,2) unsigned NOT NULL,`base_fgts` decimal(8,2) unsigned NOT NULL,`total_fgts` decimal(8,2) unsigned NOT NULL,`base_irrf` decimal(8,2) unsigned NOT NULL,`aliquota_irrf` decimal(8,2) unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`empresa_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `hfi` (`funcionario_id`),KEY `hei` (`empresa_id`),CONSTRAINT `hei` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `hfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `icms_aliquotas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`aliquota_uf` decimal(8,2) NOT NULL,`aliquota_interestadual` decimal(8,2) NOT NULL,`uf` enum('AC','AL','AP','AM','BA','CE','DF','ES','GO','MA','MT','MS','MG','PA','PB','PR','PE','PI','RJ','RN','RS','RO','RR','SC','SP','SE','TO')  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE KEY `icms_aliquotas_uf_unique` (`uf`));CREATE TABLE `indicador_concessionaria_departamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`indicador_concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `indConc_id` (`indicador_concessionaria_id`),KEY `indDepId` (`departamento_id`),CONSTRAINT `indConc_id` FOREIGN KEY (`indicador_concessionaria_id`) REFERENCES `indicador_concessionarias` (`id`),CONSTRAINT `indDepId` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`));CREATE TABLE `indicador_concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`indicador_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `indFuncId` (`indicador_id`),KEY `indConcId` (`concessionaria_id`),CONSTRAINT `indConcId` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `indFuncId` FOREIGN KEY (`indicador_id`) REFERENCES `indicadores` (`id`));CREATE TABLE `indicador_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `indicadores` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(80)  NOT NULL,`nome_mae` varchar(80)  NOT NULL,`data_nascimento` date NOT NULL,`numero_cartao` varchar(255)  DEFAULT NULL,`nome_completo` text DEFAULT NULL,`cpf` varchar(11)  DEFAULT NULL,`matricula` varchar(30)  DEFAULT NULL,`funcao` varchar(255)  DEFAULT NULL,`agencia` varchar(10)  DEFAULT NULL,`conta` varchar(10)  DEFAULT NULL,`telefone` varchar(16)  DEFAULT NULL,`email` varchar(30)  DEFAULT NULL,`indicador_tipo_id` int unsigned NOT NULL,`banco_id` int unsigned DEFAULT NULL,`banco_conta_tipo_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE KEY `cpf_UNIQUE` (`cpf`),KEY `indicadores_indicador_tipo_id_foreign` (`indicador_tipo_id`),KEY `indicadores_banco_id_foreign` (`banco_id`),KEY `indicadores_banco_conta_tipo_id_foreign` (`banco_conta_tipo_id`),KEY `indicadores_cpf_index` (`cpf`),CONSTRAINT `indicadores_banco_conta_tipo_id_foreign` FOREIGN KEY (`banco_conta_tipo_id`) REFERENCES `banco_conta_tipos` (`id`),CONSTRAINT `indicadores_banco_id_foreign` FOREIGN KEY (`banco_id`) REFERENCES `bancos` (`id`),CONSTRAINT `indicadores_indicador_tipo_id_foreign` FOREIGN KEY (`indicador_tipo_id`) REFERENCES `indicador_tipos` (`id`));CREATE TABLE `logistica_expedicao_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`logistica_expedicao_id` bigint unsigned NOT NULL,`logistica_expedicao_status_id` bigint unsigned NOT NULL,`funcionario_registro_id` int unsigned NOT NULL,`funcionario_recebimento_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `lehlei` (`logistica_expedicao_id`),KEY `lehlesi` (`logistica_expedicao_status_id`),KEY `lehfrgi` (`funcionario_registro_id`),KEY `lehfrci` (`funcionario_recebimento_id`),CONSTRAINT `lehfrci` FOREIGN KEY (`funcionario_recebimento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `lehfrgi` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `lehlei` FOREIGN KEY (`logistica_expedicao_id`) REFERENCES `logistica_expedicoes` (`id`),CONSTRAINT `lehlesi` FOREIGN KEY (`logistica_expedicao_status_id`) REFERENCES `logistica_expedicao_statuses` (`id`) );CREATE TABLE `logistica_expedicao_saidas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`logistica_expedicao_id` bigint unsigned NOT NULL,`saida_id` int unsigned NOT NULL,`requisicao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `leslei` (`logistica_expedicao_id`),CONSTRAINT `leslei` FOREIGN KEY (`logistica_expedicao_id`) REFERENCES `logistica_expedicoes` (`id`) );CREATE TABLE `logistica_expedicao_statuses` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 110° até 120º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `logistica_expedicoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`codigo` varchar(12)  NOT NULL,`expedicao_tipo` enum('PLOTTER','ESTOQUE')  NOT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`logistica_expedicao_status_id` bigint unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`funcionario_registro_id` int unsigned NOT NULL,`funcionario_logistica_id` int unsigned DEFAULT NULL,`funcionario_recebimento_id` int unsigned DEFAULT NULL,`nome_recebedor` varchar(255)  DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `lelesi` (`logistica_expedicao_status_id`),KEY `leci` (`concessionaria_id`),KEY `lefrgi` (`funcionario_registro_id`),KEY `leflgi` (`funcionario_logistica_id`),KEY `lefrci` (`funcionario_recebimento_id`),CONSTRAINT `leci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `leflgi` FOREIGN KEY (`funcionario_logistica_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `lefrci` FOREIGN KEY (`funcionario_recebimento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `lefrgi` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `lelesi` FOREIGN KEY (`logistica_expedicao_status_id`) REFERENCES `logistica_expedicao_statuses` (`id`) );CREATE TABLE `malotes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) NOT NULL DEFAULT '0.00',`recebido` tinyint(1) NOT NULL DEFAULT '0',`data_recebimento` datetime DEFAULT NULL,`verificado` tinyint(1) NOT NULL DEFAULT '0',`data_verificacao` datetime DEFAULT NULL,`usuario_verificacao_id` int unsigned DEFAULT NULL,`codigo` varchar(30)  NOT NULL,`caixa_concessionaria` tinyint(1) NOT NULL DEFAULT '0',`concessionaria_id` int unsigned DEFAULT NULL,`usuario_logistica_id` int unsigned NOT NULL,`usuario_recebimento_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `malotes_usuario_logistica_id_foreign` (`usuario_logistica_id`),KEY `malotes_usuario_recebimento_id_foreign` (`usuario_recebimento_id`),KEY `malotes_concessionaria_id_foreign` (`concessionaria_id`),KEY `malotes_usuario_verificacao_id_foreign` (`usuario_verificacao_id`),CONSTRAINT `malotes_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `malotes_usuario_logistica_id_foreign` FOREIGN KEY (`usuario_logistica_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `malotes_usuario_recebimento_id_foreign` FOREIGN KEY (`usuario_recebimento_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `malotes_usuario_verificacao_id_foreign` FOREIGN KEY (`usuario_verificacao_id`) REFERENCES `usuarios` (`id`));CREATE TABLE `medidas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`sigla` varchar(3)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `migrations` (`migration` varchar(255)  NOT NULL,`batch` int NOT NULL,PRIMARY KEY (`migration`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_unicode_ci;CREATE TABLE `modulos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`index` varchar(30)  NOT NULL,`classe` varchar(30)  NOT NULL DEFAULT 'padrao',`v3` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `nf_devolucao_itens` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`motivo_devolucao` text DEFAULT NULL,`codigo` varchar(60)  NOT NULL,`descricao` varchar(120)  NOT NULL,`quantidade` decimal(8,4) NOT NULL,`medida` varchar(6)  NOT NULL,`valor_unitario` decimal(8,4) unsigned NOT NULL,`ncm` varchar(8)  NOT NULL,`cfop` varchar(4)  NOT NULL,`cst` varchar(3)  NOT NULL,`valor_ipi` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`aliquota_ipi` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_icms` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`aliquota_icms` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`base_calculo_icms` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_icms_st` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_total` decimal(10,4) unsigned NOT NULL DEFAULT '0.0000',`valor_frete` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_seguro` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`porcentagem_devolucao` int unsigned NOT NULL DEFAULT '100',`origem` enum('NACIONAL','IMPORTADO')  NOT NULL DEFAULT 'NACIONAL',`nota_fiscal_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `nf_devolucao_itens_nota_fiscal_id_foreign` (`nota_fiscal_id`),CONSTRAINT `nf_devolucao_itens_nota_fiscal_id_foreign` FOREIGN KEY (`nota_fiscal_id`) REFERENCES `notas_fiscais` (`id`) );CREATE TABLE `nota_fiscal_statuses` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `nota_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `notas_fiscais` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_bruto` decimal(8,2) NOT NULL,`valor_liquido` decimal(8,2) NOT NULL,`retencao_iss` tinyint(1) NOT NULL DEFAULT '0',`data_emissao` datetime DEFAULT NULL,`tipo_nota` varchar(2) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci NOT NULL,`serie` int NOT NULL DEFAULT '1',`bancotoyota` tinyint(1) NOT NULL DEFAULT '0',`numero_nota` varchar(100)  DEFAULT NULL,`chave_nota` varchar(100)  DEFAULT NULL,`numero_registro` varchar(100)  DEFAULT NULL,`status_nota` int unsigned NOT NULL,`danfe_emitida` int NOT NULL DEFAULT '0',`email_enviado` tinyint(1) NOT NULL DEFAULT '0',`url_danfe` varchar(150)  DEFAULT NULL,`resposta_erro` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`motivo_cancelamento` text DEFAULT NULL,`devolvida` tinyint(1) NOT NULL DEFAULT '0',`data_devolucao` datetime DEFAULT NULL,`solicitado_devolucao` tinyint(1) NOT NULL DEFAULT '0',`cancelamento_extemporaneo` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento_extemporaneo` datetime DEFAULT NULL,`solicitado_cancelamento_extemporaneo` tinyint(1) NOT NULL DEFAULT '0',`observacao_devolucao` varchar(255)  DEFAULT NULL,`devolucao_pelo_cliente` tinyint(1) NOT NULL DEFAULT '0',`chave_nfe_referencia` varchar(44)  DEFAULT NULL,`chave_cte_referencia` varchar(44)  DEFAULT NULL,`observacao` text DEFAULT NULL,`info_adicional` text DEFAULT NULL,`natureza_operacao` varchar(255)  DEFAULT NULL,`boleto_emitido` tinyint(1) NOT NULL DEFAULT '0',`url_boleto` varchar(255)  DEFAULT NULL,`data_emissao_boleto` datetime DEFAULT NULL,`data_vencimento_boleto` datetime DEFAULT NULL,`boleto_registrado` tinyint(1) NOT NULL DEFAULT '0',`data_registro_boleto` datetime DEFAULT NULL,`lancado_moneycare` tinyint(1) NOT NULL DEFAULT '0',`data_lancamento_moneycare` datetime DEFAULT NULL,`os_id` int unsigned DEFAULT NULL,`cortesia_id` int unsigned DEFAULT NULL,`fornecedor_id` int unsigned DEFAULT NULL,`parent_id` int unsigned DEFAULT NULL,`boleto_remessa_id` bigint unsigned DEFAULT NULL,`empresa_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `notas_fiscais_os_id_foreign` (`os_id`),KEY `notas_fiscais_cortesia_id_foreign` (`cortesia_id`),KEY `notas_fiscais_empresa_id_foreign` (`empresa_id`),KEY `notas_fiscais_fornecedor_id_foreign` (`fornecedor_id`),KEY `notas_fiscais_boleto_remessa_id_foreign` (`boleto_remessa_id`),KEY `notas_fiscais_tipo_nota_index` (`tipo_nota`),KEY `notas_fiscais_numero_nota_index` (`numero_nota`),KEY `notas_fiscais_cancelada_index` (`cancelada`),KEY `notas_fiscais_status_nota_index` (`status_nota`),KEY `notas_fiscais_resposta_erro_index` (`resposta_erro`(768)),KEY `notas_fiscais_chave_nota_index` (`chave_nota`),KEY `notas_fiscais_parent_id_foreign` (`parent_id`),CONSTRAINT `notas_fiscais_boleto_remessa_id_foreign` FOREIGN KEY (`boleto_remessa_id`) REFERENCES `boleto_remessas` (`id`),CONSTRAINT `notas_fiscais_cortesia_id_foreign` FOREIGN KEY (`cortesia_id`) REFERENCES `cortesias` (`id`),CONSTRAINT `notas_fiscais_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `notas_fiscais_fornecedor_id_foreign` FOREIGN KEY (`fornecedor_id`) REFERENCES `fornecedores` (`id`),CONSTRAINT `notas_fiscais_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `notas_fiscais_parent_id_foreign` FOREIGN KEY (`parent_id`) REFERENCES `notas_fiscais` (`id`),CONSTRAINT `notas_fiscais_status_nota_foreign` FOREIGN KEY (`status_nota`) REFERENCES `nota_fiscal_statuses` (`id`));CREATE TABLE `observacao_sugerida_departamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`observacao_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `observacao_sugerida_departamentos_observacao_id_foreign` (`observacao_id`),KEY `observacao_sugerida_departamentos_departamento_id_foreign` (`departamento_id`),CONSTRAINT `observacao_sugerida_departamentos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `observacao_sugerida_departamentos_observacao_id_foreign` FOREIGN KEY (`observacao_id`) REFERENCES `observacoes_sugeridas` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 120° até 130º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `observacoes_sugeridas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`texto` text  NOT NULL,`veiculo` tinyint(1) NOT NULL,`chassi` tinyint(1) NOT NULL,`servicos` tinyint(1) NOT NULL,`concessionaria` tinyint(1) NOT NULL,`departamento` tinyint(1) NOT NULL,`observacao_tipo` int NOT NULL,`concessionaria_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `observacoes_sugeridas_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `observacoes_sugeridas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`) );CREATE TABLE `ordem_compra_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` text  NOT NULL,`ordem_compra_status_original_id` bigint unsigned NOT NULL,`ordem_compra_status_id` bigint unsigned NOT NULL,`ordem_compra_id` bigint unsigned NOT NULL,`funcionario_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ochocsoi` (`ordem_compra_status_original_id`),KEY `ochocsi` (`ordem_compra_status_id`),KEY `ochoci` (`ordem_compra_id`),KEY `ochfi` (`funcionario_id`),CONSTRAINT `ochfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `ochoci` FOREIGN KEY (`ordem_compra_id`) REFERENCES `ordens_compras` (`id`),CONSTRAINT `ochocsi` FOREIGN KEY (`ordem_compra_status_id`) REFERENCES `ordem_compra_status` (`id`),CONSTRAINT `ochocsoi` FOREIGN KEY (`ordem_compra_status_original_id`) REFERENCES `ordem_compra_status` (`id`) );CREATE TABLE `ordem_compra_produtos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`quantidade` int unsigned NOT NULL,`quantidade_antecipacao` int NOT NULL DEFAULT '0',`quantidade_antecipada` int NOT NULL DEFAULT '0',`quantidade_pendente` int GENERATED ALWAYS AS (((`quantidade` - `quantidade_antecipacao`) - `quantidade_antecipada`)) VIRTUAL,`valor_unitario` decimal(8,2) unsigned NOT NULL,`editado_entrega` tinyint(1) NOT NULL DEFAULT '0',`produto_id` int unsigned NOT NULL,`produto_tamanho_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`ordem_compra_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ocppi` (`produto_id`),KEY `ocppti` (`produto_tamanho_id`),KEY `ocpoci` (`ordem_compra_id`),KEY `ordem_compra_produtos_tonalidade_id_foreign` (`tonalidade_id`),KEY `ordem_compra_produtos_carro_modelo_id_foreign` (`carro_modelo_id`),CONSTRAINT `ocpoci` FOREIGN KEY (`ordem_compra_id`) REFERENCES `ordens_compras` (`id`),CONSTRAINT `ocppi` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `ocppti` FOREIGN KEY (`produto_tamanho_id`) REFERENCES `produto_tamanhos` (`id`),CONSTRAINT `ordem_compra_produtos_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `ordem_compra_produtos_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`) );CREATE TABLE `ordem_compra_status` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `ordem_deposito_caixas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`caixa_id` int unsigned NOT NULL,`ordem_deposito_id` int unsigned NOT NULL,`devolvido` tinyint(1) NOT NULL DEFAULT '0',`data_devolucao` datetime DEFAULT NULL,`inadimplente` tinyint(1) NOT NULL DEFAULT '0',`data_inadimplencia` datetime DEFAULT NULL,`recuperado` tinyint(1) NOT NULL DEFAULT '0',`data_resgate` datetime DEFAULT NULL,`observacao_resgate` text DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ordem_deposito_caixas_caixa_id_foreign` (`caixa_id`),KEY `ordem_deposito_caixas_ordem_deposito_id_foreign` (`ordem_deposito_id`),CONSTRAINT `ordem_deposito_caixas_caixa_id_foreign` FOREIGN KEY (`caixa_id`) REFERENCES `caixas` (`id`),CONSTRAINT `ordem_deposito_caixas_ordem_deposito_id_foreign` FOREIGN KEY (`ordem_deposito_id`) REFERENCES `ordens_deposito` (`id`) );CREATE TABLE `ordem_servico_servico_descontos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_servico` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_desconto` decimal(8,2) NOT NULL DEFAULT '0.00',`observacao` text DEFAULT NULL,`os_servico_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ordem_servico_servico_descontos_os_servico_id_foreign` (`os_servico_id`),KEY `ordem_servico_servico_descontos_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `ordem_servico_servico_descontos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `ordem_servico_servico_descontos_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`) );CREATE TABLE `ordens_compras` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`proposta_compra_id` bigint unsigned DEFAULT NULL,`estoque_id` int unsigned NOT NULL,`fornecedor_id` int unsigned NOT NULL,`ordem_compra_status_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ocei` (`estoque_id`),KEY `ocfi` (`fornecedor_id`),KEY `ococsi` (`ordem_compra_status_id`),CONSTRAINT `ocei` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `ocfi` FOREIGN KEY (`fornecedor_id`) REFERENCES `fornecedores` (`id`),CONSTRAINT `ococsi` FOREIGN KEY (`ordem_compra_status_id`) REFERENCES `ordem_compra_status` (`id`) );CREATE TABLE `ordens_deposito` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) NOT NULL DEFAULT '0.00',`saida` tinyint(1) NOT NULL DEFAULT '1',`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`justificativa_cancelamento` text DEFAULT NULL,`usuario_cadastro_id` int unsigned NOT NULL,`usuario_cancelamento_id` int unsigned DEFAULT NULL,`factory_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ordens_deposito_usuario_cadastro_id_foreign` (`usuario_cadastro_id`),KEY `ordens_deposito_usuario_cancelamento_id_foreign` (`usuario_cancelamento_id`),KEY `ordens_deposito_factory_id_foreign` (`factory_id`),CONSTRAINT `ordens_deposito_factory_id_foreign` FOREIGN KEY (`factory_id`) REFERENCES `factories` (`id`),CONSTRAINT `ordens_deposito_usuario_cadastro_id_foreign` FOREIGN KEY (`usuario_cadastro_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `ordens_deposito_usuario_cancelamento_id_foreign` FOREIGN KEY (`usuario_cancelamento_id`) REFERENCES `usuarios` (`id`) );CREATE TABLE `os` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_concessionaria` int unsigned NOT NULL,`tipo_atendimento` enum('PRESENCIAL','TELEFONE','WHATSAPP')  DEFAULT NULL,`valor_bruto` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`valor_liquido` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`retencao_iss` tinyint(1) NOT NULL DEFAULT '0',`paga` tinyint(1) NOT NULL DEFAULT '0',`data_pagamento` datetime DEFAULT NULL,`observacao_pagamento` text DEFAULT NULL,`usuario_pagamento_id` int unsigned DEFAULT NULL,`fechada` tinyint(1) NOT NULL DEFAULT '0',`data_fechamento` datetime DEFAULT NULL,`finalizada` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`motivo_cancelamento` text DEFAULT NULL,`cancelamento_recusado` tinyint(1) DEFAULT NULL,`data_recusa_cancelamento` datetime DEFAULT NULL,`cancelamento_motivo_id` int unsigned DEFAULT NULL,`contato_cliente_cancelamento` tinyint(1) DEFAULT NULL,`descricao_contato_cancelamento` text DEFAULT NULL,`os_retorno` tinyint(1) NOT NULL DEFAULT '0',`atendimento_telefonico` tinyint(1) NOT NULL DEFAULT '0',`nota_solicitada` tinyint(1) NOT NULL DEFAULT '0',`nota_solicitada_motivo` varchar(255)  DEFAULT NULL,`data_solicitacao_nfe` datetime DEFAULT NULL,`nota_aprovada` tinyint(1) NOT NULL DEFAULT '0',`data_aprovacao_nfe` datetime DEFAULT NULL,`usuario_aprovacao_nfe_id` int unsigned DEFAULT NULL,`cep` varchar(8)  DEFAULT NULL,`logradouro` varchar(80)  DEFAULT NULL,`bairro` varchar(80)  DEFAULT NULL,`localidade` varchar(80)  DEFAULT NULL,`uf` char(2)  DEFAULT NULL,`numero` int DEFAULT NULL,`complemento` varchar(50)  DEFAULT NULL,`data_entrega` datetime DEFAULT NULL,`data_edicao_entrega` datetime DEFAULT NULL,`entrega_confirmada` tinyint(1) NOT NULL DEFAULT '0',`data_confirmacao_entrega` datetime DEFAULT NULL,`execucao_mesmo_dia` tinyint(1) NOT NULL DEFAULT '0',`email_garantia_enviado` tinyint(1) NOT NULL DEFAULT '0',`data_envio_garantia` datetime DEFAULT NULL,`observacao_os` text DEFAULT NULL,`observacao_producao` text DEFAULT NULL,`observacao_nf` text DEFAULT NULL,`justificada_concessionaria` tinyint(1) NOT NULL DEFAULT '0',`desconto_Avista` tinyint(1) NOT NULL DEFAULT '0',`confirmar_retem_iss` tinyint(1) NOT NULL DEFAULT '0',`cortesia_migrada` tinyint(1) NOT NULL DEFAULT '0',`data_migracao_cortesia` date DEFAULT NULL,`nome_responsavel_pj` varchar(255)  DEFAULT NULL,`cpf_responsavel_pj` varchar(14)  DEFAULT NULL,`nivel_indicador1` int unsigned DEFAULT NULL,`nivel_indicador2` int unsigned DEFAULT NULL,`indicador1_id` int unsigned DEFAULT NULL,`indicador2_id` int unsigned DEFAULT NULL,`departamento_id` int unsigned NOT NULL,`vendedor_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`cliente_carro_id` int unsigned NOT NULL,`cliente_id` int unsigned NOT NULL,`os_tipo_id` int unsigned NOT NULL,`proposta_id` int unsigned DEFAULT NULL,`pre_proposta_id` bigint unsigned DEFAULT NULL,`os_retorno_id` int unsigned DEFAULT NULL,`os_migracao_cortesia_id` int DEFAULT NULL,`usuario_recusa_cancelamento_id` int unsigned DEFAULT NULL,`funcionario_confirmacao_entrega_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`id_antigo` int DEFAULT NULL,`usuario_atendimento_cancelamento_id` int unsigned DEFAULT NULL,`justificativa_supervisao` int DEFAULT NULL,`justificativa_supervisao_usuario_id` int DEFAULT NULL,`justificativa_supervisao_texto` text DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_indicador1_id_foreign` (`indicador1_id`),KEY `os_indicador2_id_foreign` (`indicador2_id`),KEY `os_departamento_id_foreign` (`departamento_id`),KEY `os_concessionaria_id_foreign` (`concessionaria_id`),KEY `os_cliente_carro_id_foreign` (`cliente_carro_id`),KEY `os_cliente_id_foreign` (`cliente_id`),KEY `os_os_tipo_id_foreign` (`os_tipo_id`),KEY `os_os_retorno_id_foreign` (`os_retorno_id`),KEY `os_cancelamento_motivo_id_foreign` (`cancelamento_motivo_id`),KEY `os_vendedor_id_foreign` (`vendedor_id`),KEY `os_usuario_aprovacao_nfe_id_foreign` (`usuario_aprovacao_nfe_id`),KEY `os_usuario_recusa_cancelamento_id_foreign` (`usuario_recusa_cancelamento_id`),KEY `os_usuario_atendimento_cancelamento_id_foreign` (`usuario_atendimento_cancelamento_id`),KEY `os_usuario_pagamento_id_foreign` (`usuario_pagamento_id`),KEY `os_migracao_cortesia_id_index` (`os_migracao_cortesia_id`),KEY `os_proposta_id_foreign` (`proposta_id`),KEY `os_pre_proposta_id_foreign` (`pre_proposta_id`),KEY `os_paga` (`paga`),KEY `os_cancelada` (`cancelada`),KEY `os_data_pagamento` (`data_pagamento`),KEY `os_data_cancelamento` (`data_cancelamento`),KEY `os_created_at` (`created_at`),KEY `os_deleted_at` (`deleted_at`),KEY `os.data_entrega` (`data_entrega`),KEY `os_fechada` (`fechada`),KEY `produtividade` (`deleted_at`,`cancelada`,`concessionaria_id`),KEY `os_funcionario_confirmacao_entrega_id_foreign` (`funcionario_confirmacao_entrega_id`),CONSTRAINT `os_cancelamento_motivo_id_foreign` FOREIGN KEY (`cancelamento_motivo_id`) REFERENCES `cancelamento_motivos` (`id`),CONSTRAINT `os_cliente_carro_id_foreign` FOREIGN KEY (`cliente_carro_id`) REFERENCES `cliente_carros` (`id`),CONSTRAINT `os_cliente_id_foreign` FOREIGN KEY (`cliente_id`) REFERENCES `clientes` (`id`),CONSTRAINT `os_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `os_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `os_funcionario_confirmacao_entrega_id_foreign` FOREIGN KEY (`funcionario_confirmacao_entrega_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_indicador1_id_foreign` FOREIGN KEY (`indicador1_id`) REFERENCES `indicadores` (`id`),CONSTRAINT `os_indicador2_id_foreign` FOREIGN KEY (`indicador2_id`) REFERENCES `indicadores` (`id`),CONSTRAINT `os_os_retorno_id_foreign` FOREIGN KEY (`os_retorno_id`) REFERENCES `os` (`id`),CONSTRAINT `os_os_tipo_id_foreign` FOREIGN KEY (`os_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `os_pre_proposta_id_foreign` FOREIGN KEY (`pre_proposta_id`) REFERENCES `pre_propostas` (`id`),CONSTRAINT `os_proposta_id_foreign` FOREIGN KEY (`proposta_id`) REFERENCES `propostas` (`id`),CONSTRAINT `os_usuario_aprovacao_nfe_id_foreign` FOREIGN KEY (`usuario_aprovacao_nfe_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_usuario_atendimento_cancelamento_id_foreign` FOREIGN KEY (`usuario_atendimento_cancelamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_usuario_pagamento_id_foreign` FOREIGN KEY (`usuario_pagamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_usuario_recusa_cancelamento_id_foreign` FOREIGN KEY (`usuario_recusa_cancelamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `os_bonus_classificacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`classificacao` tinyint unsigned NOT NULL,`os_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_bonus_classificacoes_os_id_foreign` (`os_id`),KEY `os_bonus_classificacoes_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `os_bonus_classificacoes_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_bonus_classificacoes_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, da 130° até 140º?"
            },
            {
                "role": "assistant",
                "content": "CREATE TABLE `os_bonus_observacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`observacao` text  NOT NULL,`os_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_bonus_observacoes_os_id_foreign` (`os_id`),KEY `os_bonus_observacoes_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `os_bonus_observacoes_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_bonus_observacoes_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`));CREATE TABLE `os_bonuses` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`valor` decimal(8,2) unsigned NOT NULL,`utilizado` tinyint(1) NOT NULL DEFAULT '0',`data_utilizacao` datetime DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`crmbonus_bonus_id` int unsigned NOT NULL,`crmbonus_campanha_id` int unsigned NOT NULL,`crmbonus_order_id` int unsigned NOT NULL,`os_id` int unsigned NOT NULL,`cliente_id` int unsigned NOT NULL,`os_utilizacao_id` int unsigned DEFAULT NULL,`os_servico_utilizacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_bonuses_os_id_foreign` (`os_id`),KEY `os_bonuses_cliente_id_foreign` (`cliente_id`),KEY `os_bonuses_os_utilizacao_id_foreign` (`os_utilizacao_id`),KEY `os_bonuses_os_servico_utilizacao_id_foreign` (`os_servico_utilizacao_id`),CONSTRAINT `os_bonuses_cliente_id_foreign` FOREIGN KEY (`cliente_id`) REFERENCES `clientes` (`id`),CONSTRAINT `os_bonuses_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `os_bonuses_os_servico_utilizacao_id_foreign` FOREIGN KEY (`os_servico_utilizacao_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `os_bonuses_os_utilizacao_id_foreign` FOREIGN KEY (`os_utilizacao_id`) REFERENCES `os` (`id`));CREATE TABLE `os_codigos_rastreio` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_id` int unsigned NOT NULL,`codigo_rastreio` varchar(32)  NOT NULL,`quant_parcelas` int DEFAULT NULL,`paga` tinyint(1) NOT NULL DEFAULT '0',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_codigos_rastreio_os_id_foreign` (`os_id`),CONSTRAINT `os_codigos_rastreio_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `os_concessionaria_alteracoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`motivo` text DEFAULT NULL,`aprovado` tinyint(1) NOT NULL DEFAULT '0',`data_aprovacao` datetime DEFAULT NULL,`nivel_indicador1` int unsigned DEFAULT NULL,`nivel_indicador2` int unsigned DEFAULT NULL,`os_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`indicador1_id` int unsigned DEFAULT NULL,`indicador2_id` int unsigned DEFAULT NULL,`funcionario_requisicao_id` int unsigned NOT NULL,`funcionario_aprovacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_concessionaria_alteracoes_os_id_foreign` (`os_id`),KEY `os_concessionaria_alteracoes_concessionaria_id_foreign` (`concessionaria_id`),KEY `os_concessionaria_alteracoes_indicador1_id_foreign` (`indicador1_id`),KEY `os_concessionaria_alteracoes_indicador2_id_foreign` (`indicador2_id`),KEY `os_concessionaria_alteracoes_funcionario_requisicao_id_foreign` (`funcionario_requisicao_id`),KEY `os_concessionaria_alteracoes_funcionario_aprovacao_id_foreign` (`funcionario_aprovacao_id`),CONSTRAINT `os_concessionaria_alteracoes_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `os_concessionaria_alteracoes_funcionario_aprovacao_id_foreign` FOREIGN KEY (`funcionario_aprovacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_concessionaria_alteracoes_funcionario_requisicao_id_foreign` FOREIGN KEY (`funcionario_requisicao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_concessionaria_alteracoes_indicador1_id_foreign` FOREIGN KEY (`indicador1_id`) REFERENCES `indicadores` (`id`),CONSTRAINT `os_concessionaria_alteracoes_indicador2_id_foreign` FOREIGN KEY (`indicador2_id`) REFERENCES `indicadores` (`id`),CONSTRAINT `os_concessionaria_alteracoes_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `os_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` text  NOT NULL,`os_id` int unsigned NOT NULL,`funcionario_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_historicos_os_id_foreign` (`os_id`),KEY `os_historicos_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `os_historicos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_historicos_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `os_justificativa_pendencia` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_id` int unsigned NOT NULL,`funcionario_id` int unsigned NOT NULL,`justificativa` text  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_justificativa_pendencia_os_id_foreign` (`os_id`),KEY `os_justificativa_pendencia_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `os_justificativa_pendencia_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_justificativa_pendencia_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `os_justificativas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`justificativa` text  NOT NULL,`os_id` int unsigned NOT NULL,`vendedor_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_justificativas_os_id_foreign` (`os_id`),KEY `os_justificativas_vendedor_id_foreign` (`vendedor_id`),CONSTRAINT `os_justificativas_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `os_justificativas_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `os_mudanca_tipo` (`id` int unsigned NOT NULL AUTO_INCREMENT,`solicitado_por` int unsigned DEFAULT NULL,`data_solicitado` datetime DEFAULT NULL,`atendido_por` int unsigned DEFAULT NULL,`data_atendimento` datetime DEFAULT NULL,`justificativa_solicitacao` text  NOT NULL,`aprovado` tinyint(1) NOT NULL DEFAULT '0',`recusado` tinyint(1) NOT NULL DEFAULT '0',`houve_estorno` tinyint(1) DEFAULT NULL,`os_id` int unsigned NOT NULL,`antigo_tipo_id` int unsigned NOT NULL,`novo_tipo_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_mudanca_tipo_os_id_foreign` (`os_id`),KEY `os_mudanca_tipo_antigo_tipo_id_foreign` (`antigo_tipo_id`),KEY `os_mudanca_tipo_novo_tipo_id_foreign` (`novo_tipo_id`),KEY `os_mudanca_tipo_solicitado_por_foreign` (`solicitado_por`),KEY `os_mudanca_tipo_atendido_por_foreign` (`atendido_por`),CONSTRAINT `os_mudanca_tipo_antigo_tipo_id_foreign` FOREIGN KEY (`antigo_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `os_mudanca_tipo_atendido_por_foreign` FOREIGN KEY (`atendido_por`) REFERENCES `usuarios` (`id`),CONSTRAINT `os_mudanca_tipo_novo_tipo_id_foreign` FOREIGN KEY (`novo_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `os_mudanca_tipo_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `os_mudanca_tipo_solicitado_por_foreign` FOREIGN KEY (`solicitado_por`) REFERENCES `usuarios` (`id`) );CREATE TABLE `os_reabertura_servicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` varchar(255)  DEFAULT NULL,`os_reabertura_id` bigint unsigned NOT NULL,`os_servico_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_reabertura_servicos_os_reabertura_id_foreign` (`os_reabertura_id`),KEY `os_reabertura_servicos_os_servico_id_foreign` (`os_servico_id`),CONSTRAINT `os_reabertura_servicos_os_reabertura_id_foreign` FOREIGN KEY (`os_reabertura_id`) REFERENCES `os_reaberturas` (`id`),CONSTRAINT `os_reabertura_servicos_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`) );CREATE TABLE `os_reaberturas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`justificativa` text  NOT NULL,`aprovado` tinyint(1) NOT NULL DEFAULT '0',`data_aprovacao` datetime DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` varchar(255)  DEFAULT NULL,`os_id` int unsigned NOT NULL,`funcionario_requisitante_id` int unsigned NOT NULL,`funcionario_finalizacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_reaberturas_os_id_foreign` (`os_id`),KEY `os_reaberturas_funcionario_requisitante_id_foreign` (`funcionario_requisitante_id`),KEY `os_reaberturas_funcionario_finalizacao_id_foreign` (`funcionario_finalizacao_id`),CONSTRAINT `os_reaberturas_funcionario_finalizacao_id_foreign` FOREIGN KEY (`funcionario_finalizacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_reaberturas_funcionario_requisitante_id_foreign` FOREIGN KEY (`funcionario_requisitante_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_reaberturas_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`) );CREATE TABLE `os_retorno_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_retorno_id` int unsigned NOT NULL,`os_servico_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `orsori` (`os_retorno_id`),KEY `orsosi` (`os_servico_id`),KEY `orssi` (`servico_id`),CONSTRAINT `orsori` FOREIGN KEY (`os_retorno_id`) REFERENCES `os_retornos` (`id`),CONSTRAINT `orsosi` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `orssi` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 140° a 150º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `os_retornos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`descricao` text DEFAULT NULL,`data_solicitacao` timestamp,`data_aprovacao` datetime DEFAULT NULL,`data_recusa` datetime DEFAULT NULL,`os_origem_id` int unsigned NOT NULL,`os_destino_id` int unsigned DEFAULT NULL,`retorno_motivo_id` int unsigned NOT NULL,`retorno_classificacao_id` int unsigned DEFAULT NULL,`usuario_solicitacao_id` int unsigned NOT NULL,`usuario_aprovacao_id` int unsigned DEFAULT NULL,`usuario_recusa_id` int unsigned DEFAULT NULL,`aprovado` tinyint(1) NOT NULL DEFAULT '0',`recusado` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `orooi` (`os_origem_id`),KEY `orodi` (`os_destino_id`),KEY `orrmi` (`retorno_motivo_id`),KEY `orusi` (`usuario_solicitacao_id`),KEY `oruai` (`usuario_aprovacao_id`),KEY `oruri` (`usuario_recusa_id`),KEY `os_retornos_retorno_classificacao_id_foreign` (`retorno_classificacao_id`),CONSTRAINT `orodi` FOREIGN KEY (`os_destino_id`) REFERENCES `os` (`id`),CONSTRAINT `orooi` FOREIGN KEY (`os_origem_id`) REFERENCES `os` (`id`),CONSTRAINT `orrmi` FOREIGN KEY (`retorno_motivo_id`) REFERENCES `retorno_motivos` (`id`),CONSTRAINT `oruai` FOREIGN KEY (`usuario_aprovacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `oruri` FOREIGN KEY (`usuario_recusa_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `orusi` FOREIGN KEY (`usuario_solicitacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_retornos_retorno_classificacao_id_foreign` FOREIGN KEY (`retorno_classificacao_id`) REFERENCES `retorno_classificacoes` (`id`) );CREATE TABLE `os_servico_prefechamento_produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`os_servico_prefechamento_id` int unsigned NOT NULL,`estoque_entrada_produto_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`codigo` varchar(255)  NOT NULL,PRIMARY KEY (`id`),KEY `osppospi` (`os_servico_prefechamento_id`),KEY `osppeepi` (`estoque_entrada_produto_id`),CONSTRAINT `osppeepi` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`),CONSTRAINT `osppospi` FOREIGN KEY (`os_servico_prefechamento_id`) REFERENCES `os_servico_prefechamentos` (`id`));CREATE TABLE `os_servico_prefechamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` varchar(255)  DEFAULT NULL,`os_id` int unsigned NOT NULL,`os_servico_id` int unsigned NOT NULL,`produtivo_id` int unsigned NOT NULL,`usuario_registro_id` int unsigned NOT NULL,`usuario_finalizacao_id` int unsigned DEFAULT NULL,`usuario_cancelamento_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ospoi` (`os_id`),KEY `osposi` (`os_servico_id`),KEY `osppi` (`produtivo_id`),KEY `ospuri` (`usuario_registro_id`),KEY `ospufi` (`usuario_finalizacao_id`),KEY `ospuci` (`usuario_cancelamento_id`),CONSTRAINT `ospoi` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `osposi` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `osppi` FOREIGN KEY (`produtivo_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `ospuci` FOREIGN KEY (`usuario_cancelamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `ospufi` FOREIGN KEY (`usuario_finalizacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `ospuri` FOREIGN KEY (`usuario_registro_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `os_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`codigo` varchar(255)  DEFAULT NULL,`valor_venda` decimal(8,2) NOT NULL,`valor_original` decimal(8,2) NOT NULL,`desconto_supervisao` decimal(8,2) NOT NULL DEFAULT '0.00',`desconto_migracao_cortesia` decimal(8,2) NOT NULL DEFAULT '0.00',`desconto_avista` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_venda_real` decimal(8,2) GENERATED ALWAYS AS (if((`os_tipo_id` = 5),`valor_original`,(((`valor_venda` - `desconto_supervisao`) - `desconto_migracao_cortesia`) - `desconto_avista`))) VIRTUAL,`desconto_bonus` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`fechado` tinyint(1) NOT NULL DEFAULT '0',`codigo_fechamento` varchar(35)  NOT NULL,`data_fechamento` datetime DEFAULT NULL,`fechado_sem_codigo` tinyint(1) NOT NULL DEFAULT '0',`justificativa_sem_codigo` text DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`token_segunda_aplicacao` varchar(255)  DEFAULT NULL,`executada_segunda_aplicacao` tinyint(1) NOT NULL DEFAULT '0',`ordem_pcp` int unsigned DEFAULT NULL,`os_id` int unsigned NOT NULL,`os_tipo_id` int unsigned DEFAULT NULL,`servico_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`combo_id` int unsigned DEFAULT NULL,`produtivo_id` int unsigned DEFAULT NULL,`concessionaria_execucao_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`plotter_corte_id` int unsigned DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_servicos_os_id_foreign` (`os_id`),KEY `os_servicos_servico_id_foreign` (`servico_id`),KEY `os_servicos_tonalidade_id_foreign` (`tonalidade_id`),KEY `os_servicos_combo_id_foreign` (`combo_id`),KEY `os_servicos_produtivo_id_foreign` (`produtivo_id`),KEY `os_servicos_plotter_corte_id_foreign` (`plotter_corte_id`),KEY `os_servico_fechado` (`fechado`),KEY `os_servico_cancelado` (`cancelado`),KEY `os_servicos_deleted_at` (`deleted_at`),KEY `produtividade` (`deleted_at`,`fechado`,`cancelado`,`data_fechamento`),KEY `oscei` (`concessionaria_execucao_id`),KEY `os_servicos_os_tipo_id_foreign` (`os_tipo_id`),CONSTRAINT `os_servicos_combo_id_foreign` FOREIGN KEY (`combo_id`) REFERENCES `combos` (`id`),CONSTRAINT `os_servicos_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `os_servicos_os_tipo_id_foreign` FOREIGN KEY (`os_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `os_servicos_plotter_corte_id_foreign` FOREIGN KEY (`plotter_corte_id`) REFERENCES `plotter_cortes` (`id`),CONSTRAINT `os_servicos_produtivo_id_foreign` FOREIGN KEY (`produtivo_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `os_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),CONSTRAINT `os_servicos_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`),CONSTRAINT `oscei` FOREIGN KEY (`concessionaria_execucao_id`) REFERENCES `concessionarias` (`id`));CREATE TABLE `os_servicos_lembrete_carro_modelos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`lembrete_id` int unsigned NOT NULL,`carro_modelo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_servicos_lembrete_carro_modelos_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `os_servicos_lembrete_carro_modelos_lembrete_id_foreign` (`lembrete_id`),CONSTRAINT `os_servicos_lembrete_carro_modelos_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `os_servicos_lembrete_carro_modelos_lembrete_id_foreign` FOREIGN KEY (`lembrete_id`) REFERENCES `os_servicos_lembretes` (`id`) );CREATE TABLE `os_servicos_lembrete_concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`lembrete_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_servicos_lembrete_concessionarias_concessionaria_id_foreign` (`concessionaria_id`),KEY `os_servicos_lembrete_concessionarias_lembrete_id_foreign` (`lembrete_id`),CONSTRAINT `os_servicos_lembrete_concessionarias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `os_servicos_lembrete_concessionarias_lembrete_id_foreign` FOREIGN KEY (`lembrete_id`) REFERENCES `os_servicos_lembretes` (`id`) );CREATE TABLE `os_servicos_lembrete_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`lembrete_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `os_servicos_lembrete_servicos_servico_id_foreign` (`servico_id`),KEY `os_servicos_lembrete_servicos_lembrete_id_foreign` (`lembrete_id`),CONSTRAINT `os_servicos_lembrete_servicos_lembrete_id_foreign` FOREIGN KEY (`lembrete_id`) REFERENCES `os_servicos_lembretes` (`id`),CONSTRAINT `os_servicos_lembrete_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`) );CREATE TABLE `os_servicos_lembretes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`texto` text  NOT NULL,`ativo` tinyint(1) NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `os_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `pcp_agendamento_alteracoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`motivo` text DEFAULT NULL,`data_entrega` datetime NOT NULL,`aprovado` tinyint(1) NOT NULL DEFAULT '0',`data_aprovacao` datetime DEFAULT NULL,`pcp_agendamento_id` bigint unsigned NOT NULL,`funcionario_alteracao_id` int unsigned NOT NULL,`funcionario_aprovacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pcp_agendamento_alteracoes_pcp_agendamento_id_foreign` (`pcp_agendamento_id`),KEY `pcp_agendamento_alteracoes_funcionario_alteracao_id_foreign` (`funcionario_alteracao_id`),KEY `pcp_agendamento_alteracoes_funcionario_aprovacao_id_foreign` (`funcionario_aprovacao_id`),KEY `pcp_agendamento_alteracoes_aprovado` (`aprovado`),CONSTRAINT `pcp_agendamento_alteracoes_funcionario_alteracao_id_foreign` FOREIGN KEY (`funcionario_alteracao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pcp_agendamento_alteracoes_funcionario_aprovacao_id_foreign` FOREIGN KEY (`funcionario_aprovacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pcp_agendamento_alteracoes_pcp_agendamento_id_foreign` FOREIGN KEY (`pcp_agendamento_id`) REFERENCES `pcp_agendamentos` (`id`) );CREATE TABLE `pcp_agendamentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`data_agendamento` datetime DEFAULT NULL,`execucao_mesmo_dia` tinyint(1) NOT NULL DEFAULT '0',`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`vencido` tinyint(1) NOT NULL DEFAULT '0',`data_vencimento` datetime DEFAULT NULL,`observacao` text DEFAULT NULL,`concessionaria_execucao_id` int unsigned DEFAULT NULL,`produtivo_id` int unsigned DEFAULT NULL,`os_servico_id` int unsigned NOT NULL,`funcionario_agendamento_id` int unsigned NOT NULL,`funcionario_finalizacao_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pcp_agendamentos_concessionaria_execucao_id_foreign` (`concessionaria_execucao_id`),KEY `pcp_agendamentos_produtivo_id_foreign` (`produtivo_id`),KEY `pcp_agendamentos_os_servico_id_foreign` (`os_servico_id`),KEY `pcp_agendamentos_funcionario_agendamento_id_foreign` (`funcionario_agendamento_id`),KEY `pcp_agendamentos_funcionario_finalizacao_id_foreign` (`funcionario_finalizacao_id`),KEY `pcp_agendamentos_finalizado` (`finalizado`),KEY `pcp_agendamentos_data_agendamento` (`data_agendamento`),KEY `pcp_agendamentos_deleted_at` (`deleted_at`),CONSTRAINT `pcp_agendamentos_concessionaria_execucao_id_foreign` FOREIGN KEY (`concessionaria_execucao_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `pcp_agendamentos_funcionario_agendamento_id_foreign` FOREIGN KEY (`funcionario_agendamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pcp_agendamentos_funcionario_finalizacao_id_foreign` FOREIGN KEY (`funcionario_finalizacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pcp_agendamentos_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `pcp_agendamentos_produtivo_id_foreign` FOREIGN KEY (`produtivo_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `pix_respostas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`tx_id` varchar(35)  NOT NULL,`conteudo` text  NOT NULL,`verificado` tinyint(1) NOT NULL DEFAULT '0',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 150° a 160º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `plotter_bobinas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`codigo` varchar(30)  NOT NULL,`metros` double(30,2) NOT NULL,`recuperacao` tinyint(1) NOT NULL DEFAULT '0',`finalizada` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`estoque_entrada_produto_id` int unsigned NOT NULL,`estoque_saida_produto_id` int unsigned DEFAULT NULL,`estoque_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_bobinas_estoque_entrada_produto_id_foreign` (`estoque_entrada_produto_id`),KEY `pbei` (`estoque_id`),CONSTRAINT `pbei` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `plotter_bobinas_estoque_entrada_produto_id_foreign` FOREIGN KEY (`estoque_entrada_produto_id`) REFERENCES `estoque_entrada_produtos` (`id`));CREATE TABLE `plotter_corte_pecas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`plotter_corte_id` int unsigned NOT NULL,`plotter_peca_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pcp_pcId` (`plotter_corte_id`),KEY `pcp_ppId` (`plotter_peca_id`),CONSTRAINT `pcp_pcId` FOREIGN KEY (`plotter_corte_id`) REFERENCES `plotter_cortes` (`id`),CONSTRAINT `pcp_ppId` FOREIGN KEY (`plotter_peca_id`) REFERENCES `plotter_pecas` (`id`));CREATE TABLE `plotter_corte_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `plotter_cortes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`codigo` varchar(30)  DEFAULT NULL,`codigo_antigo` varchar(30)  DEFAULT NULL,`metragem_total` decimal(8,2) GENERATED ALWAYS AS ((((ifnull(`metragem`,0) + ifnull(`metragem_secundaria`,0)) + ifnull(`metragem_vidros_traseiros`,0)) + ifnull(`metragem_vidros_frontais`,0))) VIRTUAL,`metragem` decimal(8,2) NOT NULL,`recuperacao` tinyint(1) NOT NULL DEFAULT '0',`finalizado` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`data_solicitacao_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` text DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`duas_portas` tinyint(1) NOT NULL DEFAULT '0',`liberado` tinyint(1) NOT NULL DEFAULT '0',`data_liberacao` datetime DEFAULT NULL,`concessionaria_liberacao_id` int unsigned DEFAULT NULL,`justificativa` text DEFAULT NULL,`credito` int DEFAULT NULL,`usuario_finalizacao_id` int unsigned DEFAULT NULL,`usuario_solicitacao_cancelamento_id` int unsigned DEFAULT NULL,`usuario_cancelamento_id` int unsigned DEFAULT NULL,`usuario_liberacao_id` int unsigned DEFAULT NULL,`metragem_secundaria` decimal(8,2) DEFAULT NULL,`metragem_vidros_traseiros` decimal(8,2) DEFAULT NULL,`metragem_vidros_frontais` decimal(8,2) DEFAULT NULL,`plotter_bobina_secundaria_id` int unsigned DEFAULT NULL,`plotter_bobina_vidros_traseiros_id` int unsigned DEFAULT NULL,`plotter_bobina_vidros_frontais_id` int unsigned DEFAULT NULL,`plotter_corte_tipo_id` int unsigned NOT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`plotter_bobina_id` int unsigned NOT NULL,`os_servico_id` int unsigned DEFAULT NULL,`estoque_id` int unsigned DEFAULT NULL,`user_recuperacao_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_by` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_cortes_usuario_finalizacao_id_foreign` (`usuario_finalizacao_id`),KEY `plotter_cortes_usuario_cancelamento_id_foreign` (`usuario_cancelamento_id`),KEY `plotter_cortes_usuario_liberacao_id_foreign` (`usuario_liberacao_id`),KEY `pc_pbs` (`plotter_bobina_secundaria_id`),KEY `pc_pbvt` (`plotter_bobina_vidros_traseiros_id`),KEY `pc_pbvf` (`plotter_bobina_vidros_frontais_id`),KEY `plotter_cortes_plotter_corte_tipo_id_foreign` (`plotter_corte_tipo_id`),KEY `plotter_cortes_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `plotter_cortes_plotter_bobina_id_foreign` (`plotter_bobina_id`),KEY `plotter_cortes_concessionaria_liberacao_id_foreign` (`concessionaria_liberacao_id`),KEY `plotter_cortes_os_servico_id_foreign` (`os_servico_id`),KEY `pcei` (`estoque_id`),KEY `plotter_cortes_usuario_solicitacao_cancelamento_id_foreign` (`usuario_solicitacao_cancelamento_id`),KEY `plotter_cortes_user_recuperacao_id_foreign` (`user_recuperacao_id`),KEY `plotter_cortes_created_by_foreign` (`created_by`),CONSTRAINT `pc_pbs` FOREIGN KEY (`plotter_bobina_secundaria_id`) REFERENCES `plotter_bobinas` (`id`),CONSTRAINT `pc_pbvf` FOREIGN KEY (`plotter_bobina_vidros_frontais_id`) REFERENCES `plotter_bobinas` (`id`),CONSTRAINT `pc_pbvt` FOREIGN KEY (`plotter_bobina_vidros_traseiros_id`) REFERENCES `plotter_bobinas` (`id`),CONSTRAINT `pcei` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `plotter_cortes_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `plotter_cortes_concessionaria_liberacao_id_foreign` FOREIGN KEY (`concessionaria_liberacao_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `plotter_cortes_created_by_foreign` FOREIGN KEY (`created_by`) REFERENCES `funcionarios` (`id`),CONSTRAINT `plotter_cortes_os_servico_id_foreign` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `plotter_cortes_plotter_bobina_id_foreign` FOREIGN KEY (`plotter_bobina_id`) REFERENCES `plotter_bobinas` (`id`),CONSTRAINT `plotter_cortes_plotter_corte_tipo_id_foreign` FOREIGN KEY (`plotter_corte_tipo_id`) REFERENCES `plotter_corte_tipos` (`id`),CONSTRAINT `plotter_cortes_user_recuperacao_id_foreign` FOREIGN KEY (`user_recuperacao_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `plotter_cortes_usuario_cancelamento_id_foreign` FOREIGN KEY (`usuario_cancelamento_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `plotter_cortes_usuario_finalizacao_id_foreign` FOREIGN KEY (`usuario_finalizacao_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `plotter_cortes_usuario_liberacao_id_foreign` FOREIGN KEY (`usuario_liberacao_id`) REFERENCES `usuarios` (`id`),CONSTRAINT `plotter_cortes_usuario_solicitacao_cancelamento_id_foreign` FOREIGN KEY (`usuario_solicitacao_cancelamento_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `plotter_devolucao_cortes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`plotter_devolucao_id` int unsigned NOT NULL,`plotter_corte_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_devolucao_cortes_plotter_devolucao_id_foreign` (`plotter_devolucao_id`),KEY `plotter_devolucao_cortes_plotter_corte_id_foreign` (`plotter_corte_id`),CONSTRAINT `plotter_devolucao_cortes_plotter_corte_id_foreign` FOREIGN KEY (`plotter_corte_id`) REFERENCES `plotter_cortes` (`id`),CONSTRAINT `plotter_devolucao_cortes_plotter_devolucao_id_foreign` FOREIGN KEY (`plotter_devolucao_id`) REFERENCES `plotter_devolucoes` (`id`) );CREATE TABLE `plotter_devolucoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`justificativa` text  NOT NULL,`funcionario_devolucao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_devolucoes_funcionario_devolucao_id_foreign` (`funcionario_devolucao_id`),CONSTRAINT `plotter_devolucoes_funcionario_devolucao_id_foreign` FOREIGN KEY (`funcionario_devolucao_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `plotter_estoques_programados` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`minimo` int unsigned NOT NULL,`maximo` int unsigned NOT NULL,`credito_minimo` int unsigned NOT NULL DEFAULT '0',`credito_maximo` int unsigned NOT NULL DEFAULT '0',`tipo_estoque` enum('concessionaria','plotter')  NOT NULL,`produto_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`plotter_corte_tipo_id` int unsigned NOT NULL,`plotter_peca_id` int unsigned DEFAULT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`estoque_id` int unsigned DEFAULT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `peppi` (`produto_id`),KEY `pepti` (`tonalidade_id`),KEY `peppcti` (`plotter_corte_tipo_id`),KEY `pepci` (`concessionaria_id`),KEY `pepcmi` (`carro_modelo_id`),KEY `pepei` (`estoque_id`),KEY `plotter_estoques_programados_plotter_peca_id_foreign` (`plotter_peca_id`),CONSTRAINT `pepci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `pepcmi` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `pepei` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `peppcti` FOREIGN KEY (`plotter_corte_tipo_id`) REFERENCES `plotter_corte_tipos` (`id`),CONSTRAINT `peppi` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `pepti` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`),CONSTRAINT `plotter_estoques_programados_plotter_peca_id_foreign` FOREIGN KEY (`plotter_peca_id`) REFERENCES `plotter_pecas` (`id`));CREATE TABLE `plotter_metragens` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`metragem` decimal(8,2) unsigned NOT NULL,`metragem_sem_vidro_traseiro` decimal(8,2) unsigned DEFAULT NULL,`carro_modelo_id` int unsigned NOT NULL,`produto_id` int unsigned DEFAULT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_metragens_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `plotter_metragens_funcionario_id_foreign` (`funcionario_id`),KEY `plotter_metragens_produto_id_foreign` (`produto_id`),KEY `plotter_metragens_tonalidade_id_foreign` (`tonalidade_id`),CONSTRAINT `plotter_metragens_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `plotter_metragens_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `plotter_metragens_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `plotter_metragens_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`));CREATE TABLE `plotter_pecas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`credito_necessario` int NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`plotter_corte_tipo_id` int unsigned DEFAULT NULL,`servico_id` int unsigned DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_pecas_plotter_corte_tipo_id_foreign` (`plotter_corte_tipo_id`),KEY `plotter_pecas_servico_id_foreign` (`servico_id`),CONSTRAINT `plotter_pecas_plotter_corte_tipo_id_foreign` FOREIGN KEY (`plotter_corte_tipo_id`) REFERENCES `plotter_corte_tipos` (`id`),CONSTRAINT `plotter_pecas_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `plotter_saida_corte_pecas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`plotter_saida_corte_id` bigint unsigned NOT NULL,`plotter_peca_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pscppsci` (`plotter_saida_corte_id`),KEY `pscpppi` (`plotter_peca_id`),CONSTRAINT `pscpppi` FOREIGN KEY (`plotter_peca_id`) REFERENCES `plotter_pecas` (`id`),CONSTRAINT `pscppsci` FOREIGN KEY (`plotter_saida_corte_id`) REFERENCES `plotter_saida_cortes` (`id`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;CREATE TABLE `plotter_saida_cortes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`duas_portas` tinyint(1) NOT NULL DEFAULT '0',`credito_minimo` int unsigned NOT NULL DEFAULT '0',`credito_maximo` int unsigned NOT NULL DEFAULT '0',`ano_modelo` varchar(255)  DEFAULT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` enum('incoerencia','em_falta','requisicao_cancelada','estoque_programado_cancelado','devolucao')  DEFAULT NULL,`plotter_corte_tipo_id` int unsigned NOT NULL,`plotter_peca_id` int unsigned DEFAULT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`produto_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`produto_traseiro_id` int unsigned DEFAULT NULL,`tonalidade_traseiro_id` int unsigned DEFAULT NULL,`produto_dianteiro_id` int unsigned DEFAULT NULL,`tonalidade_dianteiro_id` int unsigned DEFAULT NULL,`plotter_saida_id` bigint unsigned NOT NULL,`plotter_corte_id` int unsigned DEFAULT NULL,`os_servico_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pscpcti` (`plotter_corte_tipo_id`),KEY `psccmi` (`carro_modelo_id`),KEY `pscpi` (`produto_id`),KEY `pscti` (`tonalidade_id`),KEY `pscpti` (`produto_traseiro_id`),KEY `psctti` (`tonalidade_traseiro_id`),KEY `pscpdi` (`produto_dianteiro_id`),KEY `psctdi` (`tonalidade_dianteiro_id`),KEY `pscpsi` (`plotter_saida_id`),KEY `pscpci` (`plotter_corte_id`),KEY `pscosi` (`os_servico_id`),KEY `plotter_saida_cortes_plotter_peca_id_foreign` (`plotter_peca_id`),CONSTRAINT `plotter_saida_cortes_plotter_peca_id_foreign` FOREIGN KEY (`plotter_peca_id`) REFERENCES `plotter_pecas` (`id`),CONSTRAINT `psccmi` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `pscosi` FOREIGN KEY (`os_servico_id`) REFERENCES `os_servicos` (`id`),CONSTRAINT `pscpci` FOREIGN KEY (`plotter_corte_id`) REFERENCES `plotter_cortes` (`id`),CONSTRAINT `pscpcti` FOREIGN KEY (`plotter_corte_tipo_id`) REFERENCES `plotter_corte_tipos` (`id`),CONSTRAINT `pscpdi` FOREIGN KEY (`produto_dianteiro_id`) REFERENCES `produtos` (`id`),CONSTRAINT `pscpi` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `pscpsi` FOREIGN KEY (`plotter_saida_id`) REFERENCES `plotter_saidas` (`id`),CONSTRAINT `pscpti` FOREIGN KEY (`produto_traseiro_id`) REFERENCES `produtos` (`id`),CONSTRAINT `psctdi` FOREIGN KEY (`tonalidade_dianteiro_id`) REFERENCES `tonalidades` (`id`),CONSTRAINT `pscti` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`),CONSTRAINT `psctti` FOREIGN KEY (`tonalidade_traseiro_id`) REFERENCES `tonalidades` (`id`) );CREATE TABLE `plotter_saida_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` varchar(255)  NOT NULL,`plotter_saida_id` bigint unsigned NOT NULL,`plotter_saida_status_id` bigint unsigned NOT NULL,`funcionario_registro_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pshpsi` (`plotter_saida_id`),KEY `pshpssi` (`plotter_saida_status_id`),KEY `pshfri` (`funcionario_registro_id`),CONSTRAINT `pshfri` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pshpsi` FOREIGN KEY (`plotter_saida_id`) REFERENCES `plotter_saidas` (`id`),CONSTRAINT `pshpssi` FOREIGN KEY (`plotter_saida_status_id`) REFERENCES `plotter_saida_status` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 160° a 170º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `plotter_saida_status` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `plotter_saida_tipos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `plotter_saidas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`observacao` varchar(255)  DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`motivo_cancelamento` varchar(255)  DEFAULT NULL,`funcionario_registro_id` int unsigned DEFAULT NULL,`plotter_saida_tipo_id` bigint unsigned NOT NULL,`plotter_saida_status_id` bigint unsigned NOT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`concessionaria_execucao_id` int unsigned DEFAULT NULL,`os_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `psfri` (`funcionario_registro_id`),KEY `pspsit` (`plotter_saida_tipo_id`),KEY `pspssi` (`plotter_saida_status_id`),KEY `psci` (`concessionaria_id`),KEY `psoi` (`os_id`),KEY `pscei` (`concessionaria_execucao_id`),CONSTRAINT `pscei` FOREIGN KEY (`concessionaria_execucao_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `psci` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `psfri` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `psoi` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `pspsit` FOREIGN KEY (`plotter_saida_tipo_id`) REFERENCES `plotter_saida_tipos` (`id`),CONSTRAINT `pspssi` FOREIGN KEY (`plotter_saida_status_id`) REFERENCES `plotter_saida_status` (`id`) );CREATE TABLE `plotter_vencimento_kits` (`id` int unsigned NOT NULL AUTO_INCREMENT,`vencimento` int unsigned NOT NULL,`produto_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `plotter_vencimento_kits_produto_id_foreign` (`produto_id`),CONSTRAINT `plotter_vencimento_kits_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`));CREATE TABLE `ponto_registro_marcacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`data` datetime NOT NULL,`motivo` varchar(255)  DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`empresa_id` int unsigned NOT NULL,`ponto_registro_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `prmfi` (`funcionario_id`),KEY `prmei` (`empresa_id`),KEY `prmpri` (`ponto_registro_id`),CONSTRAINT `prmei` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `prmfi` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `prmpri` FOREIGN KEY (`ponto_registro_id`) REFERENCES `ponto_registros` (`id`));CREATE TABLE `ponto_registros` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`periodo` date NOT NULL,`tipo` enum('manual','ajuste','abono')  NOT NULL,`empresa_id` int unsigned NOT NULL,`funcionario_registro_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ponto_registros_empresa_id_foreign` (`empresa_id`),KEY `prfri` (`funcionario_registro_id`),CONSTRAINT `ponto_registros_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `prfri` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `pos_venda_ticket_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`pos_venda_ticket_id` bigint unsigned DEFAULT NULL,`responsavel_id` int unsigned DEFAULT NULL,`observacao` text DEFAULT NULL,`status` varchar(45)  DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pos_venda_ticket_historicos_pos_venda_ticket_id_foreign` (`pos_venda_ticket_id`),KEY `pos_venda_ticket_historicos_responsavel_id_foreign` (`responsavel_id`),CONSTRAINT `pos_venda_ticket_historicos_pos_venda_ticket_id_foreign` FOREIGN KEY (`pos_venda_ticket_id`) REFERENCES `pos_venda_tickets` (`id`),CONSTRAINT `pos_venda_ticket_historicos_responsavel_id_foreign` FOREIGN KEY (`responsavel_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `pos_venda_tickets` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome_solicitante` varchar(255)  NOT NULL,`telefone_solicitante` varchar(255)  DEFAULT NULL,`descricao_curta` varchar(255)  NOT NULL,`os_origem` varchar(255)  DEFAULT NULL,`categoria` varchar(255)  DEFAULT NULL,`servicos` text DEFAULT NULL,`descricao` text DEFAULT NULL,`vendedor_id` int unsigned DEFAULT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pos_venda_tickets_vendedor_id_foreign` (`vendedor_id`),KEY `pos_venda_tickets_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `pos_venda_tickets_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `pos_venda_tickets_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `pre_proposta_cancelamento_motivos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `pre_proposta_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`estorno` tinyint(1) NOT NULL DEFAULT '0',`sucesso` tinyint(1) NOT NULL DEFAULT '0',`request_body` text  NOT NULL,`response` text  NOT NULL,`pre_proposta_id` bigint unsigned DEFAULT NULL,`os_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pphppid` (`pre_proposta_id`),KEY `pphosid` (`os_id`),CONSTRAINT `pphosid` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `pphppid` FOREIGN KEY (`pre_proposta_id`) REFERENCES `pre_propostas` (`id`));CREATE TABLE `pre_propostas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`data_solicitacao_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` text DEFAULT NULL,`finalizada` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`proposta_carbel` int unsigned NOT NULL,`empresa_carbel` varchar(255)  DEFAULT NULL,`nome` varchar(120)  DEFAULT NULL,`cpf` varchar(14)  DEFAULT NULL,`data_nascimento` date DEFAULT NULL,`email` varchar(100)  DEFAULT NULL,`telefone1` varchar(16)  DEFAULT NULL,`telefone2` varchar(16)  DEFAULT NULL,`cep` varchar(8)  DEFAULT NULL,`logradouro` varchar(200)  DEFAULT NULL,`bairro` varchar(150)  DEFAULT NULL,`localidade` varchar(150)  DEFAULT NULL,`uf` varchar(2)  DEFAULT NULL,`numero` varchar(10)  DEFAULT NULL,`complemento` varchar(200)  DEFAULT NULL,`vendedor` varchar(255)  DEFAULT NULL,`descricao_veiculo` text DEFAULT NULL,`descricao_veiculo_completa` text DEFAULT NULL,`descricao_estoque` text DEFAULT NULL,`chassi` varchar(30)  DEFAULT NULL,`placa` varchar(30)  DEFAULT NULL,`pre_proposta_cancelamento_motivo_id` bigint unsigned DEFAULT NULL,`concessionaria_id` int unsigned DEFAULT NULL,`departamento_id` int unsigned DEFAULT NULL,`carro_marca_id` int unsigned DEFAULT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`carro_cor_id` int unsigned DEFAULT NULL,`funcionario_solicitacao_cancelamento_id` int unsigned DEFAULT NULL,`funcionario_aprovacao_cancelamento_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `pre_propostas_concessionaria_id_foreign` (`concessionaria_id`),KEY `pre_propostas_departamento_id_foreign` (`departamento_id`),KEY `pre_propostas_carro_marca_id_foreign` (`carro_marca_id`),KEY `pre_propostas_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `pre_propostas_carro_cor_id_foreign` (`carro_cor_id`),KEY `pre_propostas_funcionario_solicitacao_cancelamento_id_foreign` (`funcionario_solicitacao_cancelamento_id`),KEY `pre_propostas_funcionario_aprovacao_cancelamento_id_foreign` (`funcionario_aprovacao_cancelamento_id`),KEY `ppppcmi` (`pre_proposta_cancelamento_motivo_id`),CONSTRAINT `ppppcmi` FOREIGN KEY (`pre_proposta_cancelamento_motivo_id`) REFERENCES `pre_proposta_cancelamento_motivos` (`id`),CONSTRAINT `pre_propostas_carro_cor_id_foreign` FOREIGN KEY (`carro_cor_id`) REFERENCES `carro_cores` (`id`),CONSTRAINT `pre_propostas_carro_marca_id_foreign` FOREIGN KEY (`carro_marca_id`) REFERENCES `carro_marcas` (`id`),CONSTRAINT `pre_propostas_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `pre_propostas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `pre_propostas_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `pre_propostas_funcionario_aprovacao_cancelamento_id_foreign` FOREIGN KEY (`funcionario_aprovacao_cancelamento_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `pre_propostas_funcionario_solicitacao_cancelamento_id_foreign` FOREIGN KEY (`funcionario_solicitacao_cancelamento_id`) REFERENCES `funcionarios` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 170° a 180º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `produtividade_periodos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`ano` int unsigned NOT NULL,`mes` int unsigned NOT NULL,`dias_uteis` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `produtivo_bases` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `produtivo_tipo_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`produtivo_tipo_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `prodTipoId` (`produtivo_tipo_id`),KEY `servId` (`servico_id`),KEY `ptssa` (`servico_id`,`ativo`,`deleted_at`),CONSTRAINT `prodTipoId` FOREIGN KEY (`produtivo_tipo_id`) REFERENCES `produtivo_tipos` (`id`),CONSTRAINT `servId` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `produtivo_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(20)  NOT NULL,`master` tinyint(1) NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `produto_concessionaria_estoques` (`id` int unsigned NOT NULL AUTO_INCREMENT,`estoque_minimo` int unsigned NOT NULL,`estoque_maximo` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`produto_id` int unsigned NOT NULL,`produto_tamanho_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `produto_concessionaria_estoques_concessionaria_id_foreign` (`concessionaria_id`),KEY `produto_concessionaria_estoques_produto_id_foreign` (`produto_id`),KEY `produto_concessionaria_estoques_produto_tamanho_id_foreign` (`produto_tamanho_id`),CONSTRAINT `produto_concessionaria_estoques_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `produto_concessionaria_estoques_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `produto_concessionaria_estoques_produto_tamanho_id_foreign` FOREIGN KEY (`produto_tamanho_id`) REFERENCES `produto_tamanhos` (`id`) ON DELETE CASCADE);CREATE TABLE `produto_configuracoes_estoque` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`estoque_minimo` int unsigned NOT NULL,`estoque_maximo` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`produto_id` int unsigned NOT NULL,`produto_tamanho_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `produto_configuracoes_estoque_produto_id_foreign` (`produto_id`),KEY `produto_configuracoes_estoque_produto_tamanho_id_foreign` (`produto_tamanho_id`),KEY `produto_configuracoes_estoque_tonalidade_id_foreign` (`tonalidade_id`),CONSTRAINT `produto_configuracoes_estoque_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `produto_configuracoes_estoque_produto_tamanho_id_foreign` FOREIGN KEY (`produto_tamanho_id`) REFERENCES `produto_tamanhos` (`id`),CONSTRAINT `produto_configuracoes_estoque_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`) );CREATE TABLE `produto_tamanhos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`quantidade` decimal(8,2) DEFAULT '1.00',`estoque_minimo` int unsigned NOT NULL DEFAULT '0',`estoque_maximo` int unsigned NOT NULL DEFAULT '0',`produto_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `produto_tamanhos_produto_id_foreign` (`produto_id`),CONSTRAINT `produto_tamanhos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`));CREATE TABLE `produto_tonalidades` (`id` int unsigned NOT NULL AUTO_INCREMENT,`produto_id` int unsigned NOT NULL,`tonalidade_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `produto_tonalidades_produto_id_foreign` (`produto_id`),KEY `produto_tonalidades_tonalidade_id_foreign` (`tonalidade_id`),KEY `produto_tonalidades_index` (`produto_id`,`tonalidade_id`,`deleted_at`),CONSTRAINT `produto_tonalidades_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `produto_tonalidades_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`));CREATE TABLE `produtos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`codigo` varchar(255)  DEFAULT NULL,`envio_maximo` int NOT NULL DEFAULT '1',`fracionavel` tinyint(1) NOT NULL DEFAULT '0',`fracao_rastreavel` tinyint(1) NOT NULL DEFAULT '0',`rastreavel` tinyint(1) NOT NULL DEFAULT '0',`fecha_servico` tinyint(1) NOT NULL DEFAULT '0',`diferencia_tonalidade` tinyint(1) NOT NULL DEFAULT '0',`diferencia_modelo` tinyint(1) NOT NULL DEFAULT '0',`diferencia_tamanho` tinyint(1) NOT NULL DEFAULT '0',`medida_id` int unsigned NOT NULL,`grupo_produto_id` int unsigned NOT NULL,`subgrupo_produto_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `produtos_medida_id_foreign` (`medida_id`),KEY `produtos_grupo_produto_id_foreign` (`grupo_produto_id`),KEY `produtos_subgrupo_produto_id_foreign` (`subgrupo_produto_id`),KEY `produtos` (`ativo`,`deleted_at`),KEY `produtos_ativos_index` (`ativo`,`deleted_at`),CONSTRAINT `produtos_grupo_produto_id_foreign` FOREIGN KEY (`grupo_produto_id`) REFERENCES `grupos_produtos` (`id`),CONSTRAINT `produtos_medida_id_foreign` FOREIGN KEY (`medida_id`) REFERENCES `medidas` (`id`),CONSTRAINT `produtos_subgrupo_produto_id_foreign` FOREIGN KEY (`subgrupo_produto_id`) REFERENCES `subgrupos_produtos` (`id`));CREATE TABLE `proposta_compra_produtos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`quantidade` int unsigned NOT NULL,`produto_id` int unsigned NOT NULL,`produto_tamanho_id` int unsigned NOT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`proposta_compra_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `proposta_compra_produtos_produto_id_foreign` (`produto_id`),KEY `proposta_compra_produtos_produto_tamanho_id_foreign` (`produto_tamanho_id`),KEY `proposta_compra_produtos_proposta_compra_id_foreign` (`proposta_compra_id`),KEY `proposta_compra_produtos_tonalidade_id_foreign` (`tonalidade_id`),CONSTRAINT `proposta_compra_produtos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),CONSTRAINT `proposta_compra_produtos_produto_tamanho_id_foreign` FOREIGN KEY (`produto_tamanho_id`) REFERENCES `produto_tamanhos` (`id`),CONSTRAINT `proposta_compra_produtos_proposta_compra_id_foreign` FOREIGN KEY (`proposta_compra_id`) REFERENCES `propostas_compras` (`id`),CONSTRAINT `proposta_compra_produtos_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`) );CREATE TABLE `proposta_servicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_venda` decimal(8,2) unsigned NOT NULL,`valor_original` decimal(8,2) unsigned NOT NULL,`desconto_supervisao` decimal(8,2) unsigned NOT NULL,`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`motivo_cancelamento` varchar(255)  DEFAULT NULL,`proposta_id` int unsigned NOT NULL,`servico_id` int unsigned NOT NULL,`combo_id` int unsigned DEFAULT NULL,`tonalidade_id` int unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `proposta_servicos_proposta_id_foreign` (`proposta_id`),KEY `proposta_servicos_servico_id_foreign` (`servico_id`),KEY `proposta_servicos_combo_id_foreign` (`combo_id`),KEY `proposta_servicos_tonalidade_id_foreign` (`tonalidade_id`),CONSTRAINT `proposta_servicos_combo_id_foreign` FOREIGN KEY (`combo_id`) REFERENCES `combos` (`id`),CONSTRAINT `proposta_servicos_proposta_id_foreign` FOREIGN KEY (`proposta_id`) REFERENCES `propostas` (`id`),CONSTRAINT `proposta_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),CONSTRAINT `proposta_servicos_tonalidade_id_foreign` FOREIGN KEY (`tonalidade_id`) REFERENCES `tonalidades` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 180° a 190º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `proposta_status` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(20)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `propostas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`proposta_concessionaria` int unsigned NOT NULL,`tipo_atendimento` enum('PRESENCIAL','TELEFONE','WHATSAPP')  DEFAULT NULL,`nome` varchar(120)  DEFAULT NULL,`sexo` enum('MASCULINO','FEMININO','NEUTRO','NÃO INFORMADO')  DEFAULT NULL,`telefone1` varchar(15)  DEFAULT NULL,`telefone2` varchar(15)  DEFAULT NULL,`email` varchar(80)  DEFAULT NULL,`atendimento_telefonico` tinyint(1) NOT NULL DEFAULT '0',`justificativa` text DEFAULT NULL,`cancelamento_motivo_id` int unsigned DEFAULT NULL,`vendedor_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`departamento_id` int unsigned NOT NULL,`cliente_id` int unsigned DEFAULT NULL,`cliente_carro_id` int unsigned DEFAULT NULL,`proposta_status_id` int unsigned NOT NULL,`carro_modelo_id` int unsigned DEFAULT NULL,`carro_submodelo_id` int unsigned DEFAULT NULL,`carro_cor_id` int unsigned DEFAULT NULL,`pre_proposta_id` bigint unsigned DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `propostas_concessionaria_id_foreign` (`concessionaria_id`),KEY `propostas_departamento_id_foreign` (`departamento_id`),KEY `propostas_cliente_id_foreign` (`cliente_id`),KEY `propostas_cliente_carro_id_foreign` (`cliente_carro_id`),KEY `propostas_proposta_status_id_foreign` (`proposta_status_id`),KEY `propostas_cancelamento_motivo_id_foreign` (`cancelamento_motivo_id`),KEY `propostas_vendedor_id_foreign` (`vendedor_id`),KEY `propostas_carro_modelo_id_foreign` (`carro_modelo_id`),KEY `propostas_carro_submodelo_id_foreign` (`carro_submodelo_id`),KEY `propostas_carro_cor_id_foreign` (`carro_cor_id`),KEY `propostas_pre_proposta_id_foreign` (`pre_proposta_id`),CONSTRAINT `propostas_cancelamento_motivo_id_foreign` FOREIGN KEY (`cancelamento_motivo_id`) REFERENCES `cancelamento_motivos` (`id`),CONSTRAINT `propostas_carro_cor_id_foreign` FOREIGN KEY (`carro_cor_id`) REFERENCES `carro_cores` (`id`),CONSTRAINT `propostas_carro_modelo_id_foreign` FOREIGN KEY (`carro_modelo_id`) REFERENCES `carro_modelos` (`id`),CONSTRAINT `propostas_carro_submodelo_id_foreign` FOREIGN KEY (`carro_submodelo_id`) REFERENCES `carro_submodelos` (`id`),CONSTRAINT `propostas_cliente_carro_id_foreign` FOREIGN KEY (`cliente_carro_id`) REFERENCES `cliente_carros` (`id`),CONSTRAINT `propostas_cliente_id_foreign` FOREIGN KEY (`cliente_id`) REFERENCES `clientes` (`id`),CONSTRAINT `propostas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `propostas_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `propostas_pre_proposta_id_foreign` FOREIGN KEY (`pre_proposta_id`) REFERENCES `pre_propostas` (`id`),CONSTRAINT `propostas_proposta_status_id_foreign` FOREIGN KEY (`proposta_status_id`) REFERENCES `proposta_status` (`id`),CONSTRAINT `propostas_vendedor_id_foreign` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `propostas_compras` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`finalizada` tinyint(1) NOT NULL DEFAULT '0',`data_finalizacao` datetime DEFAULT NULL,`funcionario_finalizacao_id` int unsigned DEFAULT NULL,`estoque_id` int unsigned NOT NULL,`fornecedor_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `propostas_compras_funcionario_finalizacao_id_foreign` (`funcionario_finalizacao_id`),KEY `propostas_compras_estoque_id_foreign` (`estoque_id`),KEY `propostas_compras_fornecedor_id_foreign` (`fornecedor_id`),CONSTRAINT `propostas_compras_estoque_id_foreign` FOREIGN KEY (`estoque_id`) REFERENCES `estoques` (`id`),CONSTRAINT `propostas_compras_fornecedor_id_foreign` FOREIGN KEY (`fornecedor_id`) REFERENCES `fornecedores` (`id`),CONSTRAINT `propostas_compras_funcionario_finalizacao_id_foreign` FOREIGN KEY (`funcionario_finalizacao_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `relatorio_filtros` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`relatorio` varchar(255)  NOT NULL,`ref` varchar(255)  DEFAULT NULL,`filtros` text  NOT NULL,`funcionario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `relatorio_filtros_funcionario_id_foreign` (`funcionario_id`),CONSTRAINT `relatorio_filtros_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `remessa_historico_remocao_os` (`id` int unsigned NOT NULL AUTO_INCREMENT,`justificativa` text DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`os_id` int unsigned NOT NULL,`remessa_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `remessa_historico_remocao_os_funcionario_id_foreign` (`funcionario_id`),KEY `remessa_historico_remocao_os_os_id_foreign` (`os_id`),KEY `remessa_historico_remocao_os_remessa_id_foreign` (`remessa_id`),CONSTRAINT `remessa_historico_remocao_os_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `remessa_historico_remocao_os_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `remessa_historico_remocao_os_remessa_id_foreign` FOREIGN KEY (`remessa_id`) REFERENCES `remessas` (`id`));CREATE TABLE `remessa_os` (`os_id` int unsigned NOT NULL,`remessa_id` int unsigned NOT NULL,`valor_pagamento` decimal(8,2) NOT NULL,`usuario_agendamento` int unsigned NOT NULL,`data_agendamento` datetime DEFAULT NULL,`pago` tinyint(1) NOT NULL DEFAULT '0',`codigo_deposito` varchar(50)  DEFAULT NULL,`id` int unsigned NOT NULL AUTO_INCREMENT,`data_pagamento` datetime DEFAULT NULL,`remessa_lote_id` int unsigned DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `remessa_os_os_id_foreign` (`os_id`),KEY `remessa_os_remessa_id_foreign` (`remessa_id`),KEY `remessa_os_remessa_lote_id_foreign` (`remessa_lote_id`),CONSTRAINT `remessa_os_os_id_foreign` FOREIGN KEY (`os_id`) REFERENCES `os` (`id`),CONSTRAINT `remessa_os_remessa_id_foreign` FOREIGN KEY (`remessa_id`) REFERENCES `remessas` (`id`),CONSTRAINT `remessa_os_remessa_lote_id_foreign` FOREIGN KEY (`remessa_lote_id`) REFERENCES `remessa_os_lotes` (`id`) );CREATE TABLE `remessa_os_lotes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_depositado` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`usuario_criacao` int unsigned NOT NULL,`tipo_remessa_id` int unsigned NOT NULL,`caixa_conta_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `remessa_os_lotes_usuario_criacao_foreign` (`usuario_criacao`),KEY `remessa_os_lotes_tipo_remessa_id_foreign` (`tipo_remessa_id`),KEY `remessa_os_lotes_caixa_conta_id_foreign` (`caixa_conta_id`),KEY `remessa_os_lotes_concessionaria_id_foreign` (`concessionaria_id`),CONSTRAINT `remessa_os_lotes_caixa_conta_id_foreign` FOREIGN KEY (`caixa_conta_id`) REFERENCES `caixa_contas` (`id`),CONSTRAINT `remessa_os_lotes_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `remessa_os_lotes_tipo_remessa_id_foreign` FOREIGN KEY (`tipo_remessa_id`) REFERENCES `tipo_remessas` (`id`),CONSTRAINT `remessa_os_lotes_usuario_criacao_foreign` FOREIGN KEY (`usuario_criacao`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `remessas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`usuario_criacao` int unsigned NOT NULL,`tipo_remessa_id` int unsigned NOT NULL,`concessionaria_id` int unsigned NOT NULL,`cancelamento_motivo` text  NOT NULL,`solicitado_cancelamento` tinyint(1) NOT NULL DEFAULT '0',`data_solicitacao_cancelamento` datetime DEFAULT NULL,`solicitado_por` int unsigned DEFAULT NULL,`cancelada` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`atendido_por` int unsigned DEFAULT NULL,`email_enviado` tinyint(1) NOT NULL DEFAULT '0',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `remessas_concessionaria_id_foreign` (`concessionaria_id`),KEY `remessas_solicitado_por_foreign` (`solicitado_por`),KEY `remessas_atendido_por_foreign` (`atendido_por`),CONSTRAINT `remessas_atendido_por_foreign` FOREIGN KEY (`atendido_por`) REFERENCES `funcionarios` (`id`),CONSTRAINT `remessas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `remessas_solicitado_por_foreign` FOREIGN KEY (`solicitado_por`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `retorno_classificacoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`subgrupo_servico_id` int unsigned NOT NULL DEFAULT '1',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `rcssi` (`subgrupo_servico_id`),CONSTRAINT `rcssi` FOREIGN KEY (`subgrupo_servico_id`) REFERENCES `subgrupos_servicos` (`id`) );CREATE TABLE `retorno_motivos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`titulo` varchar(255)  NOT NULL,`aprovacao_supervisao` tinyint(1) NOT NULL DEFAULT '0',`estorna_comissao_antiga` tinyint(1) NOT NULL DEFAULT '1',`gera_nova_comissao` tinyint(1) NOT NULL DEFAULT '1',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `ronda_classificacoes` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `ronda_etapas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` varchar(255)  NOT NULL,`resposta_positiva` enum('SIM','NÃO','NÃO SE APLICA')  NOT NULL,`ordem` int unsigned NOT NULL,`ronda_classificacao_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ronda_etapas_ronda_classificacao_id_foreign` (`ronda_classificacao_id`),CONSTRAINT `ronda_etapas_ronda_classificacao_id_foreign` FOREIGN KEY (`ronda_classificacao_id`) REFERENCES `ronda_classificacoes` (`id`) );CREATE TABLE `ronda_execucao_respostas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`resposta` enum('SIM','NÃO','NÃO SE APLICA')  NOT NULL,`observacao` varchar(255)  DEFAULT NULL,`ronda_execucao_id` bigint unsigned NOT NULL,`ronda_classificacao_id` bigint unsigned NOT NULL,`ronda_etapa_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `ronda_execucao_respostas_ronda_execucao_id_foreign` (`ronda_execucao_id`),KEY `ronda_execucao_respostas_ronda_classificacao_id_foreign` (`ronda_classificacao_id`),KEY `ronda_execucao_respostas_ronda_etapa_id_foreign` (`ronda_etapa_id`),CONSTRAINT `ronda_execucao_respostas_ronda_classificacao_id_foreign` FOREIGN KEY (`ronda_classificacao_id`) REFERENCES `ronda_classificacoes` (`id`),CONSTRAINT `ronda_execucao_respostas_ronda_etapa_id_foreign` FOREIGN KEY (`ronda_etapa_id`) REFERENCES `ronda_etapas` (`id`),CONSTRAINT `ronda_execucao_respostas_ronda_execucao_id_foreign` FOREIGN KEY (`ronda_execucao_id`) REFERENCES `ronda_execucoes` (`id`) );"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 190° a 200º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `ronda_execucoes` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `data_previsao` date NOT NULL,  `finalizada` tinyint(1) NOT NULL DEFAULT '0',  `data_finalizacao` date DEFAULT NULL,  `ronda_rotina_id` bigint unsigned NOT NULL,  `concessionaria_id` int unsigned NOT NULL,  `funcionario_responsavel_id` int unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `ronda_execucoes_ronda_rotina_id_foreign` (`ronda_rotina_id`),  KEY `ronda_execucoes_concessionaria_id_foreign` (`concessionaria_id`),  KEY `ronda_execucoes_funcionario_responsavel_id_foreign` (`funcionario_responsavel_id`),  CONSTRAINT `ronda_execucoes_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),  CONSTRAINT `ronda_execucoes_funcionario_responsavel_id_foreign` FOREIGN KEY (`funcionario_responsavel_id`) REFERENCES `funcionarios` (`id`),  CONSTRAINT `ronda_execucoes_ronda_rotina_id_foreign` FOREIGN KEY (`ronda_rotina_id`) REFERENCES `ronda_rotinas` (`id`) );CREATE TABLE `ronda_rotina_classificacoes` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `ronda_rotina_id` bigint unsigned NOT NULL,  `ronda_classificacao_id` bigint unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `ronda_rotina_classificacoes_ronda_rotina_id_foreign` (`ronda_rotina_id`),  KEY `ronda_rotina_classificacoes_ronda_classificacao_id_foreign` (`ronda_classificacao_id`),  CONSTRAINT `ronda_rotina_classificacoes_ronda_classificacao_id_foreign` FOREIGN KEY (`ronda_classificacao_id`) REFERENCES `ronda_classificacoes` (`id`),  CONSTRAINT `ronda_rotina_classificacoes_ronda_rotina_id_foreign` FOREIGN KEY (`ronda_rotina_id`) REFERENCES `ronda_rotinas` (`id`) );CREATE TABLE `ronda_rotina_concessionarias` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `ronda_rotina_id` bigint unsigned NOT NULL,  `concessionaria_id` int unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `ronda_rotina_concessionarias_ronda_rotina_id_foreign` (`ronda_rotina_id`),  KEY `ronda_rotina_concessionarias_concessionaria_id_foreign` (`concessionaria_id`),  CONSTRAINT `ronda_rotina_concessionarias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),  CONSTRAINT `ronda_rotina_concessionarias_ronda_rotina_id_foreign` FOREIGN KEY (`ronda_rotina_id`) REFERENCES `ronda_rotinas` (`id`) );CREATE TABLE `ronda_rotinas` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `data_inicio` date DEFAULT NULL,  `periodicidade` int unsigned NOT NULL,  `observacao` text DEFAULT NULL,  `funcionario_responsavel_id` int unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `ronda_rotinas_funcionario_responsavel_id_foreign` (`funcionario_responsavel_id`),  CONSTRAINT `ronda_rotinas_funcionario_responsavel_id_foreign` FOREIGN KEY (`funcionario_responsavel_id`) REFERENCES `funcionarios` (`id`) );CREATE TABLE `servico_categorias` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `nome` varchar(255)  NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`));CREATE TABLE `servico_departamentos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `servico_id` int unsigned NOT NULL,  `servico_acessorio_id` int unsigned DEFAULT NULL,  `departamento_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_departamentos_servico_id_foreign` (`servico_id`),  KEY `servico_departamentos_departamento_id_foreign` (`departamento_id`),  KEY `servico_departamentos_servico_acessorio_id_foreign` (`servico_acessorio_id`),  KEY `servico_departamentos_index` (`servico_id`,`departamento_id`,`ativo`,`deleted_at`),  CONSTRAINT `servico_departamentos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),  CONSTRAINT `servico_departamentos_servico_acessorio_id_foreign` FOREIGN KEY (`servico_acessorio_id`) REFERENCES `servicos` (`id`),  CONSTRAINT `servico_departamentos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `servico_execucao_tempos` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `tempo_execucao` time NOT NULL,  `servico_id` int unsigned NOT NULL,  `departamento_id` int unsigned NOT NULL,  `carro_cor_tipo_id` int unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_execucao_tempos_servico_id_foreign` (`servico_id`),  KEY `servico_execucao_tempos_departamento_id_foreign` (`departamento_id`),  KEY `servico_execucao_tempos_carro_cor_tipo_id_foreign` (`carro_cor_tipo_id`),  CONSTRAINT `servico_execucao_tempos_carro_cor_tipo_id_foreign` FOREIGN KEY (`carro_cor_tipo_id`) REFERENCES `carro_cor_tipos` (`id`),  CONSTRAINT `servico_execucao_tempos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),  CONSTRAINT `servico_execucao_tempos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`) );CREATE TABLE `servico_garantias` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `texto` text  NOT NULL,  `prazo` int NOT NULL,  `prazo_tipo` int NOT NULL,  `servico_id` int unsigned NOT NULL,  `durabilidade` int NOT NULL DEFAULT '0',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_garantias_servico_id_foreign` (`servico_id`),  CONSTRAINT `servico_garantias_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `servico_nota_configuracoes` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `descricao` varchar(255)  NOT NULL,  `ncm` varchar(20)  DEFAULT NULL,  `cfop` varchar(20)  DEFAULT NULL,  `cest` varchar(20)  DEFAULT NULL,  `tipo_nota` char(1)  NOT NULL,  `porcentagem_emissao` int DEFAULT NULL,  `medida_venda` decimal(8,2) NOT NULL DEFAULT '1.00',  `substituicao_tributaria` tinyint(1) NOT NULL DEFAULT '0',  `servico_id` int unsigned NOT NULL,  `empresa_id` int unsigned NOT NULL,  `medida_id` int unsigned DEFAULT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `updated_by` int unsigned DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_nota_configuracoes_servico_id_foreign` (`servico_id`),  KEY `servico_nota_configuracoes_empresa_id_foreign` (`empresa_id`),  KEY `servico_nota_configuracoes_medida_id_foreign` (`medida_id`),  KEY `servico_nota_configuracoes_updated_by_foreign` (`updated_by`),  CONSTRAINT `servico_nota_configuracoes_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),  CONSTRAINT `servico_nota_configuracoes_medida_id_foreign` FOREIGN KEY (`medida_id`) REFERENCES `medidas` (`id`),  CONSTRAINT `servico_nota_configuracoes_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),  CONSTRAINT `servico_nota_configuracoes_updated_by_foreign` FOREIGN KEY (`updated_by`) REFERENCES `funcionarios` (`id`));CREATE TABLE `servico_produto_departamentos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `servico_produto_id` int unsigned NOT NULL,  `departamento_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_produto_departamentos_servico_produto_id_foreign` (`servico_produto_id`),  KEY `servico_produto_departamentos_departamento_id_foreign` (`departamento_id`),  CONSTRAINT `servico_produto_departamentos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),  CONSTRAINT `servico_produto_departamentos_servico_produto_id_foreign` FOREIGN KEY (`servico_produto_id`) REFERENCES `servico_produtos` (`id`));CREATE TABLE `servico_produto_portes` (  `id` bigint unsigned NOT NULL AUTO_INCREMENT,  `servico_produto_id` int unsigned NOT NULL,  `carro_porte_id` int unsigned NOT NULL,  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_produto_portes_servico_produto_id_foreign` (`servico_produto_id`),  KEY `servico_produto_portes_carro_porte_id_foreign` (`carro_porte_id`),  CONSTRAINT `servico_produto_portes_carro_porte_id_foreign` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),  CONSTRAINT `servico_produto_portes_servico_produto_id_foreign` FOREIGN KEY (`servico_produto_id`) REFERENCES `servico_produtos` (`id`));CREATE TABLE `servico_produtos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `alternavel` varchar(50)  DEFAULT NULL,  `filtro_cor` tinyint(1) NOT NULL DEFAULT '0',  `filtro_departamento` tinyint(1) NOT NULL DEFAULT '0',  `servico_id` int unsigned NOT NULL,  `produto_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servico_produtos_servico_id_foreign` (`servico_id`),  KEY `servico_produtos_produto_id_foreign` (`produto_id`),  KEY `servico_produtos_index` (`servico_id`,`produto_id`,`ativo`,`deleted_at`),  KEY `produtos` (`ativo`,`deleted_at`),  CONSTRAINT `servico_produtos_produto_id_foreign` FOREIGN KEY (`produto_id`) REFERENCES `produtos` (`id`),  CONSTRAINT `servico_produtos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`));CREATE TABLE `servicos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `nome` varchar(200)  NOT NULL,  `custo_fixo` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',  `codigo_nf` varchar(30)  NOT NULL,  `fecha_kit` tinyint(1) NOT NULL DEFAULT '0',  `fecha_peca_avulsa` tinyint(1) NOT NULL DEFAULT '0',  `fecha_peca` tinyint(1) NOT NULL DEFAULT '0',  `fecha_produto` tinyint(1) NOT NULL DEFAULT '0',  `fecha_produtivo` tinyint(1) NOT NULL DEFAULT '1',  `diferencia_departamento_preco` tinyint(1) NOT NULL DEFAULT '0',  `diferencia_porte` tinyint(1) NOT NULL DEFAULT '0',  `diferencia_departamento` tinyint(1) NOT NULL DEFAULT '0',  `diferencia_porte_comissao` tinyint(1) NOT NULL DEFAULT '0',  `diferencia_tempo_departamento` tinyint(1) NOT NULL DEFAULT '1',  `diferencia_tempo_cor` tinyint(1) NOT NULL DEFAULT '0',  `credito_necessario` int unsigned NOT NULL DEFAULT '0',  `valor_desconto_cortesia` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',  `aceita_desconto_cortesia` tinyint(1) NOT NULL DEFAULT '0',  `segunda_aplicacao` tinyint(1) NOT NULL DEFAULT '0',  `grupo_servico_id` int unsigned NOT NULL,  `subgrupo_servico_id` int unsigned NOT NULL,  `servico_categoria_id` bigint unsigned DEFAULT NULL,  `tags` varchar(30)  DEFAULT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `servicos_grupo_servico_id_foreign` (`grupo_servico_id`),  KEY `servicos_subgrupo_servico_id_foreign` (`subgrupo_servico_id`),  KEY `servicos_fecha_produtivo` (`fecha_produtivo`),  KEY `servicos_deleted_at` (`deleted_at`),  KEY `servicos_ativos` (`ativo`,`diferencia_departamento_preco`,`diferencia_departamento`,`diferencia_porte`,`deleted_at`),  KEY `servicos_servico_categoria_id_foreign` (`servico_categoria_id`),  CONSTRAINT `servicos_grupo_servico_id_foreign` FOREIGN KEY (`grupo_servico_id`) REFERENCES `grupos_servicos` (`id`),  CONSTRAINT `servicos_servico_categoria_id_foreign` FOREIGN KEY (`servico_categoria_id`) REFERENCES `servico_categorias` (`id`),  CONSTRAINT `servicos_subgrupo_servico_id_foreign` FOREIGN KEY (`subgrupo_servico_id`) REFERENCES `subgrupos_servicos` (`id`));CREATE TABLE `subgrupos_produtos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `nome` varchar(30)  NOT NULL,  `grupo_produto_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `subgrupos_produtos_grupo_produto_id_foreign` (`grupo_produto_id`),  CONSTRAINT `subgrupos_produtos_grupo_produto_id_foreign` FOREIGN KEY (`grupo_produto_id`) REFERENCES `grupos_produtos` (`id`));CREATE TABLE `subgrupos_servicos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `nome` varchar(30)  NOT NULL,  `sigla` varchar(5)  DEFAULT NULL,  `grupo_servico_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `subgrupos_servicos_grupo_servico_id_foreign` (`grupo_servico_id`),  CONSTRAINT `subgrupos_servicos_grupo_servico_id_foreign` FOREIGN KEY (`grupo_servico_id`) REFERENCES `grupos_servicos` (`id`));CREATE TABLE `tabela_comissao_servicos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `valor_dentro` decimal(7,3) DEFAULT NULL,  `valor_fora` decimal(7,3) DEFAULT NULL,  `porcentagem` tinyint(1) NOT NULL DEFAULT '0',  `departamento_id` int unsigned DEFAULT NULL,  `carro_porte_id` int unsigned DEFAULT NULL,  `indicador_tipo_id` int unsigned DEFAULT NULL,  `servico_id` int unsigned NOT NULL,  `funcionario_cadastro_id` int unsigned DEFAULT NULL,  `tabela_comissao_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `tabela_comissao_servicos_departamento_id_foreign` (`departamento_id`),  KEY `tabela_comissao_servicos_carro_porte_id_foreign` (`carro_porte_id`),  KEY `tabela_comissao_servicos_indicador_tipo_id_foreign` (`indicador_tipo_id`),  KEY `tabela_comissao_servicos_servico_id_foreign` (`servico_id`),  KEY `tabela_comissao_servicos_tabela_comissao_id_foreign` (`tabela_comissao_id`),  KEY `tcsfci` (`funcionario_cadastro_id`),  CONSTRAINT `tabela_comissao_servicos_carro_porte_id_foreign` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),  CONSTRAINT `tabela_comissao_servicos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),  CONSTRAINT `tabela_comissao_servicos_indicador_tipo_id_foreign` FOREIGN KEY (`indicador_tipo_id`) REFERENCES `indicador_tipos` (`id`),  CONSTRAINT `tabela_comissao_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),  CONSTRAINT `tabela_comissao_servicos_tabela_comissao_id_foreign` FOREIGN KEY (`tabela_comissao_id`) REFERENCES `tabelas_comissoes` (`id`),  CONSTRAINT `tcsfci` FOREIGN KEY (`funcionario_cadastro_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `tabela_comissao_tipos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `nome` varchar(30)  NOT NULL,  `tipo_contrato` tinyint(1) NOT NULL DEFAULT '0',  `ordem` int unsigned NOT NULL DEFAULT '0',  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`));CREATE TABLE `tabela_preco_servicos` (  `id` int unsigned NOT NULL AUTO_INCREMENT,  `valor_maximo_venda` decimal(7,2) unsigned NOT NULL DEFAULT '0.00',  `valor_minimo_venda` decimal(7,2) unsigned NOT NULL DEFAULT '0.00',  `valor_nfe` decimal(7,2) unsigned NOT NULL DEFAULT '0.00',  `servico_id` int unsigned NOT NULL,  `combo_id` int unsigned DEFAULT NULL,  `carro_porte_id` int unsigned NOT NULL,  `departamento_id` int unsigned DEFAULT NULL,  `funcionario_cadastro_id` int unsigned DEFAULT NULL,  `tabela_preco_id` int unsigned NOT NULL,  `ativo` tinyint(1) NOT NULL DEFAULT '1',  `created_at` timestamp NULL DEFAULT NULL,  `updated_at` timestamp NULL DEFAULT NULL,  `deleted_at` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `tabela_preco_servicos_servico_id_foreign` (`servico_id`),  KEY `tabela_preco_servicos_combo_id_foreign` (`combo_id`),  KEY `tabela_preco_servicos_carro_porte_id_foreign` (`carro_porte_id`),  KEY `tabela_preco_servicos_tabela_preco_id_foreign` (`tabela_preco_id`),  KEY `tpsfci` (`funcionario_cadastro_id`),  KEY `tpsdi` (`departamento_id`),  CONSTRAINT `tabela_preco_servicos_carro_porte_id_foreign` FOREIGN KEY (`carro_porte_id`) REFERENCES `carro_portes` (`id`),  CONSTRAINT `tabela_preco_servicos_combo_id_foreign` FOREIGN KEY (`combo_id`) REFERENCES `combos` (`id`),  CONSTRAINT `tabela_preco_servicos_servico_id_foreign` FOREIGN KEY (`servico_id`) REFERENCES `servicos` (`id`),  CONSTRAINT `tabela_preco_servicos_tabela_preco_id_foreign` FOREIGN KEY (`tabela_preco_id`) REFERENCES `tabelas_precos` (`id`),  CONSTRAINT `tpsdi` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),  CONSTRAINT `tpsfci` FOREIGN KEY (`funcionario_cadastro_id`) REFERENCES `funcionarios` (`id`));"
            }
        ]
    },
    {
        "messages": [
            {
                "role": "system",
                "content": "Você é um analista de dados especialista em tranduzir texto de linguagem natural em queries para ser executada em BANCO DE DADOS MySQL. SUA TAREFA É: 1. Receber uma solicitação em linguagem natural sobre os dados do banco de dados; 2. Traga os dados cru, para ser analisado por uma analista. 3. Traduzir essa solicitação para uma consulta SQL precisa e eficiente. CONSIDERAÇÕES: * Regras: Siga as regras específicas para a construção das consultas (campos ativo, deleted_at, tratamento de datas, etc.). * Clareza: As consultas e explicações devem ser claras e concisas. * Eficiência: Priorize consultas eficientes que retornem os resultados rapidamente. ATENÇÃO: A REGRA ABAIXO DEVE SER SEGUIDA: 1. Valores e Relacionamentos nas Tabelas: * A soma do campo 'valor_venda_real' na tabela 'os_servicos' representa o valor total da ordem de serviço (os). * A soma do campo 'valor' na tabela 'caixas' indica o valor pago para uma ordem de serviço (os). * O campo 'paga' da tabela 'os' deve ser igual a 1 para indicar que a 'os' foi paga e essa 'os' deve possuir um ou mais registros na tabela 'caixas'. * A relação entre as tabelas 'os' e 'os_servicos' é de 1 para muitos. * A relação entre as tabelas 'os' e 'caixas' é de 1 para muitos, indicando que o valor total de uma 'os' é igual à soma dos registros relacionados na tabela 'caixas'. 2. Condições para Consultas: * Registros válidos: O campo 'ativo' ou 'ativa' deve ser igual a 1 para indicar um registro válido. * Registros excluídos: O campo 'deleted_at' diferente de NULL indica que o registro foi apagado. 3.Pagamentos e Pendências: * Uma 'os' é considerada paga somente se existir um ou mais registros relacionado na tabela 'caixas' com o campo 'cancelado' igual a 0. * Uma 'os' é considerada pendente de pagamento se houver um ou mais registros relacionados na tabela 'caixas_pendentes'. 4. Formatação de Consultas: * Nunca forneça mais de uma sugestão de consulta por resposta. * Utilize JOIN para relacionar tabelas quando necessário. * Inclua a tabela 'caixas' em todas as consultas, pois é essencial para determinar o status de pagamento da 'os'. * Priorize a clareza e a eficiência em todas as consultas. 5. Consultas com Filtros: * Caso a solicitação seja referente a um serviço específico, use o operador 'LIKE' no filtro para buscar o serviço desejado. Substitua espaços no nome do serviço por '%'. * Exemplo: Para buscar por 'filme de segurança', use 'filme%seguranca'. 6. Nomes e Termos Normalizados: * Utilize sempre nomes de tabelas e colunas em letras minúsculas e sem acentos. * Substitua os termos 'ordens_servicos' ou 'ordem_servicos' por 'os'. * O termo 'filme' refere-se a película de proteção solar. * O termo 'PS' refere-se a película de proteção solar de segurança contra vandalismo e intrusão. 7.Interpretação de Solicitações: * Se a solicitação for ambígua, peça mais informações ao usuário. * Considere como válida apenas a informação fornecida diretamente na solicitação do usuário, sem inferências adicionais."
            },
            {
                "role": "user",
                "content": "Qual é a estrutura do banco de dados 'smart', refiro-me as tabelas e relacionamentos, por ter 260 tabelas responda em partes, 190° a 200º?"
            },
            {
                "role": "assistant",            
                "content": "CREATE TABLE `tabelas_comissoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`tabela_comissao_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `tabelas_comissoes_tabela_comissao_tipo_id_foreign` (`tabela_comissao_tipo_id`),CONSTRAINT `tabelas_comissoes_tabela_comissao_tipo_id_foreign` FOREIGN KEY (`tabela_comissao_tipo_id`) REFERENCES `tabela_comissao_tipos` (`id`));CREATE TABLE `tabelas_precos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(100)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `telas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(200)  NOT NULL,`url` varchar(200)  DEFAULT NULL,`rota` varchar(200)  DEFAULT NULL,`ordem` int unsigned NOT NULL DEFAULT '1',`icone` varchar(255)  DEFAULT NULL,`controller` varchar(255)  DEFAULT NULL,`parametros` varchar(255)  DEFAULT NULL,`exibir_menu` tinyint(1) NOT NULL,`v3` tinyint(1) NOT NULL DEFAULT '0',`parente` int unsigned DEFAULT NULL,`modulo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `telas_parente_foreign` (`parente`),KEY `telas_modulo_id_foreign` (`modulo_id`),CONSTRAINT `telas_modulo_id_foreign` FOREIGN KEY (`modulo_id`) REFERENCES `modulos` (`id`),CONSTRAINT `telas_parente_foreign` FOREIGN KEY (`parente`) REFERENCES `telas` (`id`));CREATE TABLE `tipo_remessa_concessionarias` (`id` int unsigned NOT NULL AUTO_INCREMENT,`concessionaria_id` int unsigned NOT NULL,`tipo_remessa_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `tipo_remessa_concessionarias_concessionaria_id_foreign` (`concessionaria_id`),KEY `tipo_remessa_concessionarias_tipo_remessa_id_foreign` (`tipo_remessa_id`),CONSTRAINT `tipo_remessa_concessionarias_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `tipo_remessa_concessionarias_tipo_remessa_id_foreign` FOREIGN KEY (`tipo_remessa_id`) REFERENCES `tipo_remessas` (`id`) );CREATE TABLE `tipo_remessas` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `tonalidades` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(20)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `tonalidades_deleted_at` (`deleted_at`),KEY `produtos` (`ativo`,`deleted_at`),KEY `tonalidades_ativas_index` (`ativo`,`deleted_at`));CREATE TABLE `transportadoras` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(40)  NOT NULL,`razao_social` varchar(50)  DEFAULT NULL,`cnpj` varchar(14)  DEFAULT NULL,`ie` varchar(14)  DEFAULT NULL,`im` varchar(14)  DEFAULT NULL,`telefone1` varchar(15)  NOT NULL,`telefone2` varchar(15)  DEFAULT NULL,`email` varchar(30)  DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb3 COLLATE=utf8mb3_unicode_ci;CREATE TABLE `usuario_acessos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`ip` varchar(255)  NOT NULL,`localidade` varchar(255)  DEFAULT NULL,`detalhes` text DEFAULT NULL,`sucesso` tinyint(1) NOT NULL,`observacao` varchar(255)  DEFAULT NULL,`usuario_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `uaui` (`usuario_id`),CONSTRAINT `uaui` FOREIGN KEY (`usuario_id`) REFERENCES `usuarios` (`id`));CREATE TABLE `usuarios` (`id` int unsigned NOT NULL AUTO_INCREMENT,`login` varchar(30)  NOT NULL,`password` varchar(60)  NOT NULL,`funcionario_id` int unsigned NOT NULL,`mc_user_id` int unsigned DEFAULT NULL,`grupo_usuario_id` int unsigned NOT NULL,`bloqueio_justificativa` int unsigned NOT NULL DEFAULT '0',`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,`bloqueio` tinyint(1) DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE KEY `usuarios_login_unique` (`login`),KEY `usuarios_funcionario_id_foreign` (`funcionario_id`),KEY `usuarios_grupo_usuario_id_foreign` (`grupo_usuario_id`),CONSTRAINT `usuarios_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `usuarios_grupo_usuario_id_foreign` FOREIGN KEY (`grupo_usuario_id`) REFERENCES `grupos_usuarios` (`id`));CREATE TABLE `venda_meta_departamentos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`departamento_id` int unsigned NOT NULL,`venda_meta_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `venda_meta_departamentos_departamento_id_foreign` (`departamento_id`),KEY `venda_meta_departamentos_venda_meta_id_foreign` (`venda_meta_id`),CONSTRAINT `venda_meta_departamentos_departamento_id_foreign` FOREIGN KEY (`departamento_id`) REFERENCES `departamentos` (`id`),CONSTRAINT `venda_meta_departamentos_venda_meta_id_foreign` FOREIGN KEY (`venda_meta_id`) REFERENCES `venda_metas` (`id`) );CREATE TABLE `venda_meta_historicos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`descricao` varchar(255)  NOT NULL,`venda_meta_id` bigint unsigned NOT NULL,`funcionario_registro_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `venda_meta_historicos_venda_meta_id_foreign` (`venda_meta_id`),KEY `venda_meta_historicos_funcionario_registro_id_foreign` (`funcionario_registro_id`),CONSTRAINT `venda_meta_historicos_funcionario_registro_id_foreign` FOREIGN KEY (`funcionario_registro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `venda_meta_historicos_venda_meta_id_foreign` FOREIGN KEY (`venda_meta_id`) REFERENCES `venda_metas` (`id`));CREATE TABLE `venda_meta_meses` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`mes_referencia` int unsigned NOT NULL,`valor_meta` decimal(8,2) unsigned NOT NULL,`porcentagem_minima_meta` decimal(8,2) unsigned NOT NULL,`porcentagem_minima_recebimento` decimal(8,2) unsigned NOT NULL,`venda_meta_id` bigint unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `venda_meta_meses_venda_meta_id_foreign` (`venda_meta_id`),CONSTRAINT `venda_meta_meses_venda_meta_id_foreign` FOREIGN KEY (`venda_meta_id`) REFERENCES `venda_metas` (`id`) );CREATE TABLE `venda_meta_os_tipos` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`venda_meta_id` bigint unsigned NOT NULL,`os_tipo_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `venda_meta_os_tipos_venda_meta_id_foreign` (`venda_meta_id`),KEY `venda_meta_os_tipos_os_tipo_id_foreign` (`os_tipo_id`),CONSTRAINT `venda_meta_os_tipos_os_tipo_id_foreign` FOREIGN KEY (`os_tipo_id`) REFERENCES `os_tipos` (`id`),CONSTRAINT `venda_meta_os_tipos_venda_meta_id_foreign` FOREIGN KEY (`venda_meta_id`) REFERENCES `venda_metas` (`id`));CREATE TABLE `venda_metas` (`id` bigint unsigned NOT NULL AUTO_INCREMENT,`ano_referencia` varchar(45)  DEFAULT NULL,`concessionaria_id` int unsigned NOT NULL,`funcionario_cadastro_id` int unsigned DEFAULT NULL,`vendedor_treinador_id` int unsigned DEFAULT NULL,`vendedor_id` int unsigned DEFAULT NULL,`valor_premiacao_recebimento` decimal(8,2) unsigned DEFAULT '0.00',`porcentagem_minima_recebimento` decimal(8,2) unsigned DEFAULT '0.00',`valor_premiacao_dvu` decimal(8,2) unsigned DEFAULT '0.00',`valor_meta_dvu` decimal(8,2) unsigned DEFAULT '0.00',`valor_premiacao_dvn` decimal(8,2) unsigned DEFAULT '0.00',`valor_meta_dvn` decimal(8,2) unsigned DEFAULT '0.00',`valor_meta_frotista` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_premiacao_frotista` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_meta_oficina` decimal(8,2) NOT NULL DEFAULT '0.00',`valor_premiacao_oficina` decimal(8,2) NOT NULL DEFAULT '0.00',`validade` date DEFAULT NULL,`periodo` date DEFAULT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `venda_metas_concessionaria_id_foreign` (`concessionaria_id`),KEY `venda_metas_funcionario_cadastro_id_foreign` (`funcionario_cadastro_id`),KEY `venda_metas_vendedor_id` (`vendedor_id`),KEY `venda_metas_vendedor_treinador_id` (`vendedor_treinador_id`),CONSTRAINT `venda_metas_concessionaria_id_foreign` FOREIGN KEY (`concessionaria_id`) REFERENCES `concessionarias` (`id`),CONSTRAINT `venda_metas_funcionario_cadastro_id_foreign` FOREIGN KEY (`funcionario_cadastro_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `venda_metas_vendedor_id` FOREIGN KEY (`vendedor_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `venda_metas_vendedor_treinador_id` FOREIGN KEY (`vendedor_treinador_id`) REFERENCES `funcionarios` (`id`));CREATE TABLE `vr_cartoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`numero` varchar(30)  NOT NULL,`valor_dia` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`desconto_dia` decimal(8,2) unsigned NOT NULL DEFAULT '0.00',`cancelado` tinyint(1) NOT NULL DEFAULT '0',`data_cancelamento` datetime DEFAULT NULL,`justificativa_cancelamento` text DEFAULT NULL,`observacao` text DEFAULT NULL,`funcionario_id` int unsigned NOT NULL,`empresa_id` int unsigned NOT NULL,`vr_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vr_cartoes_funcionario_id_foreign` (`funcionario_id`),KEY `vr_cartoes_empresa_id_foreign` (`empresa_id`),KEY `vr_cartoes_vr_tipo_id_foreign` (`vr_tipo_id`),CONSTRAINT `vr_cartoes_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `vr_cartoes_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `vr_cartoes_vr_tipo_id_foreign` FOREIGN KEY (`vr_tipo_id`) REFERENCES `vr_tipos` (`id`) );CREATE TABLE `vr_historicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`detalhes` text  NOT NULL,`funcionario_id` int unsigned NOT NULL,`vr_cartao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vr_historicos_funcionario_id_foreign` (`funcionario_id`),KEY `vr_historicos_vr_cartao_id_foreign` (`vr_cartao_id`),CONSTRAINT `vr_historicos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `vr_historicos_vr_cartao_id_foreign` FOREIGN KEY (`vr_cartao_id`) REFERENCES `vr_cartoes` (`id`));CREATE TABLE `vr_pagamento_lancamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`valor_dia` decimal(8,2) unsigned NOT NULL,`desconto_dia` decimal(8,2) unsigned DEFAULT NULL,`dias_uteis` int unsigned NOT NULL,`valor_total` decimal(8,2) unsigned NOT NULL,`desconto_total` decimal(8,2) unsigned DEFAULT NULL,`valor_total_real` decimal(8,2) unsigned DEFAULT NULL,`justificativa` text DEFAULT NULL,`funcionario_id` int unsigned DEFAULT NULL,`vr_pagamento_id` int unsigned NOT NULL,`vr_cartao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vr_pagamento_lancamentos_funcionario_id_foreign` (`funcionario_id`),KEY `vr_pagamento_lancamentos_vr_pagamento_id_foreign` (`vr_pagamento_id`),KEY `vr_pagamento_lancamentos_vr_cartao_id_foreign` (`vr_cartao_id`),CONSTRAINT `vr_pagamento_lancamentos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `vr_pagamento_lancamentos_vr_cartao_id_foreign` FOREIGN KEY (`vr_cartao_id`) REFERENCES `vr_cartoes` (`id`),CONSTRAINT `vr_pagamento_lancamentos_vr_pagamento_id_foreign` FOREIGN KEY (`vr_pagamento_id`) REFERENCES `vr_pagamentos` (`id`));CREATE TABLE `vr_pagamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`periodo` date NOT NULL,`dias_uteis` int unsigned NOT NULL,`valor_total` decimal(8,2) unsigned NOT NULL,`desconto_total` decimal(8,2) unsigned DEFAULT NULL,`valor_total_real` decimal(8,2) unsigned DEFAULT NULL,`empresa_id` int unsigned NOT NULL,`vr_tipo_id` int unsigned NOT NULL,`avulso` tinyint(1) NOT NULL DEFAULT '0',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vr_pagamentos_empresa_id_foreign` (`empresa_id`),KEY `vr_pagamentos_vr_tipo_id_foreign` (`vr_tipo_id`),CONSTRAINT `vr_pagamentos_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `vr_pagamentos_vr_tipo_id_foreign` FOREIGN KEY (`vr_tipo_id`) REFERENCES `vr_tipos` (`id`));CREATE TABLE `vr_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(255)  NOT NULL,`descricao` varchar(255)  DEFAULT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));CREATE TABLE `vt_cartoes` (`id` int unsigned NOT NULL AUTO_INCREMENT,`numero` varchar(30)  NOT NULL,`empresa_id` int unsigned NOT NULL,`vt_tipo_id` int unsigned NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vt_cartoes_empresa_id_foreign` (`empresa_id`),KEY `vt_cartoes_vt_tipo_id_foreign` (`vt_tipo_id`),CONSTRAINT `vt_cartoes_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `vt_cartoes_vt_tipo_id_foreign` FOREIGN KEY (`vt_tipo_id`) REFERENCES `vt_tipos` (`id`));CREATE TABLE `vt_historicos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`detalhes` text DEFAULT NULL,`funcionario_id` int unsigned DEFAULT NULL,`vt_cartao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vt_historicos_funcionario_id_foreign` (`funcionario_id`),KEY `vt_historicos_vt_cartao_id_foreign` (`vt_cartao_id`),CONSTRAINT `vt_historicos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `vt_historicos_vt_cartao_id_foreign` FOREIGN KEY (`vt_cartao_id`) REFERENCES `vt_cartoes` (`id`));CREATE TABLE `vt_pagamento_lancamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`passes_dia` decimal(8,2) unsigned NOT NULL,`valor_passe` decimal(8,2) unsigned NOT NULL,`saldo_atual` decimal(8,2) NOT NULL,`valor_defasagem` decimal(8,2) NOT NULL,`recarga_sem_monitoria` decimal(8,2) NOT NULL,`recarga_com_monitoria` decimal(8,2) NOT NULL,`valor_nf` decimal(8,2) unsigned NOT NULL,`justificativa` text DEFAULT NULL,`funcionario_id` int unsigned DEFAULT NULL,`vt_pagamento_id` int unsigned NOT NULL,`vt_cartao_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vt_pagamento_lancamentos_funcionario_id_foreign` (`funcionario_id`),KEY `vt_pagamento_lancamentos_vt_pagamento_id_foreign` (`vt_pagamento_id`),KEY `vt_pagamento_lancamentos_vt_cartao_id_foreign` (`vt_cartao_id`),CONSTRAINT `vt_pagamento_lancamentos_funcionario_id_foreign` FOREIGN KEY (`funcionario_id`) REFERENCES `funcionarios` (`id`),CONSTRAINT `vt_pagamento_lancamentos_vt_cartao_id_foreign` FOREIGN KEY (`vt_cartao_id`) REFERENCES `vt_cartoes` (`id`),CONSTRAINT `vt_pagamento_lancamentos_vt_pagamento_id_foreign` FOREIGN KEY (`vt_pagamento_id`) REFERENCES `vt_pagamentos` (`id`));CREATE TABLE `vt_pagamentos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`periodo` datetime NOT NULL,`dias_uteis` int unsigned NOT NULL,`dias_defasagem` int unsigned NOT NULL,`total_sem_monitoria` decimal(8,2) NOT NULL,`total_com_monitoria` decimal(8,2) NOT NULL,`total_nf` decimal(8,2) unsigned NOT NULL,`avulso` tinyint(1) NOT NULL DEFAULT '0',`empresa_id` int unsigned NOT NULL,`vt_tipo_id` int unsigned NOT NULL,`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`),KEY `vt_pagamentos_empresa_id_foreign` (`empresa_id`),KEY `vt_pagamentos_vt_tipo_id_foreign` (`vt_tipo_id`),CONSTRAINT `vt_pagamentos_empresa_id_foreign` FOREIGN KEY (`empresa_id`) REFERENCES `empresas` (`id`),CONSTRAINT `vt_pagamentos_vt_tipo_id_foreign` FOREIGN KEY (`vt_tipo_id`) REFERENCES `vt_tipos` (`id`));CREATE TABLE `vt_tipos` (`id` int unsigned NOT NULL AUTO_INCREMENT,`nome` varchar(30)  NOT NULL,`ativo` tinyint(1) NOT NULL DEFAULT '1',`created_at` timestamp NULL DEFAULT NULL,`updated_at` timestamp NULL DEFAULT NULL,`deleted_at` timestamp NULL DEFAULT NULL,PRIMARY KEY (`id`));"
            }
        ]
    }
]